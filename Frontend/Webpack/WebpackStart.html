<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 入门 | Yan&#39;s Blog Home</title>
    <meta name="description" content="Personal blog site">
    
    
    <link rel="preload" href="/assets/css/0.styles.659f981c.css" as="style"><link rel="preload" href="/assets/js/app.2ba1140b.js" as="script"><link rel="preload" href="/assets/js/2.858e58ff.js" as="script"><link rel="preload" href="/assets/js/34.6db47b26.js" as="script"><link rel="prefetch" href="/assets/js/10.5dcc1f52.js"><link rel="prefetch" href="/assets/js/100.0327e00b.js"><link rel="prefetch" href="/assets/js/101.404f187c.js"><link rel="prefetch" href="/assets/js/102.d78878ec.js"><link rel="prefetch" href="/assets/js/103.a682f6f1.js"><link rel="prefetch" href="/assets/js/104.d831bcb5.js"><link rel="prefetch" href="/assets/js/105.afbf1884.js"><link rel="prefetch" href="/assets/js/106.8e9709d3.js"><link rel="prefetch" href="/assets/js/107.9712aa22.js"><link rel="prefetch" href="/assets/js/108.4158fdb6.js"><link rel="prefetch" href="/assets/js/109.ae61a303.js"><link rel="prefetch" href="/assets/js/11.34e3d90e.js"><link rel="prefetch" href="/assets/js/110.0abce6c9.js"><link rel="prefetch" href="/assets/js/111.b5c958e5.js"><link rel="prefetch" href="/assets/js/112.fdacfaf6.js"><link rel="prefetch" href="/assets/js/113.9d95243d.js"><link rel="prefetch" href="/assets/js/114.f759f9b9.js"><link rel="prefetch" href="/assets/js/115.1b1f9f3d.js"><link rel="prefetch" href="/assets/js/116.1e5e62e4.js"><link rel="prefetch" href="/assets/js/117.952db9d4.js"><link rel="prefetch" href="/assets/js/118.ed9df468.js"><link rel="prefetch" href="/assets/js/119.f19ee9e0.js"><link rel="prefetch" href="/assets/js/12.cd237cda.js"><link rel="prefetch" href="/assets/js/120.24dbecef.js"><link rel="prefetch" href="/assets/js/121.0aa2d47c.js"><link rel="prefetch" href="/assets/js/122.5205ca42.js"><link rel="prefetch" href="/assets/js/123.25aa20a6.js"><link rel="prefetch" href="/assets/js/124.420b2a92.js"><link rel="prefetch" href="/assets/js/125.091331f4.js"><link rel="prefetch" href="/assets/js/126.471b335f.js"><link rel="prefetch" href="/assets/js/127.60ffdb36.js"><link rel="prefetch" href="/assets/js/128.9c5c36ef.js"><link rel="prefetch" href="/assets/js/129.36fd802b.js"><link rel="prefetch" href="/assets/js/13.de2ffe9f.js"><link rel="prefetch" href="/assets/js/130.822de8a4.js"><link rel="prefetch" href="/assets/js/131.697750e2.js"><link rel="prefetch" href="/assets/js/132.fd5faa78.js"><link rel="prefetch" href="/assets/js/133.cf327ef4.js"><link rel="prefetch" href="/assets/js/134.6cdb8690.js"><link rel="prefetch" href="/assets/js/135.906c8800.js"><link rel="prefetch" href="/assets/js/136.43585d13.js"><link rel="prefetch" href="/assets/js/137.3c7ddb41.js"><link rel="prefetch" href="/assets/js/138.e3274ead.js"><link rel="prefetch" href="/assets/js/139.7fa38b58.js"><link rel="prefetch" href="/assets/js/14.9d6406e7.js"><link rel="prefetch" href="/assets/js/140.1b026dad.js"><link rel="prefetch" href="/assets/js/141.c1adfec5.js"><link rel="prefetch" href="/assets/js/142.ed2a4a22.js"><link rel="prefetch" href="/assets/js/143.af96e2f9.js"><link rel="prefetch" href="/assets/js/144.923a7d38.js"><link rel="prefetch" href="/assets/js/145.d88163de.js"><link rel="prefetch" href="/assets/js/146.2134dd3e.js"><link rel="prefetch" href="/assets/js/147.9925c468.js"><link rel="prefetch" href="/assets/js/148.109297cc.js"><link rel="prefetch" href="/assets/js/149.ae529d47.js"><link rel="prefetch" href="/assets/js/15.fe3428fa.js"><link rel="prefetch" href="/assets/js/150.6bf9657f.js"><link rel="prefetch" href="/assets/js/151.603cf1f9.js"><link rel="prefetch" href="/assets/js/152.b64ef399.js"><link rel="prefetch" href="/assets/js/153.fd5cde7c.js"><link rel="prefetch" href="/assets/js/154.8cedd5d3.js"><link rel="prefetch" href="/assets/js/155.042308eb.js"><link rel="prefetch" href="/assets/js/156.1f58dd5a.js"><link rel="prefetch" href="/assets/js/157.69e07481.js"><link rel="prefetch" href="/assets/js/158.40b656df.js"><link rel="prefetch" href="/assets/js/159.823c56a4.js"><link rel="prefetch" href="/assets/js/16.7976352c.js"><link rel="prefetch" href="/assets/js/160.93aba24e.js"><link rel="prefetch" href="/assets/js/161.3ae7729a.js"><link rel="prefetch" href="/assets/js/162.8092cc22.js"><link rel="prefetch" href="/assets/js/163.3c82e51b.js"><link rel="prefetch" href="/assets/js/164.d358ee7b.js"><link rel="prefetch" href="/assets/js/165.60d778eb.js"><link rel="prefetch" href="/assets/js/166.54d7340a.js"><link rel="prefetch" href="/assets/js/167.5fd6aaa3.js"><link rel="prefetch" href="/assets/js/168.205929f8.js"><link rel="prefetch" href="/assets/js/169.873b90b1.js"><link rel="prefetch" href="/assets/js/17.72e8ffa6.js"><link rel="prefetch" href="/assets/js/170.68c49359.js"><link rel="prefetch" href="/assets/js/171.d8f93304.js"><link rel="prefetch" href="/assets/js/172.6b496cc7.js"><link rel="prefetch" href="/assets/js/173.f276a0ce.js"><link rel="prefetch" href="/assets/js/174.09cb41e2.js"><link rel="prefetch" href="/assets/js/175.c77ce8d9.js"><link rel="prefetch" href="/assets/js/176.01ab9f3f.js"><link rel="prefetch" href="/assets/js/177.2f91a2a4.js"><link rel="prefetch" href="/assets/js/178.5f0a0527.js"><link rel="prefetch" href="/assets/js/179.0d14e948.js"><link rel="prefetch" href="/assets/js/18.8264b169.js"><link rel="prefetch" href="/assets/js/180.9a15f295.js"><link rel="prefetch" href="/assets/js/181.d5bcbada.js"><link rel="prefetch" href="/assets/js/182.571b87a8.js"><link rel="prefetch" href="/assets/js/183.b87f5a38.js"><link rel="prefetch" href="/assets/js/184.90ecbd35.js"><link rel="prefetch" href="/assets/js/185.3a38f733.js"><link rel="prefetch" href="/assets/js/186.881a0fab.js"><link rel="prefetch" href="/assets/js/187.17663dea.js"><link rel="prefetch" href="/assets/js/188.471fcd9b.js"><link rel="prefetch" href="/assets/js/189.6d486653.js"><link rel="prefetch" href="/assets/js/19.e6227b20.js"><link rel="prefetch" href="/assets/js/190.357b4cc8.js"><link rel="prefetch" href="/assets/js/191.ccf9ae83.js"><link rel="prefetch" href="/assets/js/192.3ee45cf5.js"><link rel="prefetch" href="/assets/js/193.2fbcbc68.js"><link rel="prefetch" href="/assets/js/194.61d0acd9.js"><link rel="prefetch" href="/assets/js/195.33b772c3.js"><link rel="prefetch" href="/assets/js/196.7d35848a.js"><link rel="prefetch" href="/assets/js/197.4b958d27.js"><link rel="prefetch" href="/assets/js/198.dfbfba98.js"><link rel="prefetch" href="/assets/js/199.f6c7aacb.js"><link rel="prefetch" href="/assets/js/20.65ad9b00.js"><link rel="prefetch" href="/assets/js/200.6a05302e.js"><link rel="prefetch" href="/assets/js/201.be446c97.js"><link rel="prefetch" href="/assets/js/202.d058ca1d.js"><link rel="prefetch" href="/assets/js/203.ef2b609c.js"><link rel="prefetch" href="/assets/js/204.dab38ee5.js"><link rel="prefetch" href="/assets/js/21.300f7dfb.js"><link rel="prefetch" href="/assets/js/22.0ed457bc.js"><link rel="prefetch" href="/assets/js/23.9cf0f43d.js"><link rel="prefetch" href="/assets/js/24.f151ffcb.js"><link rel="prefetch" href="/assets/js/25.680a763b.js"><link rel="prefetch" href="/assets/js/26.6a5f804d.js"><link rel="prefetch" href="/assets/js/27.98408441.js"><link rel="prefetch" href="/assets/js/28.acbefbd1.js"><link rel="prefetch" href="/assets/js/29.fbd2340a.js"><link rel="prefetch" href="/assets/js/3.753236a7.js"><link rel="prefetch" href="/assets/js/30.30b44255.js"><link rel="prefetch" href="/assets/js/31.510d262b.js"><link rel="prefetch" href="/assets/js/32.c204bc79.js"><link rel="prefetch" href="/assets/js/33.5fa66039.js"><link rel="prefetch" href="/assets/js/35.fcb88dd5.js"><link rel="prefetch" href="/assets/js/36.e294e99d.js"><link rel="prefetch" href="/assets/js/37.fe541556.js"><link rel="prefetch" href="/assets/js/38.94af8189.js"><link rel="prefetch" href="/assets/js/39.e7017f9b.js"><link rel="prefetch" href="/assets/js/4.1c3159e6.js"><link rel="prefetch" href="/assets/js/40.b7a1deeb.js"><link rel="prefetch" href="/assets/js/41.ae4d7d1e.js"><link rel="prefetch" href="/assets/js/42.5dc5c7f6.js"><link rel="prefetch" href="/assets/js/43.73610732.js"><link rel="prefetch" href="/assets/js/44.2b0e19f3.js"><link rel="prefetch" href="/assets/js/45.903efdc0.js"><link rel="prefetch" href="/assets/js/46.0684656f.js"><link rel="prefetch" href="/assets/js/47.6425b35e.js"><link rel="prefetch" href="/assets/js/48.43663ba9.js"><link rel="prefetch" href="/assets/js/49.34841bc0.js"><link rel="prefetch" href="/assets/js/5.d3774f5f.js"><link rel="prefetch" href="/assets/js/50.48ce1d7e.js"><link rel="prefetch" href="/assets/js/51.1820aa29.js"><link rel="prefetch" href="/assets/js/52.5317c537.js"><link rel="prefetch" href="/assets/js/53.71b86df9.js"><link rel="prefetch" href="/assets/js/54.31ed2a5e.js"><link rel="prefetch" href="/assets/js/55.4f9933ab.js"><link rel="prefetch" href="/assets/js/56.beb74e07.js"><link rel="prefetch" href="/assets/js/57.705bc19e.js"><link rel="prefetch" href="/assets/js/58.f5fd656b.js"><link rel="prefetch" href="/assets/js/59.cc8ae217.js"><link rel="prefetch" href="/assets/js/6.f082ca37.js"><link rel="prefetch" href="/assets/js/60.fc3cf484.js"><link rel="prefetch" href="/assets/js/61.b5032b43.js"><link rel="prefetch" href="/assets/js/62.64d7637a.js"><link rel="prefetch" href="/assets/js/63.2a71075b.js"><link rel="prefetch" href="/assets/js/64.21eb4820.js"><link rel="prefetch" href="/assets/js/65.11535a8c.js"><link rel="prefetch" href="/assets/js/66.d9c62638.js"><link rel="prefetch" href="/assets/js/67.5782c958.js"><link rel="prefetch" href="/assets/js/68.35886dae.js"><link rel="prefetch" href="/assets/js/69.934aa057.js"><link rel="prefetch" href="/assets/js/7.9a79fd87.js"><link rel="prefetch" href="/assets/js/70.53c7c7a2.js"><link rel="prefetch" href="/assets/js/71.0e82b1c6.js"><link rel="prefetch" href="/assets/js/72.1da0eaf9.js"><link rel="prefetch" href="/assets/js/73.3dabc9cd.js"><link rel="prefetch" href="/assets/js/74.b2ae43f6.js"><link rel="prefetch" href="/assets/js/75.55bf2044.js"><link rel="prefetch" href="/assets/js/76.2f88e50b.js"><link rel="prefetch" href="/assets/js/77.d916e87e.js"><link rel="prefetch" href="/assets/js/78.0e80a77d.js"><link rel="prefetch" href="/assets/js/79.03bce65e.js"><link rel="prefetch" href="/assets/js/8.60d5a8a9.js"><link rel="prefetch" href="/assets/js/80.96678f59.js"><link rel="prefetch" href="/assets/js/81.75ffa4d3.js"><link rel="prefetch" href="/assets/js/82.41c1aeb7.js"><link rel="prefetch" href="/assets/js/83.16d5e455.js"><link rel="prefetch" href="/assets/js/84.195ca01f.js"><link rel="prefetch" href="/assets/js/85.d850d4dd.js"><link rel="prefetch" href="/assets/js/86.32d87d56.js"><link rel="prefetch" href="/assets/js/87.5f97a4f6.js"><link rel="prefetch" href="/assets/js/88.f5b0bbdb.js"><link rel="prefetch" href="/assets/js/89.9f9150f5.js"><link rel="prefetch" href="/assets/js/9.74db15a0.js"><link rel="prefetch" href="/assets/js/90.f69286ce.js"><link rel="prefetch" href="/assets/js/91.c9995055.js"><link rel="prefetch" href="/assets/js/92.e992da4f.js"><link rel="prefetch" href="/assets/js/93.14137340.js"><link rel="prefetch" href="/assets/js/94.c8228a63.js"><link rel="prefetch" href="/assets/js/95.bbb7ce03.js"><link rel="prefetch" href="/assets/js/96.ce87793d.js"><link rel="prefetch" href="/assets/js/97.4fdd8a0b.js"><link rel="prefetch" href="/assets/js/98.74cfc635.js"><link rel="prefetch" href="/assets/js/99.abdd1b46.js">
    <link rel="stylesheet" href="/assets/css/0.styles.659f981c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yan's Blog Home</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Html &amp; CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Frontend/Webpack/" class="sidebar-link">Webpack</a></li><li><a href="/Frontend/Webpack/WebpackStart.html" class="active sidebar-link">webpack 入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#什么是webpack，为什么要使用它？" class="sidebar-link">什么是WebPack，为什么要使用它？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#为什要使用webpack" class="sidebar-link">为什要使用WebPack</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#什么是webpack" class="sidebar-link">什么是Webpack</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#webpack和grunt以及gulp相比有什么特性" class="sidebar-link">WebPack和Grunt以及Gulp相比有什么特性</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#开始使用webpack" class="sidebar-link">开始使用Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#正式使用webpack前的准备" class="sidebar-link">正式使用Webpack前的准备</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#正式使用webpack" class="sidebar-link">正式使用Webpack</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#通过配置文件来使用webpack" class="sidebar-link">通过配置文件来使用Webpack</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#更快捷的执行打包任务" class="sidebar-link">更快捷的执行打包任务</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#webpack的强大功能" class="sidebar-link">Webpack的强大功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#生成source-maps（使调试更容易）" class="sidebar-link">生成Source Maps（使调试更容易）</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#使用webpack构建本地服务器" class="sidebar-link">使用webpack构建本地服务器</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#loaders" class="sidebar-link">Loaders</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#babel" class="sidebar-link">Babel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#babel的安装与配置" class="sidebar-link">Babel的安装与配置</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#babel的配置" class="sidebar-link">Babel的配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#一切皆模块" class="sidebar-link">一切皆模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#css" class="sidebar-link">CSS</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#css-module" class="sidebar-link">CSS module</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#css预处理器" class="sidebar-link">CSS预处理器</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#插件（plugins）" class="sidebar-link">插件（Plugins）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#使用插件的方法" class="sidebar-link">使用插件的方法</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#htmlwebpackplugin" class="sidebar-link">HtmlWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#hot-module-replacement" class="sidebar-link">Hot Module Replacement</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#产品阶段的构建" class="sidebar-link">产品阶段的构建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#优化插件" class="sidebar-link">优化插件</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#缓存" class="sidebar-link">缓存</a></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#去除build文件中的残余文件" class="sidebar-link">去除build文件中的残余文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/Webpack/WebpackStart.html#最后" class="sidebar-link">最后</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uni-app</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React Native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/index/" class="sidebar-link">&lt; 首页</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-入门"><a href="#webpack-入门" class="header-anchor">#</a> webpack 入门</h1> <div class="custom-block tip"><p class="custom-block-title">此文为转载 （通常一篇文章会参考多处，也会添加自己的理解，引用地址如有遗漏，请指出）</p> <ul><li><a href="https://www.webpackjs.com/concepts/" target="_self" rel="noopener noreferrer">webpack 中文文档</a></li> <li><a href="https://www.jianshu.com/p/42e11515c10f" target="_self" rel="noopener noreferrer">https://www.jianshu.com/p/42e11515c10f</a></li></ul></div> <blockquote><p>注意：作者写此文的时间比较早，所以版本比较老，有些代码/配置可能已经不能跑了，但作为入门读物，了解其基本使用以及概念还是没有问题的~</p></blockquote> <h2 id="什么是webpack，为什么要使用它？"><a href="#什么是webpack，为什么要使用它？" class="header-anchor">#</a> 什么是WebPack，为什么要使用它？</h2> <h3 id="为什要使用webpack"><a href="#为什要使用webpack" class="header-anchor">#</a> 为什要使用WebPack</h3> <p>现今的很多网页其实可以看做是功能丰富的应用，它们拥有着复杂的JavaScript代码和一大堆依赖包。为了简化开发的复杂度，前端社区涌现出了很多好的实践方法</p> <ul><li>模块化，让我们可以把复杂的程序细化为小的文件;</li> <li>类似于TypeScript这种在JavaScript基础上拓展的开发语言：使我们能够实现目前版本的JavaScript不能直接使用的特性，并且之后还能转换为JavaScript文件使浏览器可以识别；</li> <li>Scss，less等CSS预处理器</li> <li>...</li></ul> <p>这些改进确实大大的提高了我们的开发效率，但是利用它们开发的文件往往需要进行额外的处理才能让浏览器识别,而手动处理又是非常繁琐的，这就为WebPack类的工具的出现提供了需求。</p> <h3 id="什么是webpack"><a href="#什么是webpack" class="header-anchor">#</a> 什么是Webpack</h3> <p>WebPack可以看做是<strong>模块打包机</strong>：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Scss，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。</p> <h3 id="webpack和grunt以及gulp相比有什么特性"><a href="#webpack和grunt以及gulp相比有什么特性" class="header-anchor">#</a> WebPack和Grunt以及Gulp相比有什么特性</h3> <p>其实Webpack和另外两个并没有太多的可比性，Gulp/Grunt是一种能够优化前端的开发流程的工具，而WebPack是一种模块化的解决方案，不过Webpack的优点使得Webpack在很多场景下可以替代Gulp/Grunt类的工具。</p> <p>Grunt和Gulp的工作方式是：在一个配置文件中，指明对某些文件进行类似编译，组合，压缩等任务的具体步骤，工具之后可以自动替你完成这些任务。</p> <div style="display:flex;"><img src="/assets/img/webpackstart-1.49d0b97f.png" alt="" align="left" style="zoom:100%;display:block;"></div> <p>Webpack的工作方式是：把你的项目当做一个整体，通过一个给定的主文件（如：index.js），Webpack将从这个文件开始找到你的项目的所有依赖文件，使用loaders处理它们，最后打包为一个（或多个）浏览器可识别的JavaScript文件。</p> <div style="display:flex;"><img src="/assets/img/webpackstart-2.f039550e.png" alt="" align="left" style="zoom:100%;display:block;"></div> <br> <h2 id="开始使用webpack"><a href="#开始使用webpack" class="header-anchor">#</a> 开始使用Webpack</h2> <p>初步了解了Webpack工作方式后，我们一步步的开始学习使用Webpack。</p> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <p>Webpack可以使用npm安装，新建一个空的练习文件夹（此处命名为webpack sample project），在终端中转到该文件夹后执行下述指令就可以完成安装。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>//全局安装
<span class="token function">npm</span> <span class="token function">install</span> -g webpack
//安装到你的项目目录
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="正式使用webpack前的准备"><a href="#正式使用webpack前的准备" class="header-anchor">#</a> 正式使用Webpack前的准备</h3> <p>（1）
在上面创建的文件夹中创建一个<code>package.json</code>文件，这是一个标准的npm说明文件，里面蕴含了丰富的信息，包括当前项目的依赖模块，自定义的脚本任务等等。在终端中使用<code>npm init</code>命令可以自动创建这个<code>package.json</code>文件</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输入这个命令后，终端会问你一系列诸如项目名称，项目描述，作者等信息，不过不用担心，如果你不准备在npm中发布你的模块，这些问题的答案都不重要，回车默认即可。</p> <p>（2）
package.json文件已经就绪，我们在本项目中安装Webpack作为依赖包</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>// 安装Webpack
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（3）
回到之前的空文件夹，并在里面创建两个文件夹,app文件夹和public文件夹，app文件夹用来存放原始数据和我们将写的JavaScript模块，public文件夹用来存放之后供浏览器读取的文件（包括使用webpack打包生成的js文件以及一个<code>index.html</code>文件）。接下来我们再创建三个文件:</p> <ul><li>index.html --放在public文件夹中;</li> <li>Greeter.js-- 放在app文件夹中;</li> <li>main.js-- 放在app文件夹中;</li></ul> <p>此时项目结构如下图所示</p> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="zoom:100%;display:block;"></div> <p>我们在index.html文件中写入最基础的html代码，它在这里目的在于引入打包后的js文件（这里我们先把之后打包后的js文件命名为bundle.js，之后我们还会详细讲述）。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack Sample Project<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>root<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>我们在<code>Greeter.js</code>中定义一个返回包含问候信息的html元素的函数,并依据CommonJS规范导出这个函数为一个模块：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Greeter.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> greet <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  greet<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;Hi there and greetings!&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> greet<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>main.js</code>文件中我们写入下述代码，用以把<code>Greeter</code>模块返回的节点插入页面</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//main.js </span>
<span class="token keyword">const</span> greeter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Greeter.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="正式使用webpack"><a href="#正式使用webpack" class="header-anchor">#</a> 正式使用Webpack</h3> <p>webpack可以在终端中使用，在基本的使用方法如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># {extry file}出填写入口文件的路径，本文中就是上述main.js的路径，
# {destination for bundled file}处填写打包文件的存放路径
# 填写路径的时候不用添加{}
webpack {entry file} {destination for bundled file}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>指定入口文件后，webpack将自动识别项目所依赖的其它文件，不过需要注意的是如果你的webpack不是全局安装的，那么当你在终端中使用此命令时，需要额外指定其在node_modules中的地址，继续上面的例子，在终端中输入如下命令</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># webpack非全局安装的情况</span>
node_modules/.bin/webpack app/main.js public/bundle.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>结果如下</p> <div style="display:flex;"><img src="/assets/img/webpackstart-4.dba90665.png" alt="" align="left" style="zoom:100%;display:block;"></div> <p>可以看出webpack同时编译了 <code>main.js</code> 和 <code>Greeter.js</code>,现在打开<code>index.html</code>,可以看到页面上显示字符串“<code>Hi there and greetings!</code>”了。</p> <p>有没有很激动，已经成功的使用Webpack打包了一个文件了。不过在终端中进行复杂的操作，其实是不太方便且容易出错的，接下来看看Webpack的另一种更常见的使用方法。</p> <h3 id="通过配置文件来使用webpack"><a href="#通过配置文件来使用webpack" class="header-anchor">#</a> 通过配置文件来使用Webpack</h3> <p>Webpack拥有很多其它的比较高级的功能（比如说本文后面会介绍的<code>loaders</code>和<code>plugins</code>），这些功能其实都可以通过命令行模式实现，但是正如前面提到的，这样不太方便且容易出错的，更好的办法是定义一个配置文件，这个配置文件其实也是一个简单的JavaScript模块，我们可以把所有的与打包相关的信息放在里面。</p> <p>继续上面的例子来说明如何写这个配置文件，在当前练习文件夹的根目录下新建一个名为<code>webpack.config.js</code>的文件，我们在其中写入如下所示的简单配置代码，目前的配置主要涉及到的内容是入口文件路径和打包后文件的存放路径。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span>  __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span><span class="token comment">//已多次提及的唯一入口文件</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">,</span><span class="token comment">//打包后的文件存放的地方</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token comment">//打包后输出文件的文件名</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>注：“__dirname”是node.js中的一个全局变量，它指向当前执行脚本所在的目录。</p></blockquote> <p>有了这个配置之后，再打包文件，只需在终端里运行<code>webpack(非全局安装需使用node_modules/.bin/webpack)</code>命令就可以了，这条命令会自动引用<code>webpack.config.js</code>文件中的配置选项，示例如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 非全局安装</span>
node_modules/.bin/webpack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>此时和上面效果一样webpack编译了 <code>main.js</code> 和 <code>Greeter.js</code>，生成<code>bundle.js</code>。</p> <p>又学会了一种使用<code>Webpack</code>的方法，这种方法不用管那烦人的命令行参数，有没有感觉很爽。如果我们可以连webpack(非全局安装需使用node_modules/.bin/webpack)这条命令都可以不用，那种感觉会不会更爽~，继续看下文。</p> <h3 id="更快捷的执行打包任务"><a href="#更快捷的执行打包任务" class="header-anchor">#</a> 更快捷的执行打包任务</h3> <p>在命令行中输入命令需要代码类似于<code>node_modules/.bin/webpack</code>这样的路径其实是比较烦人的，不过值得庆幸的是npm可以引导任务执行，对npm进行配置后可以在命令行中使用简单的<code>npm start</code>命令来替代上面略微繁琐的命令。在<code>package.json</code>中对scripts对象进行相关设置即可，设置方法如下。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-sample-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sample webpack project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span> <span class="token comment">// 修改的是这里，JSON文件不支持注释，引用时请清除</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhang&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.10.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>注：package.json中的script会安装一定顺序寻找命令对应位置，本地的node_modules/.bin路径就在这个寻找清单中，所以无论是全局还是局部安装的Webpack，你都不需要写前面那指明详细的路径了。</p></blockquote> <p>npm的<code>start</code>命令是一个特殊的脚本名称，其特殊性表现在，在命令行中使用<code>npm star</code>t就可以执行其对于的命令，如果对应的此脚本名称不是<code>start</code>，想要在命令行中运行时，需要这样用<code>npm run {script name}</code>如<code>npm run build</code>，我们在命令行中输入<code>npm start</code>试试，输出结果同上。</p> <p>现在只需要使用<code>npm start</code>就可以打包文件了，有没有觉得webpack也不过如此嘛，不过不要太小瞧webpack，要充分发挥其强大的功能我们需要修改配置文件的其它选项，一项项来看。</p> <h2 id="webpack的强大功能"><a href="#webpack的强大功能" class="header-anchor">#</a> Webpack的强大功能</h2> <h3 id="生成source-maps（使调试更容易）"><a href="#生成source-maps（使调试更容易）" class="header-anchor">#</a> 生成Source Maps（使调试更容易）</h3> <p>开发总是离不开调试，方便的调试能极大的提高开发效率，不过有时候通过打包后的文件，你是不容易找到出错了的地方，对应的你写的代码的位置的，<code>Source Maps</code>就是来帮我们解决这个问题的。</p> <p>通过简单的配置，<code>webpack</code>就可以在打包时为我们生成的<code>source maps</code>，这为我们提供了一种对应编译文件和源文件的方法，使得编译后的代码可读性更高，也更容易调试。</p> <p>在<code>webpack</code>的配置文件中配置<code>source maps</code>，需要配置devtool，它有以下四种不同的配置选项，各具优缺点，描述如下：</p> <table><thead><tr><th>devtool选项</th> <th>配置结果</th></tr></thead> <tbody><tr><td><code>source-map</code></td> <td>在一个单独的文件中产生一个完整且功能完全的文件。这个文件具有最好的<code>source map</code>，但是它会减慢打包速度；</td></tr> <tr><td><code>cheap-module-source-map</code></td> <td>在一个单独的文件中生成一个不带列映射的<code>map</code>，不带列映射提高了打包速度，但是也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列（符号），会对调试造成不便；</td></tr> <tr><td><code>eval-source-map</code></td> <td>使用<code>eval</code>打包源文件模块，在同一个文件中生成干净的完整的<code>source map</code>。这个选项可以在不影响构建速度的前提下生成完整的<code>sourcemap</code>，但是对打包后输出的JS文件的执行具有性能和安全的隐患。在开发阶段这是一个非常好的选项，在生产阶段则一定不要启用这个选项；</td></tr> <tr><td><code>cheap-module-eval-source-map</code></td> <td>这是在打包文件时最快的生成<code>source map</code>的方法，生成的<code>Source Map</code> 会和打包后的<code>JavaScript</code>文件同行显示，没有列映射，和<code>eval-source-map</code>选项具有相似的缺点；</td></tr></tbody></table> <p>正如上表所述，上述选项由上到下打包速度越来越快，不过同时也具有越来越多的负面作用，较快的打包速度的后果就是对打包后的文件的的执行有一定影响。</p> <p>对小到中型的项目中，eval-source-map是一个很好的选项，再次强调你只应该开发阶段使用它，我们继续对上文新建的webpack.config.js，进行如下配置:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span>  __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><code>cheap-module-eval-source-map</code>方法构建速度更快，但是不利于调试，推荐在大型项目考虑时间成本时使用。</p></blockquote> <h3 id="使用webpack构建本地服务器"><a href="#使用webpack构建本地服务器" class="header-anchor">#</a> 使用webpack构建本地服务器</h3> <p>想不想让你的浏览器监听你的代码的修改，并自动刷新显示修改后的结果，其实Webpack提供一个可选的本地开发服务器，这个本地服务器基于node.js构建，可以实现你想要的这些功能，不过它是一个单独的组件，在webpack中进行配置之前需要单独安装它作为项目依赖</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-dev-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>devserver作为webpack配置选项中的一项，以下是它的一些配置选项，更多配置可参考<a href="https://webpack.js.org/configuration/dev-server/" target="_self" rel="noopener noreferrer">这里</a></p> <table><thead><tr><th>devserver的配置选项</th> <th>功能描述</th></tr></thead> <tbody><tr><td>contentBase</td> <td>默认webpack-dev-server会为根文件夹提供本地服务器，如果想为另外一个目录下的文件提供本地服务器，应该在这里设置其所在目录（本例设置到“public&quot;目录）</td></tr> <tr><td>port</td> <td>设置默认监听端口，如果省略，默认为”8080“</td></tr> <tr><td>inline</td> <td>设置为<code>true</code>，当源文件改变时会自动刷新页面</td></tr> <tr><td>historyApiFallback</td> <td>在开发单页应用时非常有用，它依赖于HTML5 history API，如果设置为<code>true</code>，所有的跳转将指向index.html</td></tr></tbody></table> <p>把这些命令加到webpack的配置文件中，现在的配置文件<code>webpack.config.js</code>如下所示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>

  entry<span class="token punctuation">:</span>  __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span><span class="token comment">//本地服务器所加载的页面所在的目录</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//不跳转</span>
    inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token comment">//实时刷新</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在package.json中的scripts对象中添加如下命令，用以开启本地服务器：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在终端中输入<code>npm run server</code>即可在本地的8080端口查看结果~</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; news@1.0.0 start C:\heyan\workspace\git_workspace\hzn_bak\hzn_web\ui
&gt; webpack-dev-server -d --inline --config ./config/webpack.config.dev.js

    ... ...

i ｢wds｣: Project is running at http://localhost:8080/
i ｢wds｣: webpack output is served from /

    ... ...

    [./node_modules/lodash/lodash.js] 527 KiB {HtmlWebpackPlugin_0} [built]
    [./node_modules/webpack/buildin/global.js] (webpack)/buildin/global.js 472 bytes {HtmlWebpackPlugin_0} [built]
    [./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 497 bytes {HtmlWebpackPlugin_0} [built]
i ｢wdm｣: Compiled successfully.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="loaders"><a href="#loaders" class="header-anchor">#</a> Loaders</h3> <p><strong>鼎鼎大名的Loaders登场了！</strong></p> <p><code>Loaders</code>是<code>webpack</code>提供的最激动人心的功能之一了。通过使用不同的<code>loader</code>，webpack有能力调用外部的脚本或工具，实现对不同格式的文件的处理，比如说分析转换scss为css，或者把下一代的JS文件(ES6，ES7)转换为现代浏览器兼容的JS文件，对React的开发而言，合适的Loaders可以把React的中用到的JSX文件转换为JS文件。</p> <p><code>Loaders</code>需要单独安装并且需要在<code>webpack.config.js</code>中的<code>module</code>关键字下进行配置，Loaders的配置包括以下几方面：</p> <ul><li>test：一个用以匹配loaders所处理文件的拓展名的正则表达式（必须）</li> <li>loader：loader的名称（必须）</li> <li>include/exclude:手动添加必须处理的文件（文件夹）或屏蔽不需要处理的文件（文件夹）（可选）；</li> <li>query：为loaders提供额外的设置选项（可选）</li></ul> <p>不过在配置<code>loader</code>之前，我们把<code>Greeter.js</code>里的问候消息放在一个单独的JSON文件里,并通过合适的配置使<code>Greeter.js</code>可以读取该JSON文件的值，各文件修改后的代码如下：
在app文件夹中创建带有问候信息的JSON文件(命名为config.json)</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;greetText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hi there and greetings from JSON!&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>更新后的Greeter.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./config.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> greet <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  greet<span class="token punctuation">.</span>textContent <span class="token operator">=</span> config<span class="token punctuation">.</span>greetText<span class="token punctuation">;</span>
  <span class="token keyword">return</span> greet<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>注 由于webpack3.*/webpack2.*已经内置可处理JSON文件，这里我们无需再添加webpack1.*需要的json-loader。<br> <em>在看如何具体使用loader之前我们先看看Babel是什么？</em></p></blockquote> <h2 id="babel"><a href="#babel" class="header-anchor">#</a> Babel</h2> <p>Babel其实是一个编译JavaScript的平台，它可以编译代码帮你达到以下目的：</p> <ul><li>让你能使用最新的JavaScript代码（ES6，ES7...），而不用管新标准是否被当前使用的浏览器完全支持；</li> <li>让你能使用基于JavaScript进行了拓展的语言，比如React的JSX；</li></ul> <h3 id="babel的安装与配置"><a href="#babel的安装与配置" class="header-anchor">#</a> Babel的安装与配置</h3> <p>Babel其实是几个模块化的包，其核心功能位于称为<code>babel-core</code>的npm包中，webpack可以把其不同的包整合在一起使用，对于每一个你需要的功能或拓展，你都需要安装单独的包（用得最多的是解析Es6的<code>babel-env-preset</code>包和解析JSX的<code>babel-preset-react</code>包）。</p> <p>我们先来一次性安装这些依赖包</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>// npm一次性安装多个依赖模块，模块之间用空格隔开
<span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-core babel-loader babel-preset-env babel-preset-react
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在webpack中配置Babel的方法如下:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry: __dirname + <span class="token string">&quot;/app/main.js&quot;</span>,//已多次提及的唯一入口文件
    output: <span class="token punctuation">{</span>
        path: __dirname + <span class="token string">&quot;/public&quot;</span>,//打包后的文件存放的地方
        filename: <span class="token string">&quot;bundle.js&quot;</span>//打包后输出文件的文件名
    <span class="token punctuation">}</span>,
    devtool: <span class="token string">'eval-source-map'</span>,
    devServer: <span class="token punctuation">{</span>
        contentBase: <span class="token string">&quot;./public&quot;</span>,//本地服务器所加载的页面所在的目录
        historyApiFallback: true,//不跳转
        inline: true//实时刷新
    <span class="token punctuation">}</span>,
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test: /<span class="token punctuation">(</span><span class="token punctuation">\</span>.jsx<span class="token operator">|</span><span class="token punctuation">\</span>.js<span class="token punctuation">)</span>$/,
                use: <span class="token punctuation">{</span>
                    loader: <span class="token string">&quot;babel-loader&quot;</span>,
                    options: <span class="token punctuation">{</span>
                        presets: <span class="token punctuation">[</span>
                            <span class="token string">&quot;env&quot;</span>, <span class="token string">&quot;react&quot;</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>,
                exclude: /node_modules/
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>现在你的webpack的配置已经允许你使用ES6以及JSX的语法了。继续用上面的例子进行测试，不过这次我们会使用React，记得先安装 React 和 React-DOM</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save react react-dom
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来我们使用ES6的语法，更新<code>Greeter.js</code>并返回一个React组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//Greeter,js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'./config.json'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>config<span class="token punctuation">.</span>greetText<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Greeter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>修改<code>main.js</code>如下，使用ES6的模块定义和渲染<code>Greeter</code>模块</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Greeter <span class="token keyword">from</span> <span class="token string">'./Greeter'</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Greeter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>重新使用<code>npm start</code>打包，如果之前打开的本地服务器没有关闭，你应该可以在<code>localhost:8080</code>下看到与之前一样的内容，这说明react和es6被正常打包了。</p> <h3 id="babel的配置"><a href="#babel的配置" class="header-anchor">#</a> Babel的配置</h3> <p>Babel其实可以完全在 <code>webpack.config.js</code> 中进行配置，但是考虑到babel具有非常多的配置选项，在单一的<code>webpack.config.js</code>文件中进行配置往往使得这个文件显得太复杂，因此一些开发者支持把babel的配置选项放在一个单独的名为 &quot;<code>.babelrc</code>&quot; 的配置文件中。我们现在的babel的配置并不算复杂，不过之后我们会再加一些东西，因此现在我们就提取出相关部分，分两个配置文件进行配置（webpack会自动调用<code>.babelrc</code>里的<code>babel</code>配置选项），如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span><span class="token comment">//已多次提及的唯一入口文件</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">,</span><span class="token comment">//打包后的文件存放的地方</span>
        filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token comment">//打包后输出文件的文件名</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span><span class="token comment">//本地服务器所加载的页面所在的目录</span>
        historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//不跳转</span>
        inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token comment">//实时刷新</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//.babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>到目前为止，我们已经知道了，对于模块，Webpack能提供非常强大的处理功能，那那些是模块呢。</p> <h2 id="一切皆模块"><a href="#一切皆模块" class="header-anchor">#</a> 一切皆模块</h2> <p>Webpack有一个不可不说的优点，它把所有的文件都都当做模块处理，JavaScript代码，CSS和fonts以及图片等等通过合适的loader都可以被处理。</p> <h3 id="css"><a href="#css" class="header-anchor">#</a> CSS</h3> <p>webpack提供两个工具处理样式表，<code>css-loader</code> 和 <code>style-loader</code>，二者处理的任务不同，<code>css-loader</code>使你能够使用类似 <code>@import</code> 和 <code>url(...)</code> 的方法实现 <code>require()</code> 的功能,<code>style-loader</code>将所有的计算后的样式加入页面中，二者组合在一起使你能够把样式表嵌入webpack打包后的JS文件中。</p> <p>继续上面的例子</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>//安装
<span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//使用</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

   <span class="token operator">...</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><blockquote><p>请注意这里对同一个文件引入多个loader的方法。</p></blockquote> <p>接下来，在app文件夹里创建一个名字为&quot;<code>main.css</code>&quot;的文件，对一些元素设置样式</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* main.css */</span>
<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">-ms-text-size-adjust</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">-webkit-text-size-adjust</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">*, *:before, *:after</span> <span class="token punctuation">{</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Helvetica Neue'</span><span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h1, h2, h3, h4, h5, h6, p, ul</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>我们这里例子中用到的<code>webpack</code>只有单一的入口，其它的模块需要通过 <code>import</code>, <code>require</code>, <code>url</code>等与入口文件建立其关联，为了让webpack能找到&quot;<code>main.css</code>&quot;文件，我们把它导入&quot;<code>main.js</code>&quot;中，如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//main.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Greeter <span class="token keyword">from</span> <span class="token string">'./Greeter'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'./main.css'</span><span class="token punctuation">;</span><span class="token comment">//使用require导入css文件</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Greeter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>通常情况下，css会和js打包到同一个文件中，并不会打包为一个单独的css文件，不过通过合适的配置webpack也可以把css打包为单独的文件的。</p></blockquote> <p>上面的代码说明webpack是怎么把css当做模块看待的，咱们继续看一个更加真实的css模块实践。</p> <h3 id="css-module"><a href="#css-module" class="header-anchor">#</a> CSS module</h3> <p>在过去的一些年里，JavaScript通过一些新的语言特性，更好的工具以及更好的实践方法（比如说模块化）发展得非常迅速。模块使得开发者把复杂的代码转化为小的，干净的，依赖声明明确的单元，配合优化工具，依赖管理和加载管理可以自动完成。</p> <p>不过前端的另外一部分，CSS发展就相对慢一些，大多的样式表却依旧巨大且充满了全局类名，维护和修改都非常困难。</p> <p>被称为<code>CSS modules</code>的技术意在把JS的模块化思想带入CSS中来，通过CSS模块，所有的类名，动画名默认都只作用于当前模块。Webpack对CSS模块化提供了非常好的支持，只需要在CSS loader中进行简单配置即可，然后就可以直接把CSS的类名传递到组件的代码中，这样做有效避免了全局污染。具体的代码如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token operator">...</span>

    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 指定启用css modules</span>
                            localIdentName<span class="token punctuation">:</span> <span class="token string">'[name]__[local]--[hash:base64:5]'</span> <span class="token comment">// 指定css的类名格式</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>我们在app文件夹下创建一个<code>Greeter.css</code>文件来进行一下测试</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* Greeter.css */</span>
<span class="token selector">.root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 3px solid #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>导入<code>.root</code>到<code>Greeter.js</code>中</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'./config.json'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./Greeter.css'</span><span class="token punctuation">;</span><span class="token comment">//导入</span>

<span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">//使用cssModule添加类名的方法</span>
        <span class="token punctuation">{</span>config<span class="token punctuation">.</span>greetText<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Greeter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>放心使用把，相同的类名也不会造成不同组件之间的污染。</p> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="zoom:100%;display:block;"></div> <p>CSS modules 也是一个很大的主题，有兴趣的话可以去其<a href="https://github.com/css-modules/css-modules" target="_self" rel="noopener noreferrer">官方文档</a>了解更多。</p> <h3 id="css预处理器"><a href="#css预处理器" class="header-anchor">#</a> CSS预处理器</h3> <p><code>Sass</code> 和 <code>Less</code> 之类的预处理器是对原生CSS的拓展，它们允许你使用类似于<code>variables</code>, <code>nesting</code>, <code>mixins</code>, <code>inheritance</code>等不存在于CSS中的特性来写CSS，CSS预处理器可以这些特殊类型的语句转化为浏览器可识别的CSS语句，</p> <p>你现在可能都已经熟悉了，在webpack里使用相关loaders进行配置就可以使用了，以下是常用的CSS 处理<code>loaders</code>:</p> <ul><li>Less Loader</li> <li>Sass Loader</li> <li>Stylus Loader</li></ul> <p>不过其实也存在一个CSS的处理平台-<code>PostCSS</code>，它可以帮助你的CSS实现更多的功能，在其<a href="https://github.com/postcss/postcss" target="_self" rel="noopener noreferrer">官方文档</a>可了解更多相关知识。</p> <p>举例来说如何使用<code>PostCSS</code>，我们使用<code>PostCSS</code>来为CSS代码自动添加适应不同浏览器的CSS前缀。</p> <p>首先安装postcss-loader 和 autoprefixer（自动添加前缀的插件）</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev postcss-loader autoprefixer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来，在webpack配置文件中添加<code>postcss-loader</code>，在根目录新建<code>postcss.config.js</code>,并添加如下代码之后，重新使用<code>npm start</code>打包时，你写的css会自动根据Can i use里的数据添加不同前缀了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;postcss-loader&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>至此，本文已经谈论了处理JS的Babel和处理CSS的PostCSS的基本用法，它们其实也是两个单独的平台，配合webpack可以很好的发挥它们的作用。接下来介绍Webpack中另一个非常重要的功能-Plugins</p> <h2 id="插件（plugins）"><a href="#插件（plugins）" class="header-anchor">#</a> 插件（Plugins）</h2> <p>插件（Plugins）是用来拓展Webpack功能的，它们会在整个构建过程中生效，执行相关的任务。
Loaders和Plugins常常被弄混，但是他们其实是完全不同的东西，可以这么来说，loaders是在打包构建过程中用来处理源文件的（JSX，Scss，Less..），一次处理一个，<strong>插件并不直接操作单个文件，它直接对整个构建过程起作用</strong>。</p> <p>Webpack有很多内置插件，同时也有很多第三方插件，可以让我们完成更加丰富的功能。</p> <h3 id="使用插件的方法"><a href="#使用插件的方法" class="header-anchor">#</a> 使用插件的方法</h3> <p>要使用某个插件，我们需要通过npm安装它，然后要做的就是在webpack配置中的<code>plugins</code>关键字部分添加该插件的一个实例（plugins是一个数组）继续上面的例子，我们添加了一个给打包后代码添加<a href="https://webpack.js.org/plugins/banner-plugin/" target="_self" rel="noopener noreferrer">版权声明的插件</a>。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>const webpack <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token punctuation">..</span>.
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test: /<span class="token punctuation">(</span><span class="token punctuation">\</span>.jsx<span class="token operator">|</span><span class="token punctuation">\</span>.js<span class="token punctuation">)</span>$/,
                use: <span class="token punctuation">{</span>
                    loader: <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span>,
                exclude: /node_modules/
            <span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>
                test: /<span class="token punctuation">\</span>.css$/,
                use: <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader: <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span>, <span class="token punctuation">{</span>
                        loader: <span class="token string">&quot;css-loader&quot;</span>,
                        options: <span class="token punctuation">{</span>
                            modules: <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>, <span class="token punctuation">{</span>
                        loader: <span class="token string">&quot;postcss-loader&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    plugins: <span class="token punctuation">[</span>
        new webpack.BannerPlugin<span class="token punctuation">(</span><span class="token string">'版权所有，翻版必究'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>,
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>通过这个插件，打包后的JS文件显示如下</p> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="zoom:100%;display:block;"></div> <p>这就是webpack插件的基础用法了，下面给大家推荐几个常用的插件</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>开放使用时，请参考最新的文档使用说明</p> <br></div> <h3 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" class="header-anchor">#</a> HtmlWebpackPlugin</h3> <p>这个插件的作用是依据一个简单的<code>index.html</code>模板，生成一个自动引用你打包后的JS文件的新<code>index.html</code>。这在每次生成的js文件名称不同时非常有用（比如添加了<code>hash</code>值）。</p> <h4 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个插件自动完成了我们之前手动做的一些事情，在正式使用之前需要对一直以来的项目结构做一些更改：</p> <ul><li>移除public文件夹，利用此插件，index.html文件会自动生成，此外CSS已经通过前面的操作打包到JS中了。</li> <li>在app目录下，创建一个index.tmpl.html文件模板，这个模板包含title等必须元素，在编译过程中，插件会依据此模板生成最终的html页面，会自动添加所依赖的 css, js，favicon等文件，index.tmpl.html中的模板源代码如下：</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack Sample Project<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>root<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>更新webpack的配置文件，方法同上,新建一个build文件夹用来存放最终的输出文件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span><span class="token comment">//已多次提及的唯一入口文件</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/build&quot;</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span><span class="token comment">//本地服务器所加载的页面所在的目录</span>
        historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//不跳转</span>
        inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token comment">//实时刷新</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;postcss-loader&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token string">'版权所有，翻版必究'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/index.tmpl.html&quot;</span><span class="token comment">//new 一个这个插件的实例，并传入相关的参数</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>再次执行npm start你会发现，build文件夹下面生成了<code>bundle.js</code>和<code>index.html</code>。</p> <h3 id="hot-module-replacement"><a href="#hot-module-replacement" class="header-anchor">#</a> Hot Module Replacement</h3> <p><code>Hot Module Replacement</code>（HMR）也是webpack里很有用的一个插件，它允许你在修改组件代码后，自动刷新实时预览修改后的效果。</p> <p>在webpack中实现HMR也很简单，只需要做两项配置</p> <ul><li>在webpack配置文件中添加HMR插件；</li> <li>在Webpack Dev Server中添加“hot”参数；</li></ul> <p>不过配置完这些后，JS模块其实还是不能自动热加载的，还需要在你的JS模块中执行一个Webpack提供的API才能实现热加载，虽然这个API不难使用，但是如果是React模块，使用我们已经熟悉的Babel可以更方便的实现功能热加载。</p> <p>整理下我们的思路，具体实现方法如下</p> <ul><li>Babel和webpack是独立的工具</li> <li>二者可以一起工作</li> <li>二者都可以通过插件拓展功能</li> <li>HMR是一个webpack插件，它让你能浏览器中实时观察模块修改后的效果，但是如果你想让它工作，需要对模块进行额外的配额；</li> <li>Babel有一个叫做<code>react-transform-hrm</code>的插件，可以在不对React模块进行额外的配置的前提下让HMR正常工作；</li></ul> <p>还是继续上例来实际看看如何配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span><span class="token comment">//已多次提及的唯一入口文件</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/build&quot;</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span><span class="token comment">//本地服务器所加载的页面所在的目录</span>
        historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//不跳转</span>
        inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;postcss-loader&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token string">'版权所有，翻版必究'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/index.tmpl.html&quot;</span><span class="token comment">//new 一个这个插件的实例，并传入相关的参数</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//热加载插件</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>安装<code>react-transform-hmr</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-plugin-react-transform react-transform-hmr
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置<code>Babel</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;env&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;development&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;react-transform&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
       <span class="token string">&quot;transforms&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
         <span class="token string">&quot;transform&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-transform-hmr&quot;</span><span class="token punctuation">,</span>
         
         <span class="token string">&quot;imports&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         
         <span class="token string">&quot;locals&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;module&quot;</span><span class="token punctuation">]</span>
       <span class="token punctuation">}</span><span class="token punctuation">]</span>
     <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>现在当你使用React时，可以热加载模块了,每次保存就能在浏览器上看到更新内容。</p> <h2 id="产品阶段的构建"><a href="#产品阶段的构建" class="header-anchor">#</a> 产品阶段的构建</h2> <p>目前为止，我们已经使用webpack构建了一个完整的开发环境。但是在产品阶段，可能还需要对打包的文件进行额外的处理，比如说优化，压缩，缓存以及分离CSS和JS。</p> <p>对于复杂的项目来说，需要复杂的配置，这时候分解配置文件为多个小的文件可以使得事情井井有条，以上面的例子来说，我们创建一个<code>webpack.production.config.js</code>的文件，在里面加上基本的配置,它和原始的<code>webpack.config.js</code>很像，如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.production.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">//已多次提及的唯一入口文件</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/build&quot;</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'null'</span><span class="token punctuation">,</span> <span class="token comment">//注意修改了这里，这能大大压缩我们的打包代码</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span> <span class="token comment">//本地服务器所加载的页面所在的目录</span>
        historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//不跳转</span>
        inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                fallback<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
                    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                        modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;postcss-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token string">'版权所有，翻版必究'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/index.tmpl.html&quot;</span> <span class="token comment">//new 一个这个插件的实例，并传入相关的参数</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//热加载插件</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NODE_ENV=production webpack --config ./webpack.production.config.js --progress&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^15.6.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^15.6.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>注意:如果是window电脑，build需要配置为&quot;build&quot;: &quot;set NODE_ENV=production &amp;&amp; webpack --config ./webpack.production.config.js --progress&quot;.。</p></blockquote> <h3 id="优化插件"><a href="#优化插件" class="header-anchor">#</a> 优化插件</h3> <p>webpack提供了一些在发布阶段非常有用的优化插件，它们大多来自于webpack社区，可以通过npm安装，通过以下插件可以完成产品发布阶段所需的功能</p> <ul><li><code>OccurenceOrderPlugin</code>：为组件分配ID，通过这个插件webpack可以分析和优先考虑使用最多的模块，并为它们分配最小的ID</li> <li><code>UglifyJsPlugin</code>：压缩JS代码；</li> <li><code>ExtractTextPlugin</code>：分离CSS和JS文件</li></ul> <p>我们继续用例子来看看如何添加它们，<code>OccurenceOrder</code> 和 <code>UglifyJS</code> plugins 都是内置插件，你需要做的只是安装其它非内置插件</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev extract-text-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在配置文件的plugins后引用它们</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.production.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/main.js&quot;</span><span class="token punctuation">,</span><span class="token comment">//已多次提及的唯一入口文件</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/build&quot;</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span><span class="token comment">//本地服务器所加载的页面所在的目录</span>
        historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//不跳转</span>
        inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/(\.jsx|\.js)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">&quot;postcss-loader&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token string">'版权所有，翻版必究'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/app/index.tmpl.html&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>OccurrenceOrderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">&quot;style.css&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>此时执行<code>npm run build</code>可以看见代码是被压缩后的.</p> <h3 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h3> <p>缓存无处不在，使用缓存的最好方法是保证你的文件名和文件内容是匹配的（内容改变，名称相应改变）</p> <p>webpack可以把一个哈希值添加到打包的文件名中，使用方法如下,添加特殊的字符串混合体（[name], [id] and [hash]）到输出文件名前</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/build&quot;</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle-[hash].js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>现在用户会有合理的缓存了。（<em>因为内容如果不便，hash值就不会变</em>）</p> <h3 id="去除build文件中的残余文件"><a href="#去除build文件中的残余文件" class="header-anchor">#</a> 去除build文件中的残余文件</h3> <p>添加了hash之后，会导致改变文件内容后重新打包时，文件名不同而内容越来越多，因此这里介绍另外一个很好用的插件<code>clean-webpack-plugin</code>。</p> <p><strong>安装</strong>：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>cnpm <span class="token function">install</span> clean-webpack-plugin --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>使用</strong>：</p> <p>引入<code>clean-webpack-plugin</code>插件后在配置文件的<code>plugins</code>中做相应配置即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token comment">// 这里是之前配置的其它各种插件</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token string">'build/*.*'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      root<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
      verbose<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      dry<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>关于clean-webpack-plugin的详细使用可参考<a href="https://github.com/johnagan/clean-webpack-plugin" target="_self" rel="noopener noreferrer">这里</a></p> <br> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <div class="custom-block danger"><p class="custom-block-title">再次提醒</p> <p>此为帮助理解webpack的基本概念，但具体使用时，请参考官方的最新用法</p> <br></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Frontend/Webpack/" class="prev router-link-active">Webpack</a></span> <span class="next"><a href="/Frontend/React/">React</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2ba1140b.js" defer></script><script src="/assets/js/2.858e58ff.js" defer></script><script src="/assets/js/34.6db47b26.js" defer></script>
  </body>
</html>
