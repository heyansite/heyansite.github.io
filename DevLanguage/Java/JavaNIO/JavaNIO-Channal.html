<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaNIO - Channal | Yan&#39;s Blog Home</title>
    <meta name="description" content="Personal blog site">
    
    
    <link rel="preload" href="/assets/css/0.styles.659f981c.css" as="style"><link rel="preload" href="/assets/js/app.2ba1140b.js" as="script"><link rel="preload" href="/assets/js/2.858e58ff.js" as="script"><link rel="preload" href="/assets/js/32.c204bc79.js" as="script"><link rel="prefetch" href="/assets/js/10.5dcc1f52.js"><link rel="prefetch" href="/assets/js/100.0327e00b.js"><link rel="prefetch" href="/assets/js/101.404f187c.js"><link rel="prefetch" href="/assets/js/102.d78878ec.js"><link rel="prefetch" href="/assets/js/103.a682f6f1.js"><link rel="prefetch" href="/assets/js/104.d831bcb5.js"><link rel="prefetch" href="/assets/js/105.afbf1884.js"><link rel="prefetch" href="/assets/js/106.8e9709d3.js"><link rel="prefetch" href="/assets/js/107.9712aa22.js"><link rel="prefetch" href="/assets/js/108.4158fdb6.js"><link rel="prefetch" href="/assets/js/109.ae61a303.js"><link rel="prefetch" href="/assets/js/11.34e3d90e.js"><link rel="prefetch" href="/assets/js/110.0abce6c9.js"><link rel="prefetch" href="/assets/js/111.b5c958e5.js"><link rel="prefetch" href="/assets/js/112.fdacfaf6.js"><link rel="prefetch" href="/assets/js/113.9d95243d.js"><link rel="prefetch" href="/assets/js/114.f759f9b9.js"><link rel="prefetch" href="/assets/js/115.1b1f9f3d.js"><link rel="prefetch" href="/assets/js/116.1e5e62e4.js"><link rel="prefetch" href="/assets/js/117.952db9d4.js"><link rel="prefetch" href="/assets/js/118.ed9df468.js"><link rel="prefetch" href="/assets/js/119.f19ee9e0.js"><link rel="prefetch" href="/assets/js/12.cd237cda.js"><link rel="prefetch" href="/assets/js/120.24dbecef.js"><link rel="prefetch" href="/assets/js/121.0aa2d47c.js"><link rel="prefetch" href="/assets/js/122.5205ca42.js"><link rel="prefetch" href="/assets/js/123.25aa20a6.js"><link rel="prefetch" href="/assets/js/124.420b2a92.js"><link rel="prefetch" href="/assets/js/125.091331f4.js"><link rel="prefetch" href="/assets/js/126.471b335f.js"><link rel="prefetch" href="/assets/js/127.60ffdb36.js"><link rel="prefetch" href="/assets/js/128.9c5c36ef.js"><link rel="prefetch" href="/assets/js/129.36fd802b.js"><link rel="prefetch" href="/assets/js/13.de2ffe9f.js"><link rel="prefetch" href="/assets/js/130.822de8a4.js"><link rel="prefetch" href="/assets/js/131.697750e2.js"><link rel="prefetch" href="/assets/js/132.fd5faa78.js"><link rel="prefetch" href="/assets/js/133.cf327ef4.js"><link rel="prefetch" href="/assets/js/134.6cdb8690.js"><link rel="prefetch" href="/assets/js/135.906c8800.js"><link rel="prefetch" href="/assets/js/136.43585d13.js"><link rel="prefetch" href="/assets/js/137.3c7ddb41.js"><link rel="prefetch" href="/assets/js/138.e3274ead.js"><link rel="prefetch" href="/assets/js/139.7fa38b58.js"><link rel="prefetch" href="/assets/js/14.9d6406e7.js"><link rel="prefetch" href="/assets/js/140.1b026dad.js"><link rel="prefetch" href="/assets/js/141.c1adfec5.js"><link rel="prefetch" href="/assets/js/142.ed2a4a22.js"><link rel="prefetch" href="/assets/js/143.af96e2f9.js"><link rel="prefetch" href="/assets/js/144.923a7d38.js"><link rel="prefetch" href="/assets/js/145.d88163de.js"><link rel="prefetch" href="/assets/js/146.2134dd3e.js"><link rel="prefetch" href="/assets/js/147.9925c468.js"><link rel="prefetch" href="/assets/js/148.109297cc.js"><link rel="prefetch" href="/assets/js/149.ae529d47.js"><link rel="prefetch" href="/assets/js/15.fe3428fa.js"><link rel="prefetch" href="/assets/js/150.6bf9657f.js"><link rel="prefetch" href="/assets/js/151.603cf1f9.js"><link rel="prefetch" href="/assets/js/152.b64ef399.js"><link rel="prefetch" href="/assets/js/153.fd5cde7c.js"><link rel="prefetch" href="/assets/js/154.8cedd5d3.js"><link rel="prefetch" href="/assets/js/155.042308eb.js"><link rel="prefetch" href="/assets/js/156.1f58dd5a.js"><link rel="prefetch" href="/assets/js/157.69e07481.js"><link rel="prefetch" href="/assets/js/158.40b656df.js"><link rel="prefetch" href="/assets/js/159.823c56a4.js"><link rel="prefetch" href="/assets/js/16.7976352c.js"><link rel="prefetch" href="/assets/js/160.93aba24e.js"><link rel="prefetch" href="/assets/js/161.3ae7729a.js"><link rel="prefetch" href="/assets/js/162.8092cc22.js"><link rel="prefetch" href="/assets/js/163.3c82e51b.js"><link rel="prefetch" href="/assets/js/164.d358ee7b.js"><link rel="prefetch" href="/assets/js/165.60d778eb.js"><link rel="prefetch" href="/assets/js/166.54d7340a.js"><link rel="prefetch" href="/assets/js/167.5fd6aaa3.js"><link rel="prefetch" href="/assets/js/168.205929f8.js"><link rel="prefetch" href="/assets/js/169.873b90b1.js"><link rel="prefetch" href="/assets/js/17.72e8ffa6.js"><link rel="prefetch" href="/assets/js/170.68c49359.js"><link rel="prefetch" href="/assets/js/171.d8f93304.js"><link rel="prefetch" href="/assets/js/172.6b496cc7.js"><link rel="prefetch" href="/assets/js/173.f276a0ce.js"><link rel="prefetch" href="/assets/js/174.09cb41e2.js"><link rel="prefetch" href="/assets/js/175.c77ce8d9.js"><link rel="prefetch" href="/assets/js/176.01ab9f3f.js"><link rel="prefetch" href="/assets/js/177.2f91a2a4.js"><link rel="prefetch" href="/assets/js/178.5f0a0527.js"><link rel="prefetch" href="/assets/js/179.0d14e948.js"><link rel="prefetch" href="/assets/js/18.8264b169.js"><link rel="prefetch" href="/assets/js/180.9a15f295.js"><link rel="prefetch" href="/assets/js/181.d5bcbada.js"><link rel="prefetch" href="/assets/js/182.571b87a8.js"><link rel="prefetch" href="/assets/js/183.b87f5a38.js"><link rel="prefetch" href="/assets/js/184.90ecbd35.js"><link rel="prefetch" href="/assets/js/185.3a38f733.js"><link rel="prefetch" href="/assets/js/186.881a0fab.js"><link rel="prefetch" href="/assets/js/187.17663dea.js"><link rel="prefetch" href="/assets/js/188.471fcd9b.js"><link rel="prefetch" href="/assets/js/189.6d486653.js"><link rel="prefetch" href="/assets/js/19.e6227b20.js"><link rel="prefetch" href="/assets/js/190.357b4cc8.js"><link rel="prefetch" href="/assets/js/191.ccf9ae83.js"><link rel="prefetch" href="/assets/js/192.3ee45cf5.js"><link rel="prefetch" href="/assets/js/193.2fbcbc68.js"><link rel="prefetch" href="/assets/js/194.61d0acd9.js"><link rel="prefetch" href="/assets/js/195.33b772c3.js"><link rel="prefetch" href="/assets/js/196.7d35848a.js"><link rel="prefetch" href="/assets/js/197.4b958d27.js"><link rel="prefetch" href="/assets/js/198.dfbfba98.js"><link rel="prefetch" href="/assets/js/199.f6c7aacb.js"><link rel="prefetch" href="/assets/js/20.65ad9b00.js"><link rel="prefetch" href="/assets/js/200.6a05302e.js"><link rel="prefetch" href="/assets/js/201.be446c97.js"><link rel="prefetch" href="/assets/js/202.d058ca1d.js"><link rel="prefetch" href="/assets/js/203.ef2b609c.js"><link rel="prefetch" href="/assets/js/204.dab38ee5.js"><link rel="prefetch" href="/assets/js/21.300f7dfb.js"><link rel="prefetch" href="/assets/js/22.0ed457bc.js"><link rel="prefetch" href="/assets/js/23.9cf0f43d.js"><link rel="prefetch" href="/assets/js/24.f151ffcb.js"><link rel="prefetch" href="/assets/js/25.680a763b.js"><link rel="prefetch" href="/assets/js/26.6a5f804d.js"><link rel="prefetch" href="/assets/js/27.98408441.js"><link rel="prefetch" href="/assets/js/28.acbefbd1.js"><link rel="prefetch" href="/assets/js/29.fbd2340a.js"><link rel="prefetch" href="/assets/js/3.753236a7.js"><link rel="prefetch" href="/assets/js/30.30b44255.js"><link rel="prefetch" href="/assets/js/31.510d262b.js"><link rel="prefetch" href="/assets/js/33.5fa66039.js"><link rel="prefetch" href="/assets/js/34.6db47b26.js"><link rel="prefetch" href="/assets/js/35.fcb88dd5.js"><link rel="prefetch" href="/assets/js/36.e294e99d.js"><link rel="prefetch" href="/assets/js/37.fe541556.js"><link rel="prefetch" href="/assets/js/38.94af8189.js"><link rel="prefetch" href="/assets/js/39.e7017f9b.js"><link rel="prefetch" href="/assets/js/4.1c3159e6.js"><link rel="prefetch" href="/assets/js/40.b7a1deeb.js"><link rel="prefetch" href="/assets/js/41.ae4d7d1e.js"><link rel="prefetch" href="/assets/js/42.5dc5c7f6.js"><link rel="prefetch" href="/assets/js/43.73610732.js"><link rel="prefetch" href="/assets/js/44.2b0e19f3.js"><link rel="prefetch" href="/assets/js/45.903efdc0.js"><link rel="prefetch" href="/assets/js/46.0684656f.js"><link rel="prefetch" href="/assets/js/47.6425b35e.js"><link rel="prefetch" href="/assets/js/48.43663ba9.js"><link rel="prefetch" href="/assets/js/49.34841bc0.js"><link rel="prefetch" href="/assets/js/5.d3774f5f.js"><link rel="prefetch" href="/assets/js/50.48ce1d7e.js"><link rel="prefetch" href="/assets/js/51.1820aa29.js"><link rel="prefetch" href="/assets/js/52.5317c537.js"><link rel="prefetch" href="/assets/js/53.71b86df9.js"><link rel="prefetch" href="/assets/js/54.31ed2a5e.js"><link rel="prefetch" href="/assets/js/55.4f9933ab.js"><link rel="prefetch" href="/assets/js/56.beb74e07.js"><link rel="prefetch" href="/assets/js/57.705bc19e.js"><link rel="prefetch" href="/assets/js/58.f5fd656b.js"><link rel="prefetch" href="/assets/js/59.cc8ae217.js"><link rel="prefetch" href="/assets/js/6.f082ca37.js"><link rel="prefetch" href="/assets/js/60.fc3cf484.js"><link rel="prefetch" href="/assets/js/61.b5032b43.js"><link rel="prefetch" href="/assets/js/62.64d7637a.js"><link rel="prefetch" href="/assets/js/63.2a71075b.js"><link rel="prefetch" href="/assets/js/64.21eb4820.js"><link rel="prefetch" href="/assets/js/65.11535a8c.js"><link rel="prefetch" href="/assets/js/66.d9c62638.js"><link rel="prefetch" href="/assets/js/67.5782c958.js"><link rel="prefetch" href="/assets/js/68.35886dae.js"><link rel="prefetch" href="/assets/js/69.934aa057.js"><link rel="prefetch" href="/assets/js/7.9a79fd87.js"><link rel="prefetch" href="/assets/js/70.53c7c7a2.js"><link rel="prefetch" href="/assets/js/71.0e82b1c6.js"><link rel="prefetch" href="/assets/js/72.1da0eaf9.js"><link rel="prefetch" href="/assets/js/73.3dabc9cd.js"><link rel="prefetch" href="/assets/js/74.b2ae43f6.js"><link rel="prefetch" href="/assets/js/75.55bf2044.js"><link rel="prefetch" href="/assets/js/76.2f88e50b.js"><link rel="prefetch" href="/assets/js/77.d916e87e.js"><link rel="prefetch" href="/assets/js/78.0e80a77d.js"><link rel="prefetch" href="/assets/js/79.03bce65e.js"><link rel="prefetch" href="/assets/js/8.60d5a8a9.js"><link rel="prefetch" href="/assets/js/80.96678f59.js"><link rel="prefetch" href="/assets/js/81.75ffa4d3.js"><link rel="prefetch" href="/assets/js/82.41c1aeb7.js"><link rel="prefetch" href="/assets/js/83.16d5e455.js"><link rel="prefetch" href="/assets/js/84.195ca01f.js"><link rel="prefetch" href="/assets/js/85.d850d4dd.js"><link rel="prefetch" href="/assets/js/86.32d87d56.js"><link rel="prefetch" href="/assets/js/87.5f97a4f6.js"><link rel="prefetch" href="/assets/js/88.f5b0bbdb.js"><link rel="prefetch" href="/assets/js/89.9f9150f5.js"><link rel="prefetch" href="/assets/js/9.74db15a0.js"><link rel="prefetch" href="/assets/js/90.f69286ce.js"><link rel="prefetch" href="/assets/js/91.c9995055.js"><link rel="prefetch" href="/assets/js/92.e992da4f.js"><link rel="prefetch" href="/assets/js/93.14137340.js"><link rel="prefetch" href="/assets/js/94.c8228a63.js"><link rel="prefetch" href="/assets/js/95.bbb7ce03.js"><link rel="prefetch" href="/assets/js/96.ce87793d.js"><link rel="prefetch" href="/assets/js/97.4fdd8a0b.js"><link rel="prefetch" href="/assets/js/98.74cfc635.js"><link rel="prefetch" href="/assets/js/99.abdd1b46.js">
    <link rel="stylesheet" href="/assets/css/0.styles.659f981c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yan's Blog Home</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java Basic</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java NIO</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DevLanguage/Java/JavaNIO/" class="sidebar-link">JavaNIO</a></li><li><a href="/DevLanguage/Java/JavaNIO/ZeroCopy.html" class="sidebar-link">Zero Copy</a></li><li><a href="/DevLanguage/Java/JavaNIO/Java网络编程.html" class="sidebar-link">Java网络编程</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaBIO.html" class="sidebar-link">JavaBIO 模型</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaNIO-概述.html" class="sidebar-link">JavaNIO - 概述</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Buffer.html" class="sidebar-link">JavaNIO - Buffer</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html" class="active sidebar-link">JavaNIO - Channal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#filechannel的使用" class="sidebar-link">FileChannel的使用</a></li><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#socketchannel和serversocketchannel的使用" class="sidebar-link">SocketChannel和ServerSocketChannel的使用</a></li><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#datagramchannel的使用" class="sidebar-link">DatagramChannel的使用</a></li><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#scatter-gather" class="sidebar-link">Scatter / Gather</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#scattering-reads" class="sidebar-link">Scattering Reads</a></li><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#gathering-writes" class="sidebar-link">Gathering Writes</a></li></ul></li><li class="sidebar-sub-header"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Channal.html#通道之间的数据传输" class="sidebar-link">通道之间的数据传输</a></li></ul></li><li><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Selector.html" class="sidebar-link">JavaNIO - Selector</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Path&amp;Files.html" class="sidebar-link">JavaNIO - Path &amp; Files</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Samples.html" class="sidebar-link">JavaNIO - Samples</a></li><li><a href="/DevLanguage/Java/JavaNIO/NIO vs IO.html" class="sidebar-link">NIO vs IO</a></li><li><a href="/DevLanguage/Java/JavaNIO/IOTheory.html" class="sidebar-link">IO概念-同步、异步、阻塞、非阻塞</a></li><li><a href="/DevLanguage/Java/JavaNIO/IOModelAndThreadModel.html" class="sidebar-link">高性能网络编程中的IO模型与线程模型</a></li><li><a href="/DevLanguage/Java/JavaNIO/JavaAIO.html" class="sidebar-link">JavaAIO</a></li><li><a href="/DevLanguage/Java/JavaNIO/Netty.html" class="sidebar-link">NIO框架-Netty</a></li><li><a href="/DevLanguage/Java/JavaNIO/Mina.html" class="sidebar-link">NIO框架-Mina</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java 并发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java 常用框架</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/index/" class="sidebar-link">&lt; 首页</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javanio-channal"><a href="#javanio-channal" class="header-anchor">#</a> JavaNIO - Channal</h1> <div class="custom-block tip"><p class="custom-block-title">此文为转载 （通常一篇文章会参考多处，也会添加自己的理解，引用地址如有遗漏，请指出）</p> <ul><li>https://www.cnblogs.com/snailclimb/p/9086335.html</li></ul></div> <br> <p>在Java NIO中，通道是在实体和字节缓冲区之间有效传输数据的媒介。 它从一个实体读取数据，并将其放在缓冲区块中以供消费。通道作为Java NIO提供的网关来访问I/O机制。通常，通道与操作系统文件描述符具有一对一关系，用于提供平台独立操作功能。</p> <ul><li>通道可以读也可以写，流一般来说是单向的（只能读或者写）。</li> <li>通道可以异步读写。</li> <li>通道总是基于缓冲区Buffer来读写。</li></ul> <p>正如上面提到的，我们可以从通道中读取数据，写入到buffer；也可以中buffer内读数据，写入到通道中。</p> <p><strong>Channel的实现类有：</strong></p> <ul><li>FileChannel</li> <li>DatagramChannel</li> <li>SocketChannel</li> <li>ServerSocketChannel</li></ul> <p>还有一些异步IO类。<br><strong>FileChannel</strong>用于文件的数据读写。 <strong>DatagramChannel</strong>用于UDP的数据读写。 <strong>SocketChannel</strong>用于TCP的数据读写。 <strong>ServerSocketChannel</strong>允许我们监听TCP链接请求，每个请求会创建会一个SocketChannel。</p> <p><strong>类层次结构</strong></p> <div style="display:flex;"><img src="/assets/img/nio-channal-1.57cac934.jpg" alt="" align="left" style="display:block;"></div> <br> <h2 id="filechannel的使用"><a href="#filechannel的使用" class="header-anchor">#</a> <strong>FileChannel的使用</strong></h2> <p>使用FileChannel读取数据到Buffer（缓冲区）以及利用Buffer（缓冲区）写入数据到FileChannel：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> filechannel<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">RandomAccessFile</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio</span><span class="token punctuation">.</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels</span><span class="token punctuation">.</span><span class="token class-name">FileChannel</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileChannelTxt</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.创建一个RandomAccessFile（随机访问文件）对象，</span>
        <span class="token class-name">RandomAccessFile</span> raf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\niodata.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过RandomAccessFile对象的getChannel()方法。FileChannel是抽象类。</span>
        <span class="token class-name">FileChannel</span> inChannel<span class="token operator">=</span>raf<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.创建一个读数据缓冲区对象</span>
        <span class="token class-name">ByteBuffer</span> buf<span class="token operator">=</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.从通道中读取数据</span>
        <span class="token keyword">int</span> bytesRead <span class="token operator">=</span> inChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//创建一个写数据缓冲区对象</span>
        <span class="token class-name">ByteBuffer</span> buf2<span class="token operator">=</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//写入数据</span>
        buf2<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;filechannel test&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        buf2<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>bytesRead <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Read &quot;</span> <span class="token operator">+</span> bytesRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//Buffer有两种模式，写模式和读模式。在写模式下调用flip()之后，Buffer从写模式变成读模式。</span>
            buf<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">//如果还有未读内容</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>buf<span class="token punctuation">.</span><span class="token function">hasRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> buf<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//清空缓存区</span>
            buf<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bytesRead <span class="token operator">=</span> inChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//关闭RandomAccessFile（随机访问文件）对象</span>
        raf<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>运行效果：</p> <div style="display:flex;"><img src="/assets/img/nio-channal-2.9f94b674.jpg" alt="" align="left" style="display:block;"></div> <p>通过上述实例代码，我们可以大概总结出FileChannel的一般使用规则：</p> <p><strong>1. 开启FileChannel</strong></p> <p><strong>使用之前，FileChannel必须被打开</strong> ，但是你无法直接打开FileChannel（FileChannel是抽象类）。需要通过 <strong>InputStream</strong> ， <strong>OutputStream</strong> 或 <strong>RandomAccessFile</strong> 获取FileChannel。<br>我们上面的例子是通过RandomAccessFile打开FileChannel的：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token comment">//1.创建一个RandomAccessFile（随机访问文件）对象，</span>
        <span class="token class-name">RandomAccessFile</span> raf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\niodata.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过RandomAccessFile对象的getChannel()方法。FileChannel是抽象类。</span>
        <span class="token class-name">FileChannel</span> inChannel<span class="token operator">=</span>raf<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>2. 从FileChannel读取数据/写入数据</strong></p> <p>从FileChannel中读取数据/写入数据之前首先要创建一个Buffer（缓冲区）对象，Buffer（缓冲区）对象的使用我们在上一篇文章中已经详细说明了，如果不了解的话可以看我的上一篇关于Buffer的文章。<br>使用FileChannel的read()方法读取数据：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token comment">//2.创建一个读数据缓冲区对象</span>
        <span class="token class-name">ByteBuffer</span> buf<span class="token operator">=</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.从通道中读取数据</span>
        <span class="token keyword">int</span> bytesRead <span class="token operator">=</span> inChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用FileChannel的write()方法写入数据：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token comment">//创建一个写数据缓冲区对象</span>
        <span class="token class-name">ByteBuffer</span> buf2<span class="token operator">=</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//写入数据</span>
        buf2<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;filechannel test&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        buf2<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3. 关闭FileChannel</strong></p> <p>完成使用后，FileChannel您必须关闭它。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>		channel<span class="token punctuation">.</span>close（）<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="socketchannel和serversocketchannel的使用"><a href="#socketchannel和serversocketchannel的使用" class="header-anchor">#</a> <strong>SocketChannel和ServerSocketChannel的使用</strong></h2> <p><strong>利用SocketChannel和ServerSocketChannel实现客户端与服务器端简单通信：</strong><br><strong>SocketChannel</strong> 用于创建基于tcp协议的客户端对象，因为SocketChannel中不存在accept()方法，所以，它不能成为一个服务端程序。通过<strong>connect()方法</strong>,SocketChannel对象可以连接到其他tcp服务器程序。<br>客户端:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> socketchannel<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net</span><span class="token punctuation">.</span><span class="token class-name">InetSocketAddress</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio</span><span class="token punctuation">.</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels</span><span class="token punctuation">.</span><span class="token class-name">SocketChannel</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebClient</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.通过SocketChannel的open()方法创建一个SocketChannel对象</span>
        <span class="token class-name">SocketChannel</span> socketChannel <span class="token operator">=</span> <span class="token class-name">SocketChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.连接到远程服务器（连接此通道的socket）</span>
        socketChannel<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3.创建写数据缓存区对象</span>
        <span class="token class-name">ByteBuffer</span> writeBuffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writeBuffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;hello WebServer this is from WebClient&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writeBuffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        socketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>writeBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//创建读数据缓存区对象</span>
        <span class="token class-name">ByteBuffer</span> readBuffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        socketChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>readBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//String 字符串常量，不可变；StringBuffer 字符串变量（线程安全），可变；StringBuilder 字符串变量（非线程安全），可变</span>
        <span class="token class-name">StringBuilder</span> stringBuffer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.将Buffer从写模式变为可读模式</span>
        readBuffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>readBuffer<span class="token punctuation">.</span><span class="token function">hasRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stringBuffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> readBuffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从服务端接收到的数据：&quot;</span><span class="token operator">+</span>stringBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        socketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>ServerSocketChannel</strong> 允许我们监听TCP链接请求，通过ServerSocketChannelImpl的 <strong>accept()方法</strong> 可以创建一个SocketChannel对象用户从客户端读/写数据。<br>服务端：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> socketchannel<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net</span><span class="token punctuation">.</span><span class="token class-name">InetSocketAddress</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio</span><span class="token punctuation">.</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels</span><span class="token punctuation">.</span><span class="token class-name">ServerSocketChannel</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels</span><span class="token punctuation">.</span><span class="token class-name">SocketChannel</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebServer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//1.通过ServerSocketChannel 的open()方法创建一个ServerSocketChannel对象，open方法的作用：打开套接字通道</span>
            <span class="token class-name">ServerSocketChannel</span> ssc <span class="token operator">=</span> <span class="token class-name">ServerSocketChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2.通过ServerSocketChannel绑定ip地址和port(端口号)</span>
            ssc<span class="token punctuation">.</span><span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//通过ServerSocketChannelImpl的accept()方法创建一个SocketChannel对象用户从客户端读/写数据</span>
            <span class="token class-name">SocketChannel</span> socketChannel <span class="token operator">=</span> ssc<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//3.创建写数据的缓存区对象</span>
            <span class="token class-name">ByteBuffer</span> writeBuffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            writeBuffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;hello WebClient this is from WebServer&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            writeBuffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            socketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>writeBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//创建读数据的缓存区对象</span>
            <span class="token class-name">ByteBuffer</span> readBuffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//读取缓存区数据</span>
            socketChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>readBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">StringBuilder</span> stringBuffer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4.将Buffer从写模式变为可读模式</span>
            readBuffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>readBuffer<span class="token punctuation">.</span><span class="token function">hasRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stringBuffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> readBuffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从客户端接收到的数据：&quot;</span><span class="token operator">+</span>stringBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            socketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ssc<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>运行效果：<br>客户端：</p> <div style="display:flex;"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+EAjEV4aWYAAE1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBKAADAAAAAQACAACHaQAEAAAAAQAAAFoAAAAAAAAASAAAAAEAAABIAAAAAQADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAGWoAMABAAAAAEAAABaAAAAAP/bAEMACgcHCAcGCggICAsKCgsOGBAODQ0OHRUWERgjHyUkIh8iISYrNy8mKTQpISIwQTE0OTs+Pj4lLkRJQzxINz0+O//bAEMBCgsLDg0OHBAQHDsoIig7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O//AABEIAFoBlgMBEQACEQEDEQH/xAAaAAEAAwEBAQAAAAAAAAAAAAAAAgMEAQUG/8QAOxAAAQQBAgQFAwIEAwgDAAAAAQACAxEEEiEFEzFhIkFRUpEUMnEVgSOhsdEGNcEzQ0RidZK04ZPw8f/EABkBAQEBAQEBAAAAAAAAAAAAAAABAgMEBf/EACsRAQEBAQABAwEHAwUAAAAAAAABEQIhAxIxUQQiQWFxgaETkdEUMsHh8P/aAAwDAQACEQMRAD8A+6+sjEbHucAHuDQfKz5LtkjnLquHimJO1ro5mkODS0na7uuv4KeM08kfFMabl8t4eZd2hos+V3XTqEyHlMZ+OXNaJ4i532gPFn8JkPJ9dj2BzorJAA1jcnomQ8vO41NIJ8cRzSxgseSI3lt7t9FrnmJbXmHInH/F5H/zv/utez8mfdnzVsX1U98vJyXVX+/d5mh5+pT28/RZ1as5GfrDOdlWTV899DfTvvtupnJtBDnWQ6fJZRDfHkObZ9BZ3TOTyi6PNa4gT5bqNEtleRaScm0ezNijEkkuYxurTbpnjerrqmcm173Cjr4bC55c91G3OcSTufNSyLLW0OIHV3/cVMi7TWfV3/cUyG0JsUbI7kpkNc27/JTIabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNpt3+SmQ2m3f5KZDabd/kpkNrxsnH+rxZcebWGy9SwlpHcHyKWypJZGf9JxeZr0PvmGSibG4AqiNhsFnwoOFw6AwulcBp6kXTegsDb8jfc7q7PgcbwjGZA+FoeA5gZqaQ0ijYIIHXup4E4uG40GQJo2Frg8uAobWCK6XW6bBTxQSPngLY3uAY69LSa3b6LfNn1SssfOjJLYX7+sTv7LpOpHO86lBJkY8heyF9lpbvE6t1m3m/i1NjSOJZwuoniy07ROHT+/mp936rtQfmZEgAdi21htg5T/AAH1H/u0+79TzUxxLODdIieAHBwqN4Uzn6m1Q+XIkhZE6F9Mqjy3XsK/0C1vO7p5e1wyQR8Oha86XAGw4EEblZtmrGvns94U2Bz2e8JsDns94TYHPZ7wmwOcz3BNinOZ7k2GHOZ7k2GK5M6CJ+l7zYaXmgTQHmfRZvfMuO3p+h33Nn1z92ePi8DonyOdYFlojBcXN8tut9lierM2u/f2Pudzjn998Zf1+P3aX5kMcQke/S00NwR16Lpe+ZNrzc+l3317eZt8/wAKhxGNvNMttYw+F2l24+Nln+pJuuv+m669s482/hs+f7rn5IaW14gTTq8h6q9dyOfp+le5c/8Afko/ULcCGeD+Jqdvtp/usf1Zv9/4eifY+s/P7v8AP+GhmQx7GuutQBpdZZZrx9c3nqz6O85nuTYmHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GHOZ7k2GPpVwdHkQ8Tll4jJjSwBjea+OORsl6i0A7ihWx79CsVixa7OGjHlYHcqWTQ4vBaW3YBo9wB+6iI5GbNBnwwcuPkyMc90rpCC0Nq9q7jz9UB3F8BmO3IdlNEbnFgdR6gEkdPQJhi1udjyT/TRztM+jUGG+lX/AKj5QUu4hL+juzo4mukZGXOjc8gAt+4XR6UUGZvGcoSyRy4kbSDoaWTkgv5esA+EUCNr9VcUweNSZvDY+I8ljceSRoa4SFxLDsXdBVE/ATDGpnEozxGXBkcI5WOAYC77wW3fbz27Ijn6xiNjMkuQ1jTM6JpN25wF1VXfXZMFkWaJcpsbXNdHLCJYntN6hdH+rflQRPE8dhyDJKGNgeGOO92RdVX9EMSPEsQTxwfUDmShrmAAnUDdG+9FBPHzIMsP+nmEmg06vIoLrPqUQs+pQXRfYt8/Dpz8JKqIMHFZGsgt+PJOwEXG0AB5JoAk+V+S593x8PX9m5t68dSX6/T6vNAyeH5bMmTDfnTSXHCxulphFai1pOxHh6kg7fgDn55u5r2b6frcXide2Tzfm7+G3P1+JsejxJpycXHhc1zJJZ4zpvcaXBx+A0rp35kjx/Z77O+up5kl/mZ/yuyMI5GPJC7JlAkbpP2/2WrzszXP0/WnHU6nM8fr/ln4mS+eKBr3HW0h8bAS4tLm77dOh37rPfzjt9mmc3q/h8X88v8A0xR5WTJkXzHNaS9ugucap7xZo9aZ+N1iW2vT16fE5+Pp58fjJ+X5vYwC53D8dzj4nRNJ3J3I77rrz/tj53ryT1epPrV605CAgICAgICAgICAgICAgICAgICAgICAg6g8yHhLYc6TL5ssjnvc5rXkaWF1XQAHkAN7WbKzZU5uHvl4e/FMz3OLdpX0XA3YP7GvhTKmVW/huRPlmWeZpjETo2Njbpc3UBqJdfbbp1TKZVcP+H4IcI4hdK+MzNm3cAQ4V6AbGt/Wz6q5TKs/Rmfqv6lzJebRGnUNNVVdLrYbX1UymVCfheU/HyYIMhkceS9xcHR6tLXNpwG43uzfdMplDwJjsiWYzznmbhupulh0aNQ266fW+quUyu4/BGY2FkYYllkjnBBDy3w22tqA9L/KmUyux8IP1LMmWaR8g0uc0EBjntbpDq6+vmrlMqLeClsgkOZkuIyDkbln3aS2vt6UUymVOHhJx4cKOKVx+kNBz6Je0ggg1Xb4UymVU/gkmVDO3Mn1Ome1zjC3SKaKAo3fe1cplXw8JjhdiuBkc7EiMUZc7qDXX1O38yplMqPDuDR8NdM6KSV/OILuY4Hpe/Trv1KZTK1DHeJzLreQWhvLsaRv1/KZTKr+ik+nEX1E1hwdzNQ1He66dPL8JlMrXGCG7rUanwmqogqngjyYjFKNTCQSLrobH9FLJfFb4764693Pyj9Hj82OURgPjJLSCdiQR/Qqe2fLX9bv23nfFT5TDNzSLeG6QT5Dz/8AvZXPOse6+32/gsVZEGV3DsV2PJAYyGyatRa4h3iJJpw3G5PT1WfbMx3nr+pOp1vxn6ePHx+zRHG2KNsbBTWANA7BWTHHrq9W2pKoICAgICAgICAgICAgICAgICAgICAgICAg87Oy3QuywJdOjHDm9nW4X/RBn4znz4skYgmDNUZcBbfEdTR0Is7HypBEcQldwqeRmVJbjUcskNFg0g2dgL38/XzqkEsfiT8jElH1TOY5wDHtjtsbXUASQaJ3vy69NkFUHFsl/E48d8kILmtcWFzWmi2/tux5n1pBQeOTNezXOweOQeB7C0gPIslxaaA6Hp3NoNr+ITOmmayRg5b2B3iADBrd93WrAAQVz8QyxJjFzZojMxp5UT4jZNmhrANgD03NBB2TiWRyhI2QM1SXXLc+gIw6qG+58/yg6eJZUWM+SR0TbZzAJDpEW7di7cEU7qAgjhZ+bIcbmPiOpvi31NcBdkO2oigCCOp7bhlHFs57MeptJmYwNc0W0uOs3uy3faOlf6oPomTRyOexj2udGQHtB3aSLojy2IKDM/PEOe7HladGmMsc1rjRcXDxHoNwPlBWeKxz4xmwnMk0PYHa7HhcRuP2NhBa/MMGTkCfSIY42OYWglxskVX5AqvVBazIE+I6bH3NGg8EU4WKI6jcIPMwuPxyYz8jJfG1gfoGgEmwCT/IWgv/AFbwSs0XO17mxiiGOGsNB1Ef8zb/AHQXtmy45caOYQ/xC9ryy+ostI/YboIv4rjwROlncWASOYAWm/DudvwCb9EHHcXxw2UtZM8xte6hERq09QCdj5INkbxJG2QBzQ4XThRH5CDAeLgCOUwStic6Rrg6NxeC3zAF7bH+SC9/EYYjM55cI4o2PJ0HcOuq9eiC+GZs8QlaHAO6ahRQZXcUhij1y6xcro2tEZskX5ft+6DRk5H0+JJkaHP5bC7SBuaCDPBxAao4J2vE72B5DYnBoBPqelefogj+tYmgPHOIcaFQuvyINV0N7FBPMzjDwz62HSW013jBHhJHl16FBnx+MslxYi98YnnZrjaAdO96bPcg/CCMvGXOwWTwMDTQMrpY3hsdtsE7XpJ21dBvfRBofxjDiMjZJDqiFvDGF1VV9OoGoX+UFn6jDzo4i2Vr5BYDo3DayP8ARBU3jeE9rTG6STW7S3RE51nTqHQeY3CDeDYtB1AQEBAQEBAQEBAQEBAQZ/o4zLzHkuOvXv69B8D+/VBTJwuKWExGWQN0hoojZoNgdPWvgILI8COOAwNe/lONubtv6/KDr8GOVkrZHPdzSC7etgdht5IKW8Ix2ZTMhjngtdem7FaapB39Nbt/Gk8JJb0G5dqJO2+/l0QWvwYpJXPP2vAD2UKdRJ3+UFb+GtlmjklyJnCL7G6gKO4uwLOx9fL1QdfwyCTVqdKLcXeB5ZVt01tW1IEvD45WFpkeBoDG9PCNunfYb9kHWYDI3Mc2WTVHYab8j1v1J8yfQIKJOCwyNozSj+GYiaaSWmttwfT+ZQbmQsjkkkbq1SkF1uJFgAbDy2HkgqlwYJpXSP5mp2i6kcB4HFzdgfU/v52ggOF4rcY4zWvZESDTZHCq6AEHYdkEpOH48skj3h7jIwMd/EdVA2KF7EHexuguhhjx4hFGCGizuSSSTZJJ6m0Gc8KwuUIxAGtDtQ0kgg1p6jtsg67hmI98jnRkmQEG3uoWQTQvY2BuPRBL6GC4T/EuAks/iO6nqTv4up6oIHheK4EOa91yGSzI4kOIo0b228uiCQ4djatWl5+/YyOIOv7tr/8AzyQXwxNgibEzVpaKGpxcfk7lBnPDcYkmpNy80JXV4vu2tA/TscFxBmBdG2M1M/7W9PP+fXcoLsfHixYRDC3SxtkC76mz/MoKH8KxZInxP5rmSPL3AzP3JFHz6duiC+WCObHdA8HQ5ukhriDX5G6CDMKGOZsoMhc2Pl+KRxBb3BNE9+qCkcIww0NDZAGmxUz+1Dr0FCh5INDcWEYgxdGqJrQ3S4k7Dud0FY4ditkZI2LS5jdI0kgVvQI8+p+UFf6PhcoR6JNIN/7Z9/bpq7uq2rogk/heI/m+B7ed9+iRzb6eh26DogudiwvljlfGHSRNLWOO5ANX80EFMfC8WLlCNsjBC7UwCVwANV69K2rog2ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4g6gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4g8Q5ORjfWZzZWPhgdI0tkyDTiCKHSm1uP3XWSXIjW/iUkWTDC+OImTSfDIbcC4gadvFQFn0tZnOzRndxuQYbMgRRPMjqDWy3o8JdTjWx2r8la9nnBOTjD2T5EfLhuJhc0GYAmtPU9G/d0Pbrak48QbsLJ+rxGzeHckeG62JHn+FizLivOizXR8Omy5MmJ5OSWk87wtAfpoHyNeS3nnMRdHxR753xkY7W3K1jude7COor0O/op7fAqHFtUWKwOi0ZELSZBNbgTY2+OvT8K+35FTOOSxYcWqOKWQxxutst2HMLgSaFWWkDy3V9m0aI+IPm40yAubG0Nkby+ZbnGmmy2vzW//qXnOdEsvik+NxaDCbja2z1pkGqm+t0KHT1ScS826Iu4jIMeSSOXGPLyhHIXPJa1pIH7HdT2+R3CznnLOO57JGPkl0O5lu8JG1V0F12oJZ40W5HEHQcRixGw6g8AlxdXUkbetVZ/KTnZqszeLukwZJ3ux4+XK1hqbaiRvdeYNj1Ct4y4jZBkyO4jkY8jotLWtdGGk6iD1J7Ws2eNVyfNdHnsxQIxbQ4l76LrJFNFbkVv+Qk58aMEnGpJcB7mtijc+2h4mIDLYXUTWzhVVS3OMqa08P4m7KyTBoBa1l8zULOzTdeh1bfhZ65yarmZO9nFI4xM5p/h8uMdJLcQ/wDNAA9leZ90eouYICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg83gfEJOKYU00sbGmPMyYAGjYiOZ7AfyQ0FB6ND0QKHogUN9hugdNkDSKqggUPQIGkegQKHoEBB1Byh6BAoeiBQ9EDSPQICBSBQ9ECggIOoCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPC/wAI/wCU5X/VM7/ypUHuoCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwv8I/5Tlf9Uzv/KlQe6gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg//9k=" alt="" align="left" style="display:block;"></div> <p>服务端：</p> <div style="display:flex;"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+EAjEV4aWYAAE1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBKAADAAAAAQACAACHaQAEAAAAAQAAAFoAAAAAAAAASAAAAAEAAABIAAAAAQADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAHwoAMABAAAAAEAAABuAAAAAP/bAEMACgcHCAcGCggICAsKCgsOGBAODQ0OHRUWERgjHyUkIh8iISYrNy8mKTQpISIwQTE0OTs+Pj4lLkRJQzxINz0+O//bAEMBCgsLDg0OHBAQHDsoIig7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O//AABEIAG4B8AMBEQACEQEDEQH/xAAaAAEAAwEBAQAAAAAAAAAAAAAAAQMEAgUG/8QAORAAAQMDAgUDAQcEAQMFAAAAAQACAwQRIRIxBRNBUWEikaFxFBUjMjOBsQZCUtGSFiXBQ4KTsvD/xAAZAQEBAQEBAQAAAAAAAAAAAAAAAQIDBAX/xAArEQEBAQABAwMCBQQDAAAAAAAAARECEiExA0FRBGEiQnGRoRPB0eGBsfD/2gAMAwEAAhEDEQA/APouLSyt4pM1k8zGtayzWSuaBjsCvTOMxytrF9onvmrqP/nf/tWcPszecnuviZWTN1R1FS4XI/Xd0F+/ZLx4xZbXTYK9zi0S1d7X/WfnF7b726KZxNqDFXAMvPVankhrOe7Ubb4vfomcTa5La0AEy1oDtryPz8q9PE2jxWRi75qxova7pXjPbdOnibXtUMzhw2JxJe4MvdziScncrFkalrptb69L+WBe2CU6fsnVPlMnEaeKURSSBry5rQCDkkEj+Cp2a7uPvWkDGPMzA19rEm1rgkXvtgdUybibUniUAJALnWdpuGnTftfZTsbjs19O2+qaJtiAQXgWPZXIbURVsNVBI+CRr2tLmEtOzm3BH7EJkw7t1mg4FlchtTqPd3/IpkNprPd3/IpkNqCb73NtrkpkNMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtMefcpkNpjz7lMhtfMcUbJJxOZ7I5HNLWWLWEg4+i3LMZsrO0TtYWCCSxv/6Tr/wtTnGLwtq2nlq6ZrwyCSzi0m8Ljsb9v2PhZt433aksXfb60s0Oge5t3XaYn2Ide4x9T5U/D8tbUs4jXMcXNgcC5xJ/CfnFv2/bKfh+U2uBW14cXCOTUdOeU4/l/wB9U/D8m1xUz1dURzYZfSSRaN+L2737JOme5ba9Cj1NoomuY4WbYggjqVm2a1Fn4mjR0+hV64x0d9ZqzhsNc8vm5ocYnReh5bgkG/1FsHpc91mWNufuuEPe9nMjc52q7QLjBB6bZU7DpnDoo4eQzmthGWxg4b9MXS5fNPLlnCqZmvTG71auguNQIObX/uO/dOw0QxCnhexmstJc7ObE5/lXqg9LnM/y/lXYhzmf5fBTYHOZ/l8FNgc5n+XwU2Bzmf5fBTYJ5re/wU2LhzW9/gpsMOa3v8FNhjDXVDw9wZI4DkE+lxbm4yuPqcrva+z6H0nDheMvKfmk8b7OPtDjF+rJcVBDna7BrQ/r9QLLPX28+/z93WelN3pmdPx5t4/57r6+QyU7omycprh65CS0NHa/Qnbwunqd5kryfS3jw5znZueJ52/p9v58KqOvbU1VxUlrAywhfbU83/Na17C1geuVn0+fVy3ezv8AU+h/R9PLx72+ZuSfHnz8z27Laiq5czC135SPSL+oONtrdN1rnyyuPo+nOfCy+/8AGd/5ZudJYkT+tsJabB5IJNwdly2/PfPu9fTw9+Pbq38vxmeXpCZrgCCbHu0r07HybLLiea3v8FNhhzW9/gpsMOa3v8FNhhzW9/gpsMOa3v8ABTYYc1vf4KbDDmt7/BTYYc1vf4KbDDmt7/BTYYc1vf4KbDDmt7/BTYYc1vf4KbDDmt7/AAU2GHNb3+Cmww5re/wU2GHNb3+Cmww5re/wU2GHNb3+Cmww5re/wU2GHNb3+Cmww5re/wAFNhhzW9/gpsMOa3v8FNhhzW9/gpsMOa3v8FNhhzW9/gpsMOa3v8FNhhzW9/gpsMOa3v8ABTYYc1vf4KbDDmt7/BTYYc1vf4KbDDmt7/BTYY9GWtdFVMhET3B3Uf8AjuuDo1NJMseTuf4KDusldBRzzMaHOjjc4NJsDYX3QefS8UMtPI+ohdG+Ms1NjvJcOALSLC/XOMWKxjm0NqHfbn0zxYcsPYb7i5B9jb3UGVvFTFJV/beVBFTyCNr2vc4uJaHbWxg/ygvPEqUVTaXn/ivALW2OQQSDfbofZBW7ikL6V1TTSNmZFI1su40gkXPsb/RB1XVVTTS0zIIo5OfIYyXyFuk2J6A32KEeZJ/UskPD2VU1KxhdynFvNJGmS4aQbb3FiPlXFx6kVVUc+KGoiZG+WEvsx5cA8HLb9dx8qIppeMwVPDnVRcGujj1yxgl2jfsMi4OQOhVwxZ97UbZY4ZKlrZXtY7RnZ22fJwmCynqjJHMZfS6CRzHhtzgZB/cEFQVw8VppGUxdM1r6kAxtuc32zb+bIJbxaicZQKj9G/M9LsZ09u+EGiGeOohbNDJrjeLtcOoQd3Pcohc9yg0DYLo6iAg8riUTpDUS8h8gETYow1lzqJuT9Py5+q5c5u17/p+U49PHc77f0/8AazCGrvrZTSPijqZHyswHSgSOc3SDvY56X2ys5fj3/u7dfp+Lym3jM+34ZLv6+Ps31sTZSCyOWSe12NL3BjSRu7Nse/ZdOU39Xk9HlePmyT38b/x7sTeGwPrKWhdTzSRUkRL3yA6ScBtjsf7jYbdVz6Js454em/Uc5w5+rOUl5X28/N/t5ehLRyS1rJQ6ONkYAbpaS474zgDPZdLxtuvLx9Xjx9O8fNv7f5eLJQzM4S6R1O8l1KGWDSXlxY4bDO5GVxvG9Pj2fS4+txvrZOX5t+2bL/0+mAAaABay9L4lEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQYnQsfMyVwOtgIab90FjP1o/qf4KC2phFRSywFzmiRhaS3cXFsIMMHCRT0z4o5p9T3NLpS8azawAva1rC2yzlYyrZqJ8tRBOxwY6LUDi+prhke4B/ZTKZWJ/ATVU0sdbOZHzSiR7ogGAkN02sb4sOvXKuUytcfC445oJvW6SCEwtcXbtxv3ON/J7plMqmj4FBRU9RAx0kjKgWeJHA3xbt269UymUHDKt8lKZaoOZTNBsI7Oc/SW6r32sb2tumGVS3+m4G0racz1Dg3SNbntLi1oIa3a1hc9E7mVq+7XthpGNleXUrgWvksXOABBB23BUymVXDwRkEEsTJp/xIxEHF4JYzOG48ne6uUyuTwFrm2NVUn0RMvqbtG7U3p33TKZV76KpbUTz00rI3ytaLPZqAc0nNgRuDb9gphlZv+nonCkL5Zi6kDQ0tcACQb3tbGe3TCvcyr5eDwysq2+tn2twdIWv6i23jG3W57qZTKtoqAUNIymiLiyO9tZBO90ymVJonmCSLnzetxOvWNTbm9gbbDZMpldmmeZmy63jS0t0B3pN7ZI7i3ymUytI2W20oCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg8matEVbHDqAaQdd2m4PRBsZ+tH9T/AAUGpB5sNYXS07TNfXNMLdwCbfFkGWWuqG1bgKkFjSASwNDPUepsdvJF84QXz1VQ008TKlpLmcwyx07pA6zhizTgEFBDq2pfHA4PDHl7hp5JHMAfo2JBG4dlBhh41UTcOrZm1FOTGz0kSA2OdrXObYxmyC2Li8pqqhnNuWh5DSWFoIbcAWNzbr2x3QXR8QqXvidEWSse57W6nWD7yWuLA30geyCuPiM7a+SMulfoeA5jpIiGAusLhvq/1jyUEfb6wmJjJC4vijZblm93NJLtWwItt48hArOJ1cUMYbPTtfzLF7yYw4DSb2sbYJv2CDqSvrY4p3Oc1umRgDXA6mkvtpuL3uLHA/uQKCvqp+KciSV1mlznNOnI1PAFrAi2kZuUHswyxzwtlhkbJG8amvabgjuCgwR8XjZE81QLHMc5twwhrrP0CxO5uR7oLo60z1FOYSx1PNG517HVcEfGSgrZxIQ0wfV/n1yNPKY4gBriC7wLWv8AVB3xWskoaB1THo9BF9YJFv282QZm8aYaUDXGamSIyRgA6chxbf6hp9kCo4s/kCSnZoANpHzRusw2BFwMgG/5th1QXv4zRsfIzU9xidZ2hhd/dpO3YmxQdnicDZmwvbKx7ma/VGQAM7/8T8dwgrZxqklawxiWTW4tGiMnOnVbG1xlBqq6gUlJLUGN8gjaXaGD1G3ZBnbxC1a6CVjgCWaCGHGoHDjsDcH4QDxSGOJj5GyXfI9jWiM3u0kf+P36INU0nKgfJpc7S0mzRcn9kGdnEYXVEdPZ7pHsa/DDaxv/AKP06oJr6mWBkTYWanyyBgJaXBt+pAI7IOfvSC0t2TDlO0OvE7LrgADve4t9UHI4xTGRjNM3rtY8p1hc2yemd+yCrjHE5eHOgLeVoldpJeCTe4A2PYn2QTJxeNp5cbhJLHI1sjQ0m/qDXafoSgsirZqqpaKYMELWtMnMBDjcuBAHQjT1QTHWStpQ+drS/wC0GImNpI/PpB/j90EP4xRtlfFqe9zHhhDGF2dQb07EgILIuIMmqIomQzWkY5+stsG6TYg9b3Qa0BAQEBAQEBAQEBAQEBAQEBAQEBAQEBBiMbHPa8tBc3Y9Qg7Z+tH9T/BQaHtLmFocWki1xuEGf7BCGuaARcNDSN2hu1v3zlBTPweCokle572mU3Ng3GAMXF+iDYIWiYy51FoaOwHj/wDdAg4no4amRj5QXFgOkajYX627oM0XB4IWSsZJLplY1jgXA4F79Ot/9WQXx0TWSmUyPe5wIcHEEEHxsNum/W6CG0MbSSHvuHFzDf8AISSTb39sIIj4dGyaSYyzPlfjU52wzbAxi/UdkEM4ZTskjeObeMNA/Edb0ggXF7HdBD+GRSFpdJJcEkkEAuJtvjIwMbG2UHf2Bh1fiyXe4Ofn8xBuP4tjoEHEPC4oZ2ytkl9Ly/SSLai3STtfz9Sg0wwsp4WQxghjAGi7i42+pyUGd3C6NwAdG4garXkcbanBxO++oAg9OlkFgooBJFIA/VCC1n4jrWO9xfP7oKzwqjMfLdG5zdTneqRxy78wvfY9Rsg0yRRzM0SMDmkg2Pg3CCj7upA5rhCAWxiMAEgaQCACOuCfdBweE0RZoMTiLkn8R1zcAEE3yLACxxhB0/hlI8SXY4CR2p2mRzc3vfBxnOEFr6SnknZO+FjpWRuja9wuQ11tQv2Olt/oEFcfDaWPlaGvHJdqYOa6wNrd84xlBfJGyWJ8Ug1Me0tcO4KCgcOpg4O0vJBY65lcct26+f36oOXcKo3wuheyR0bnOc5pmeQS7e+cg9tkGmSNssTo3X0uFjYkG31CChvDqVr4n6HkwgCPVI4gWBANid7E5QWTU0VRy+YHfhuD26Xluf2OUHH2Cn5csZa8tlfrdeRx9XcG+NhtZBX900WpruW8FtrWleNsjqg0TU0NQAJo2vDTcX6IKjw6lJkPLI5jg51nuGb3uM4NxfCBHw6likZIyKzo26QdRyMkXznJOT3KB93U3JMNpdBk5p/GffVe973vvm2yAeHUpe5/LcC54kNnuA1A3vYHuM9+qCWUFPG5jmscDGXFp1uP5jc9c56FBpQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEHzxqZpGTmASiWJzmaJXyAarXt+W1rHe++Fvpks3w59VsueY9OlOptOS/mEj8/wDl6TlZvlueG5RRAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQeLNDw+eKSKQO0ygh1i8XVlsuxLJZla6eSIyxRxbN2FiLCxUVvQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBB8LVOrmQOkZVVUpc4ehjWjTc+BfwunpSXl3a4SW930HCXue+B776nMub2vt4XNl6PEHaOHVLtZZpicdQNiMHN+ivHyMEU1XSPgh5kDjVOJY2SZziwaRsTl1yD7rfao6dxeVrqgcuMCN2m5J/D9em78Yx6vp7p0QT96TCrZDyo3Axh5fqsHYcbi+bCw6dfd0zNFH35L9mbKRBfWWusSdgD6QPzb7i/0vcC9E016PFJXwcLqZI5GxvbGdLnbA/7WOM2qy1FZ9hEbWTRvAppHs1yOJcQARm5uN85KsmoO4k4MPNfAwsqI2GzzlrgD75+lgnT8CqXiU0lQ6EPjY6Ooa1oa82Pr02cR46Yz33WumSaOouMzSTxxiBrwWEuLHfmI1X033y0D91OiZou4RVPqnVTnyNedbSAxxLWgsbgX83U5zMIoj4rVySV8UkDYRSscea8ODHHpY9ds2WrwkkvyOqqteYhaojZBLRve0tJ16gNw6/lSQa6CqfUc1kvL1xFv5CTgtBG/1WbMVkfxaovVhsDAYCQ0OdYkh1gP/d026LXROyLoq7mz0YMsP48TnANJycbeN/ZS8fKruG1ElRSB0z43ytcWv5bSACDtYqcplGZ/FJWioIEI5T9GlxN2DUG6nYwLZ+nuNdMRRLxSZ8lLcCMXY8ta515L6hYC2Rgb9x4venyN3C62SupjLJG1ljYaXX6A/F7fsscplVRQyyO4lK0yyOP4nMY69mWfZlh0u2/13WuU7D1FzBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQeIOFAbaR9HOQaKOmNPPHlukDSAL4wUE/1FxCbhP9N8T4jThplpKWSZgeLtLmtJFxcYx3QeiNkEoIQSgIIQEEoCAghBKAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPi5m8R+0SvlrAyRkgDWGJxNi707PAOCOi73l6Pxf3/ANPLOP1Hf8U/b/b6ShEwhpRUX52kcy5F9WnO3lcuWdVzw9HDemdXlj/rUX/ofjoGf+3z/wD0cstPbGwQSgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg82Sko5KgSy08LpsEOc0F2NrfRBoZ+tH9T/AAUFtVTQVtLLS1MTZYJmFkkbhhzSLEFBYglAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBB8BxKnjfxWeR/EHskEnpvM4Fmcf3Ytderjw43jLjyc+fOcrJyfZU97U9ySbDJNz+VeWvXG1AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEGB1PA9xe6CJzjuSwEq7flMi1n60f1P8FRWpAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEH/9k=" alt="" align="left" style="display:block;"></div> <p><strong>通过上述实例代码，我们可以大概总结出SocketChannel和ServerSocketChannel的使用的一般使用规则：</strong><br>下面只给出大致步骤，不贴代码，可以结合上述实例理解。</p> <p><strong>客户端</strong></p> <ol><li>通过SocketChannel连接到远程服务器</li> <li>创建读数据/写数据缓冲区对象来读取服务端数据或向服务端发送数据</li> <li>关闭SocketChannel</li></ol> <p><strong>服务端</strong></p> <ol><li>通过ServerSocketChannel 绑定ip地址和端口号</li> <li>通过ServerSocketChannelImpl的accept()方法创建一个SocketChannel对象用户从客户端读/写数据</li> <li>创建读数据/写数据缓冲区对象来读取客户端数据或向客户端发送数据</li> <li>关闭SocketChannel和ServerSocketChannel</li></ol> <h2 id="datagramchannel的使用"><a href="#datagramchannel的使用" class="header-anchor">#</a> <strong>DatagramChannel的使用</strong></h2> <p>DataGramChannel，类似于java 网络编程的DatagramSocket类；使用UDP进行网络传输， <strong>UDP是无连接，面向数据报文段的协议，对传输的数据不保证安全与完整</strong> ；和上面介绍的SocketChannel和ServerSocketChannel的使用方法类似，所以这里简单介绍一下如何使用。</p> <p><strong>1.获取DataGramChannel</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>        <span class="token comment">//1.通过DatagramChannel的open()方法创建一个DatagramChannel对象</span>
        <span class="token class-name">DatagramChannel</span> datagramChannel <span class="token operator">=</span> <span class="token class-name">DatagramChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//绑定一个port（端口）</span>
        datagramChannel<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面代码表示程序可以在1234端口接收数据报。</p> <p><strong>2.接收/发送消息</strong></p> <p><strong>接收消息：</strong><br>先创建一个缓存区对象，然后通过receive方法接收消息，这个方法返回一个SocketAddress对象，表示发送消息方的地址：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ByteBuffer</span> buf <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
buf<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>发送消息：</strong><br>由于UDP下，服务端和客户端通信并不需要建立连接，只需要知道对方地址即可发出消息，但是是否发送成功或者成功被接收到是没有保证的;发送消息通过send方法发出，改方法返回一个int值，表示成功发送的字节数：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ByteBuffer</span> buf <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
buf<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
buf<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;datagramchannel&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
buf<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> send <span class="token operator">=</span> channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这个例子发送一串字符：“datagramchannel”到主机名为”localhost”服务器的端口1234上。</p> <h2 id="scatter-gather"><a href="#scatter-gather" class="header-anchor">#</a> <strong>Scatter / Gather</strong></h2> <p>Channel 提供了一种被称为 Scatter/Gather 的新功能，也称为本地矢量 I/O。Scatter/Gather 是指在多个缓冲区上实现一个简单的 I/O 操作。正确使用 Scatter / Gather可以明显提高性能。</p> <p>大多数现代操作系统都支持本地矢量I/O（native vectored I/O）操作。当您在一个通道上请求一个Scatter/Gather操作时，该请求会被翻译为适当的本地调用来直接填充或抽取缓冲区，减少或避免了缓冲区拷贝和系统调用；</p> <p>Scatter/Gather应该使用直接的ByteBuffers以从本地I/O获取最大性能优势。</p> <p><strong>Scatter/Gather功能是通道(Channel)提供的 并不是Buffer。</strong><br>- <strong>Scatter:</strong> 从一个Channel读取的信息分散到N个缓冲区中(Buffer).<br>- <strong>Gather:</strong> 将N个Buffer里面内容按照顺序发送到一个Channel.</p> <h3 id="scattering-reads"><a href="#scattering-reads" class="header-anchor">#</a> <strong>Scattering Reads</strong></h3> <p>“scattering read”是把数据从单个Channel写入到多个buffer,如下图所示：</p> <div style="display:flex;"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+EAjEV4aWYAAE1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBKAADAAAAAQACAACHaQAEAAAAAQAAAFoAAAAAAAAASAAAAAEAAABIAAAAAQADoAEAAwAAAAEAAQAAoAIABAAAAAEAAADWoAMABAAAAAEAAAC7AAAAAP/bAEMACgcHCAcGCggICAsKCgsOGBAODQ0OHRUWERgjHyUkIh8iISYrNy8mKTQpISIwQTE0OTs+Pj4lLkRJQzxINz0+O//bAEMBCgsLDg0OHBAQHDsoIig7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O//AABEIALsA1gMBEQACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABQYBAwQCB//EAEEQAAEDAQQGBggDBgcBAAAAAAABAgMEBRESEwYhVGGU0RUWMVFVshQiNkF0kZPSMnGSI3OBoaLDNDVCUmJkwbH/xAAaAQEAAwEBAQAAAAAAAAAAAAAAAQIDBQQG/8QALxEBAAIBAAcHAwUBAQAAAAAAAAERAgMEEhNRcZEUITEyUmHBM6HRIiNBgeHw8f/aAAwDAQACEQMRAD8A+zAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4bTtNtmxwqsEtQ+eTLjjiuvVblX3qidiKUyy2YHH09U+BV/6ovvKb32n7Is6eqfAq/wDVF943vtP2LOnqnwKv/VF943vtP2LOnqnwKv8A1RfeN77T9izp6p8Cr/1RfeN77T9izp6p8Cr/ANUX3je+0/Ys6eqfAq/9UX3je+0/Ys6eqfAq/wDVF943vtP2LOnqnwKv/VF943vtP2LdtmWk20opXJBLA+GRY3xy3XoqIi+5VTsVDTHLahLtLAAAAAAAAAAAAAAAAAAQmkS4ZrKXurP7bzHS/wAIljOM7QZwsM4WGcLDOFhnCwzhYZwsM4WPWji4nWovfWr5GGui8JTCaNUgAAAAAAAAAAAAAAADAEDpS7D0YvdWf23mGm8IRLiz9557VM/eLBZ0RFVV1ILGmC0qepuyJ2SXtxJhXtTvTvQnvGZLQghkSOSZrXrdc1e3WtyfO5RHeltzl3kWgz95Nhn7yLDP3ix3aLLijtFe+sXyNPTofLK0J42SAAAAAAAAAAAAAAARFRNaFRbctFS1cdNHFTskVXQ41crnOTvS78JpEYxjcwpMzOVQ9Oo7YwLfa0SpdrT0NFv/AKheHD7lZcVO6PtyzaCi6Vq0dC6svhpneu+JMD+1/wCX+nXd3meu56OYjZhno8c4j9UurO3nMtczt4seXyqrHInaqKgtMSho6erbT01zZUfBTtY5JJEW9Ucxbm3Lq/CvdfqNNuLs/imWUc0lY+pkgRrnTI5Fc5FVERz1T5IrSu1URET/ANSHqlpalMhJ8a4XMzUVyYXKiOvdqW9b1VO26/Vq1EzlF9wmM7eUsM7eLDO3ixN6Hripa9e+sd5Gns0HlXhYTdIAAAAAAAAAAAAAABFQe1dZ8HD55DSfpxzn4UjzzySpmurOmy4aOgXuq08jjzaz5FZVnO3nhtUzt4sM7eLDO3iwzt4sM7eLDO3iwzt4sM7eLFn0JXFQVq99W7ytPfq/kXxWU9CQAAAAAAAAAAAAAACKg9q6z4OHzyGk/TjnPwpHnnklTNdVdPVw2bRL3VaeRx5ta8iuXgpuccy1DOFhnCwzhYZwsM4WGcLDOFhnCxdNAlxWVVr/ANt3ladPVvpr4+C0HpWAAAAAAAAAAAAAAAIqD2rrPg4fPIaT9OOc/CkeeeSVM13LXWdR2nAkNdTR1EaOxI2Rt6IveVyxjKKmBwdUdHvB6X6ZTc6P0wioOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoOqOj3g9L9MbnR+mCoSFDZ9HZkCwUNNHTxK5XKyNtyKq+8vjjGMVEJdJYAAAAAAAAAAAAAAAIqD2rrPg4fPIaT9OOc/CkeeeSVM1wAAAAAAAAAAAAAACBdGtVaNdmVFQiRyo1jWTOaiJgavYm9VObMbelzuZ7p4zH8Q6MTsaPCojvjh7y9+gx7TWcS/mTuo4z1n8o3k8I6Qegx7TWcS/mN1HGes/k3k8I6Qegx7TWcS/mN1HGes/k3k8I6Qegx7TWcS/mN1HGes/k3k8I6Qegx7TWcS/mN1HGes/k3k8I6Qegx7TWcS/mN1HGes/k3k8I6Qegx7TWcS/mN1HGes/k3k8I6Qegx7TWcS/mN1HGes/k3k8I6Q0VtP6NRyzRVVWj2Je1VqHKl9/cqlM8NnGcoym495aaPLazjGcYrlCwp2HUctkCKg9q6z4OHzyGk/TjnPwpHnnklTNdC6ROevR8DZpYmTVWCRYnqxypget16a+1EMtJM9yJcvRkG2WhxsnMz/tB0ZBtlocbJzH9h0ZBtlocbJzH9h0ZBtlocbJzH9h0ZBtlocbJzH9h0ZBtlocbJzH9h0ZBtlocbJzH9h0ZBtlocbJzH9h0ZBtlocbJzH9jr0cc9GV8LppZWQ1asjWV6vciYWrdeuvtVTTRz3SmEyapAIFjrrStH9+3yNOZE/u6Tn8Q6Vft4cvmW7GaWpRjFlGMWUYxZRjFlGMWUYxZRjFlOW0nX2dOn/H/0y0s/olroY/chYU7DqOWyBFQe1dZ8HD55DSfpxzn4UjzzySpmugtJnYX2WvdWf23mOm8IRLRn7zG0GfvFhnbxYZ28WGfvFhn7xYZ28WGdvFhn7xY6NGVxJaS99avkYb6LwlMJw1SAVxXXWnaH75PI05Mz+7pOfxDq4x+1hy+ZbMak2inl0uBjnL2NRV1CcqgpGSWhWx2StoIsLr6Z0qRYdaLhxNRFv9buXs/gaTERls+/ypczjtMy28yna/Ngc10bsL242qqfh7O/U5F+Yq5iv5/NG1UTM/x/6zJbuB+H0OVyulWNlzm+sqSIxV7dSXuv/K8iIv8A7n+CcqlhmkEDpcvKejkcjXpel7VVyt1J79aa7vcKmr/7wsuHZQVT6mggnkuxyRo52FNV6kZd01C2PfDoxqVtNOW05mss2oe9yNa1l6qvuQrlE5Rsx4yvhMY5bWU90Ozrpozd/nlF9VDu7jS+mXE3uHFnrroz45RfVQbjS+mTe4cXFSaSWJLpFVVMdqUzoVpYmI9H6lcjnqqfzT5lstFnGERMKxpMduZtKLpLY1y4bTplX3XyGe7z4L7zHirdfpRZ9ux0Dad6x1MNXfLTv/E1MD0vT3Kl/vQx1rRZYYxM+CuOkxy8G3O3ngtYzt4sYdUYWOVF7EVRZCJprbnwU76hFck0DXr+ywesqtTVrW9PWv8A4e8vUXMEsy2zVLXOihYxsLHtY5zrlX8Tkcv9OoiKq5/7uPZtht+Ooy8qF7llVuH1kuucireq+5dWtO3WgmJiakvutI528rYZ28WGdvFiU0TXFBaC99YvkaevQ+VaFgNkgFYlddatofvm+Rpxs5/e0nP4h2MI/aw5fMs4yLTRjJspx9HUSsVixKrMLmo1XqqNR3ajUv1fwJjOYVnCJJrNoqh0jpI1VZUufc9yYk1aluXcgjOYROjxnxe1oqVVaqxXqx6vb6y9quRyr80RRGcwnYgbR0zJMbGuY5VvXDI5MS3quvXr1qvzG3NUbEN0LY4IWQxphYxEa1L77kInKZ75TGNQ94yLTTnrn30Uqbv/AErnP6ZX0cfqha0jZd+FvyO44bOWz/a35ARcDWppVWIiJ/g4fd/zkNJ+nHOfhnHnnlHylFYitVOy/wB6IZtFR0hsuhsazrPioadsTVrEVyprc9cD9bl7VUx1rPLLG5UjGMYqEXnngtBniwWZFRUXsUWOVtJSpEkeFytaxGNR0jlwpq7NersT5E7c+IzHTUsS4mxrfixKquVb1vVb9e9y/MbUj1HDBHgwo66NUViK9yo25FRLkv1dqjakb88iwzxYZ4sWHQxcVFXL31jvK092r+RfFYzdIBU6p11r1/71vkacPSz+9nz+IdvRR+zhy+ZecZS16MYsoxiyjGLKMYsoxiyjGLKMYsppq3X0sibk/wDpGU9y2EfqXNOw+gfPsgRUHtXWfBw+eQ0n6cc5+FI888kqZrqvp0uGgoV7qtPI482s+RXLwVPPOdahniwzxYZ4sM8WGeLDPFhniwzxYt2gy4rNrF76t3ladLVvIvisx6FmAK3XWVaTrTqpoII5I5Xo5qrLhX8KJ2XbjkabVtNOlyyxiJiff25OtodZ0MaLHHKe+Pb3aeirX2SP66cjLsus+mOv+NO06vxnodFWvskf105Dsus+mOv+HadX4z0OirX2SP66ch2XWfTHX/DtOr8Z6HRVr7JH9dOQ7LrPpjr/AIdp1fjPQ6KtfZI/rpyHZdZ9Mdf8O06vxnodFWvskf105Dsus+mOv+HadX4z0OirX2SP66ch2XWfTHX/AA7Tq/Geh0Va+yR/XTkOy6z6Y6/4dp1fjPR4ksa1pWKxaWJqOu156atf5E9k1ifGI6/4mNa0Ed9z0W1Ow7biMgRUHtXWfBw+eQ0n6cc5+FI888kqZroDS6yq21rPp46FjHyRTpIrXvw6sLk7bt5hp8Ms8axRMWqnVLSLZKfiU5Hi7LpfZXZlnqlpFslPxKch2XS+xsydUtItkp+JTkOy6X2NmTqlpFslPxKch2XS+xsydUtItkp+JTkOy6X2NmTqlpFslPxKch2XS+xsydUtItkp+JTkOy6X2NmTqlpFslPxKch2XS+xsydUtItkp+JTkOy6X2NmVr0RsussqzJoq5jGSyTukRGPxJdcidt2492gwnDCpWiKTxskAAAAAAAAAAAAAAAioPaus+Dh88hpP045z8KR555JUzXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIqD2rrPg4fPIaT9OOc/CkeeeSVM10VblbV0raOKjfFHJU1GWr5GK9Gphc7sRU/295npMpiIpDlx274nR8G77zPbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4hjt3xOj4N33jbz4jrsOsqqqOrZWPjkkp6hYscbFYjkwovYqr395po8pmO8hKGiQAAAAAAAAAAAAAACKg9q6z4OHzyGk/TjnPwpHnnklTNdB6SOwyWUvdWf23mOl8IRLXnbzK0GdvFhnbxYZ28WGdvFhnbxYZ28WGdvFhnbxY26NriW01761fIw20XhKYTZqkAAAAAAAAAAAAAAAioPaqs+Dh88hpP045z8KR555R8pRVuaq3Ktye5DNdWLetCltClsuqo6hk0S1l2Ji33LgfqXuXcplrGM4xESrcTFw5s7eeS0GdvFjDqjC1V7kvFkOGmt2KdI3ORI0liSVFSRHXIqoiIt3Yt6p/MtX8HgxLb0TKz0Zkb5FRzWq5L0RHKqpd2e7Ct4jvix0Ja1IqIqTouJURtyL619912rWi3LrTVqI7x0Z28iwzt4sM7eLEloouKK0V76xfI09Wh8q0J82SAAAAAAAAAAAAAAAcVXY9BXT59RTo+VG4MaOVq3X33al3qWjPKIqFZxiZtoXRyy7lw0uv3Xyv5k7zLijYhVK/Rek0cp6OaOR81VPV/tZXLci+o9bkb2InzXeZa5pss8Yj+FMdHGHf8Ay85285trM528WMOlxNVt/alwshHJZ/7GKN06XwRJHG5saJ2K1b116/wp3Ftvvseo6FGyOkfUOe5z8bvVRPe5bv6v5ETlFV/3hQU1AynybpEXJwo1UZcqo1FREVb9+78iZ0lzMnskM7eVsM7eLGM7eLE/ocuKkr176x3lae3QeVfFYjdIAAAAAAAAAAAAAAAAAVjTh2GhoV/7aeRx5tZ8iuSrZ+859qGfvFhn7xYZ+8WGfvFhn7xYZ+8WGfvFhn7xYtWg64rOrF76t3ladHVvIvj4LMehYAAAAAAAAAAAAAAAAAKvp3HM+y6V0UMsuCqRXJGxXqiYXJfch5tZiZw7lZ8FKuqthrOFk5HO2M+E9FakuqthrOFk5DYz4T0kqS6q2Gs4WTkNjPhPSSpLqrYazhZOQ2M+E9JKkuqthrOFk5DYz4T0kqS6q2Gs4WTkNjPhPSSpLqrYazhZOQ2M+E9JKkuqthrOFk5DYz4T0kqS6q2Gs4WTkNjPhPSSpXbQSOWOyKhZoZYlfVOciSMVqqlzUvuX8jpatExh3r4+CznoSAAAAAAAAAAAAAAAAAADAGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/Z" alt="" align="left" style="display:block;"></div> <p>示例代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ByteBuffer</span> header <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ByteBuffer</span> body   <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ByteBuffer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bufferArray <span class="token operator">=</span> <span class="token punctuation">{</span> header<span class="token punctuation">,</span> body <span class="token punctuation">}</span><span class="token punctuation">;</span>

channel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bufferArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>read()方法内部会负责把数据按顺序写进传入的buffer数组内。一个buffer写满后，接着写到下一个buffer中。<br>举个例子，假如通道中有200个字节数据，那么header会被写入128个字节数据，body会被写入72个字节数据；</p> <p><strong>注意：</strong><br>无论是scatter还是gather操作，都是按照buffer在数组中的顺序来依次读取或写入的；</p> <h3 id="gathering-writes"><a href="#gathering-writes" class="header-anchor">#</a> <strong>Gathering Writes</strong></h3> <p>“gathering write”把多个buffer的数据写入到同一个channel中，下面是示意图：</p> <div style="display:flex;"><img src="data:image/jpeg;base64,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" alt="" align="left" style="display:block;"></div> <p>示例代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ByteBuffer</span> header <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ByteBuffer</span> body   <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//write data into buffers</span>

<span class="token class-name">ByteBuffer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bufferArray <span class="token operator">=</span> <span class="token punctuation">{</span> header<span class="token punctuation">,</span> body <span class="token punctuation">}</span><span class="token punctuation">;</span>

channel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bufferArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>write()方法内部会负责把数据按顺序写入到channel中。</p> <p><strong>注意：</strong><br>并不是所有数据都写入到通道，写入的数据要根据position和limit的值来判断，只有position和limit之间的数据才会被写入；<br>举个例子，假如以上header缓冲区中有128个字节数据，但此时position=0，limit=58；那么只有下标索引为0-57的数据才会被写入到通道中。</p> <h2 id="通道之间的数据传输"><a href="#通道之间的数据传输" class="header-anchor">#</a> <strong>通道之间的数据传输</strong></h2> <p>在Java NIO中如果一个channel是FileChannel类型的，那么他可以直接把数据传输到另一个channel。</p> <ul><li><strong>transferFrom()</strong> :transferFrom方法把数据从通道源传输到FileChannel</li> <li><strong>transferTo()</strong> :transferTo方法把FileChannel数据传输到另一个channel</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/DevLanguage/Java/JavaNIO/JavaNIO-Buffer.html" class="prev">JavaNIO - Buffer</a></span> <span class="next"><a href="/DevLanguage/Java/JavaNIO/JavaNIO-Selector.html">JavaNIO - Selector</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2ba1140b.js" defer></script><script src="/assets/js/2.858e58ff.js" defer></script><script src="/assets/js/32.c204bc79.js" defer></script>
  </body>
</html>
