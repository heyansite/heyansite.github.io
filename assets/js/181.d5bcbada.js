(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{862:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"npm-基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-基本使用"}},[s._v("#")]),s._v(" npm 基本使用")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("此文为转载 （通常一篇文章会参考多处，也会添加自己的理解，引用地址如有遗漏，请指出）")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.jianshu.com/p/60ac7fe6edce",target:"_self",rel:"noopener noreferrer"}},[s._v("https://www.jianshu.com/p/60ac7fe6edce")])]),s._v(" "),t("li",[t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/npm-install.html",target:"_self",rel:"noopener noreferrer"}},[s._v("http://www.ruanyifeng.com/blog/2016/01/npm-install.html")])]),s._v(" "),t("li",[t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_self",rel:"noopener noreferrer"}},[s._v("http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html")])]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.runoob.com/nodejs/nodejs-npm.html",target:"_self",rel:"noopener noreferrer"}},[s._v("https://www.runoob.com/nodejs/nodejs-npm.html")])])])]),s._v(" "),t("h2",{attrs:{id:"基本介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本介绍"}},[s._v("#")]),s._v(" 基本介绍")]),s._v(" "),t("p",[s._v('npm 最初它只是被称为 Node Package Manager，用来作为Node.js的包管理器。但是随着其它构建工具(webpack、browserify)的发展，npm已经变成了 "the package manager for JavaScript"，它用来安装、管理和分享JavaScript包，同时会自动处理多个包之间的依赖。')]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("新版的nodejs已经集成了npm， nodejs分为了长期支持版和当前版本。")]),s._v(" "),t("p",[s._v("安装好后，你可以查看版本")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"升级现有npm版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#升级现有npm版本"}},[s._v("#")]),s._v(" 升级现有npm版本")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"更换npm镜像站点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更换npm镜像站点"}},[s._v("#")]),s._v(" 更换npm镜像站点")]),s._v(" "),t("p",[s._v("配置 npm 的国内镜像站点为："),t("code",[s._v("https://registry.npm.taobao.org")]),s._v("。")]),s._v(" "),t("p",[s._v("方法一：在系统的"),t("code",[s._v("HOME")]),s._v("目录新建.npmrc文件并添加 "),t("code",[s._v("registry = https://registry.npm.taobao.org")]),t("br"),s._v("方法二：你可以使用淘宝定制的 "),t("code",[s._v("cnpm")]),s._v(" 命令行工具代替默认的 npm:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g cnpm --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n\n//之后即可使用cnpm来安装包\ncnpm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"安装模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装模块"}},[s._v("#")]),s._v(" 安装模块")]),s._v(" "),t("p",[s._v("npm 的包安装分为本地安装（local）、全局安装（global）两种。")]),s._v(" "),t("h3",{attrs:{id:"本地安装-默认"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地安装-默认"}},[s._v("#")]),s._v(" 本地安装(默认)")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("将安装包放在"),t("code",[s._v("./node_modules")]),s._v("下（运行 npm 命令时所在的目录），如果没有"),t("code",[s._v("node_modules")]),s._v(" 目录，会在当前执行 npm 命令的目录下生成"),t("code",[s._v("node_modules")]),s._v("目录。")]),s._v(" "),t("li",[s._v("js代码中可以通过 "),t("code",[s._v("require()")]),s._v(" 来引入本地安装的包。")])]),s._v(" "),t("h3",{attrs:{id:"全局安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局安装"}},[s._v("#")]),s._v(" 全局安装")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" -g   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("将安装包放在"),t("code",[s._v("/usr/local")]),s._v("下或者你"),t("code",[s._v("node")]),s._v("的安装目录。")]),s._v(" "),t("li",[s._v("可以直接在命令行里使用。这是使用全局安装的主要原因。")])]),s._v(" "),t("p",[s._v("使用下面的命令来查看全局的包安装的位置：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" prefix -g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"创建全局链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建全局链接"}},[s._v("#")]),s._v(" 创建全局链接")]),s._v(" "),t("p",[s._v("如果你希望具备两者功能（本地安装和全局安装的功能），则需要在两个地方安装它或使用"),t("code",[s._v("npm link")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("npm link")]),s._v("的功能是在本地包和全局包之间创建符号链接。我们说过使用全局模式安装的包不能直接通过"),t("code",[s._v("require")]),s._v("使用,但通过"),t("code",[s._v("npm link")]),s._v("命令可以打破这一限制。")]),s._v(" "),t("p",[s._v("比如我们将express安装到了全局环境，使用下面的命令可以将其链接到本地环境：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" express\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用"),t("code",[s._v("npm link")]),s._v("命令还可以将本地的包链接到全局。使用方法是在包目录("),t("code",[s._v("package.json")]),s._v("所在目录)中运行"),t("code",[s._v("npm link")]),s._v("命令。")]),s._v(" "),t("p",[s._v("如果你的项目不再需要该模块，可以在项目目录内使用npm unlink命令，删除符号链接。")]),s._v(" "),t("blockquote",[t("p",[s._v("像gem 或 pip 总是以全局模式安装，使包可以供所有的程序使用，而 npm 默认会把包安装到当前目录下。这反映了 npm 不同的设计哲学。如果把包安装到全局，可以提高程序的重复利用程度,避免同样的内容的多份副本，但坏处是难以处理不同的版本依赖。")])]),s._v(" "),t("h3",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看命令帮助")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出各命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -l\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看安装信息和它们的依赖")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -g   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前项目中的包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前项目中的包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载模块")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新模块")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新当前项目中安装的某个包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新当前项目中安装的所有包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" -g "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新全局安装的包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 搜索模块")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" search "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("关键字"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出npm的配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config list -l\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出bin目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h2",{attrs:{id:"使用-package-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-package-json"}},[s._v("#")]),s._v(" 使用 package.json")]),s._v(" "),t("p",[s._v("当你的项目需要依赖多个包时，推荐使用 package.json。其优点为：")]),s._v(" "),t("ul",[t("li",[s._v("它以文档的形式规定了项目所依赖的包")]),s._v(" "),t("li",[s._v("可以确定每个包所使用的版本")]),s._v(" "),t("li",[s._v("项目的构建可以重复，在多人协作时更加方便")])]),s._v(" "),t("p",[t("code",[s._v("package.json")]),s._v(" 位于模块的目录下，用于定义包的属性。例如之前我们安装的 "),t("code",[s._v("express")]),s._v(" 包，它的 "),t("code",[s._v("package.json")]),s._v(" 文件位于 "),t("code",[s._v("node_modules/express/package.json")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"创建package-json文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建package-json文件"}},[s._v("#")]),s._v(" 创建package.json文件")]),s._v(" "),t("ul",[t("li",[s._v("手动创建")]),s._v(" "),t("li",[s._v("或者 通过"),t("code",[s._v("npm init")]),s._v("命令生成遵守规范的"),t("code",[s._v("package.json")]),s._v("文件")])]),s._v(" "),t("p",[s._v("文件中必须包含："),t("code",[s._v("name")]),s._v(" 和 "),t("code",[s._v("version")])]),s._v(" "),t("h3",{attrs:{id:"package-json-属性说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package-json-属性说明"}},[s._v("#")]),s._v(" package.json 属性说明")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("name")]),s._v(" - 包名。")]),s._v(" "),t("li",[t("strong",[s._v("version")]),s._v(" - 包的版本号。")]),s._v(" "),t("li",[t("strong",[s._v("description")]),s._v(" - 包的描述。")]),s._v(" "),t("li",[t("strong",[s._v("homepage")]),s._v(" - 包的官网 url 。")]),s._v(" "),t("li",[t("strong",[s._v("author")]),s._v(" - 包的作者姓名。")]),s._v(" "),t("li",[t("strong",[s._v("contributors")]),s._v(" - 包的其他贡献者姓名。")]),s._v(" "),t("li",[t("strong",[s._v("dependencies")]),s._v(" - 依赖包列表。如果依赖包没有安装，npm 会自动将依赖包安装在 node_module 目录下。")]),s._v(" "),t("li",[t("strong",[s._v("repository")]),s._v(" - 包代码存放的地方的类型，可以是 git 或 svn，git 可在 Github 上。")]),s._v(" "),t("li",[t("strong",[s._v("main")]),s._v(" - main 字段指定了程序的主入口文件，require('moduleName') 就会加载这个文件。这个字段的默认值是模块根目录下面的 index.js。")]),s._v(" "),t("li",[t("strong",[s._v("keywords")]),s._v(" - 关键字")])]),s._v(" "),t("h3",{attrs:{id:"指定依赖包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定依赖包"}},[s._v("#")]),s._v(" 指定依赖包")]),s._v(" "),t("p",[s._v("两种依赖包：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("dependencies")]),s._v(": 在生产环境中需要依赖的包。通过"),t("code",[s._v("npm install <packge> --save")]),s._v("命令自动添加依赖到文件（或者使用简写的参数 "),t("code",[s._v("-S")]),s._v("）。")]),s._v(" "),t("li",[t("code",[s._v("devDependencies")]),s._v("：仅在开发和测试环节中需要依赖的包。通过"),t("code",[s._v("npm install <packge> --save-dev")]),s._v("命令自动添加依赖到文件（或者使用简写的参数 "),t("code",[s._v("-D")]),s._v("）。")])]),s._v(" "),t("blockquote",[t("p",[s._v("当然你也可以在文件中手动添加依赖")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("一般使用方法：")]),s._v(" "),t("p",[t("strong",[s._v("如果其他人也需要这个项目，只需要把这个 "),t("code",[s._v("package.json")]),s._v(" 文件给他，然后进行简单的 "),t("code",[s._v("npm install")]),s._v(" 即可。")]),s._v(" "),t("br"),s._v("("),t("em",[s._v("如本人的blog项目，只需要从github clone代码到本地，然后在目录下直接运行"),t("code",[s._v("npm install")]),s._v("即可自动安装依赖包，并创建"),t("code",[s._v("/node_modules")]),s._v("目录；测试，即可直接"),t("code",[s._v("npm start xxx")]),s._v("运行代码了")]),s._v(")")]),s._v(" "),t("br")]),s._v(" "),t("h3",{attrs:{id:"设置默认配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置默认配置"}},[s._v("#")]),s._v(" 设置默认配置")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("npm set")]),s._v(" 命令用来设置环境变量。也可以用它来为 "),t("code",[s._v("npm init")]),s._v(" 设置默认值，这些值会保存在 "),t("code",[s._v("~/.npmrc")]),s._v(" 文件中。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Your name'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-email "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Your email'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-url "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://yourdomain.com'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-license "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MIT'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"更改全局安装目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更改全局安装目录"}},[s._v("#")]),s._v(" 更改全局安装目录")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("npm config")]),s._v(" 命令可以达到此目的。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" prefix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("目录"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者手动在 "),t("code",[s._v("~/.npmrc")]),s._v(" 文件中进行配置：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("prefix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /home/yourUsername/npm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("更改目录后记得在系统环境变量 "),t("code",[s._v("PATH")]),s._v(" 中添加该路径：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# .bashrc 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~/npm/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"多版本管理器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多版本管理器"}},[s._v("#")]),s._v(" 多版本管理器")]),s._v(" "),t("p",[t("code",[s._v("Node.js")]),s._v(" 的社区开发了多版本管理器，用于在一台机器上维护多个版本的 "),t("code",[s._v("Node.js")]),s._v(" 实例，方便按需切换。Node 多版本管理器(Node Version Manager，nvm)是一个通用的叫法，它目前有许多不同的实现。这里使用"),t("code",[s._v("visionmedia/n")]),s._v("。"),t("code",[s._v("n")]),s._v(" 是一个十分简洁的 Node 多版本管理器。")]),s._v(" "),t("p",[s._v("如果已经安装好npm则可以简单的使用 "),t("code",[s._v("npm install -g n")]),s._v(" 来安装n。事实上，n 并不需要 Node.js 驱动，它只是 bash 脚本；我们可以在 "),t("a",{attrs:{href:"https://github.com/visionmedia/n",target:"_self",rel:"noopener noreferrer"}},[s._v("https://github.com/visionmedia/n")]),s._v(" 下载它的代码，然后使用 make install 命令安装。")]),s._v(" "),t("p",[s._v("n的常用命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看帮助 ")]),s._v("\nn --help\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 6.9.5版本的nodejs。 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过 n 获取的 Node.js 实例都会安装在 /usr/local/n/versions/ 目录中（看情况吧）")]),s._v("\nn "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.9")]),s._v(".5\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出已经安装的 Node.js 。结果中 * 表示默认版本")]),s._v("\nn\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本切换，与安装node.js一样")]),s._v("\nn "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.9")]),s._v(".5\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指明使用某版本的 node.js 执行某脚本(比如 script.js)")]),s._v("\nn use "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.9")]),s._v(".5 script.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[s._v("PREFIX=$CUSTOM_LOCATION make install； 自定义 n 的安装路径（避免使用sudo）")]),s._v(" "),t("li",[s._v("自定义node.js的安装路径(通过n安装)；通过设置环境变量 export N_PREFIX=$HOME")]),s._v(" "),t("li",[s._v("自定义 source。（镜像站点）")]),s._v(" "),t("li",[s._v("自定义 架构(architecture)")]),s._v(" "),t("li",[s._v("如果使用n切换了node.js的版本后，npm没有正确运行，通过运行相关脚本解决。（见 n: working-with-npm）")])]),s._v(" "),t("blockquote",[t("p",[s._v("详细用法见 ： "),t("a",{attrs:{href:"https://github.com/tj/n",target:"_self",rel:"noopener noreferrer"}},[s._v("n: Node version management")]),s._v(" "),t("br"),s._v("\n注意："),t("br"),s._v("\nn 无法管理通过其他方式安装的 Node.js 版本实例(如官方提供的安装包、发行版软件源、手动编译)，也就说无法管理不是用 n 安装的node.js。"),t("br"),s._v("\nn 不支持在Windows上使用")])]),s._v(" "),t("h2",{attrs:{id:"发布包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布包"}},[s._v("#")]),s._v(" 发布包")]),s._v(" "),t("p",[s._v("在发布之前,首先需要让我们的包符合 npm 的规范,npm 有一套以 CommonJS 为基础包规范,但与 CommonJS并不完全一致,其主要差别在于必填字段的不同。通过使用 npm init 可以根据交互问答产生一个符合标准的 package.json。")]),s._v(" "),t("p",[s._v("npm init 运行示例：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\nname: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nversion: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \ndescription: \nentry point: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("index.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" command: \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" repository: \nkeywords: \nauthor: \nlicense: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ISC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nAbout to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" to /tmp/node/package.json:\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo '),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("Error: no test specified"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(' && exit 1"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"author"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nIs this ok? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("yes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[s._v("该文件就是一个符合 npm 规范的 package.json 文件。这里的 index.js 作为包的接口。")]),s._v(" "),t("blockquote",[t("p",[s._v("也可简单的使用 "),t("code",[s._v("npm init -y")]),s._v("。其中-y（代表yes）")])]),s._v(" "),t("p",[s._v("创建帐号：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("测试是否取得帐号：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("发布")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("更新包：修改 version字段，再重新发布")]),s._v(" "),t("p",[s._v("取消发布：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unpublish\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"npm-scripts-使用指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-scripts-使用指南"}},[s._v("#")]),s._v(" npm scripts 使用指南")]),s._v(" "),t("p",[s._v("Node 开发离不开 npm，而脚本功能是 npm 最强大、最常用的功能之一。\n本文介绍如何使用 npm 脚本（npm scripts）。")]),s._v(" "),t("h3",{attrs:{id:"什么是-npm-脚本？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-npm-脚本？"}},[s._v("#")]),s._v(" 什么是 npm 脚本？")]),s._v(" "),t("p",[s._v("npm 允许在package.json文件里面，使用scripts字段定义脚本命令。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node build.js"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("上面代码是package.json文件的一个片段，里面的scripts字段是一个对象。它的每一个属性，对应一段脚本。比如，build命令对应的脚本是node build.js。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同于执行")]),s._v("\n$ node build.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这些定义在package.json里面的脚本，就称为 npm 脚本。它的优点很多:")]),s._v(" "),t("ul",[t("li",[s._v("项目的相关脚本，可以集中在一个地方。")]),s._v(" "),t("li",[s._v("不同项目的脚本命令，只要功能相同，就可以有同样的对外接口。用户不需要知道怎么测试你的项目，只要运行npm run test即可。")]),s._v(" "),t("li",[s._v("可以利用 npm 提供的很多辅助功能。")])]),s._v(" "),t("p",[s._v("查看当前项目的所有 npm 脚本命令，可以使用不带任何参数的npm run命令。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),t("p",[s._v("npm 脚本的原理非常简单。每当执行npm run，就会自动新建一个 Shell，在这个 Shell 里面执行指定的脚本命令。因此，只要是 Shell（一般是 Bash）可以运行的命令，就可以写在 npm 脚本里面。")]),s._v(" "),t("p",[s._v("比较特别的是，"),t("code",[s._v("npm run")]),s._v("新建的这个 Shell，会将当前目录的"),t("code",[s._v("node_modules/.bin")]),s._v("子目录加入"),t("code",[s._v("PATH")]),s._v("变量，执行结束后，再将"),t("code",[s._v("PATH")]),s._v("变量恢复原样。"),t("br"),s._v("\n这意味着，当前目录的"),t("code",[s._v("node_modules/.bin")]),s._v("子目录里面的所有脚本，都可以直接用脚本名调用，而不必加上路径。比如，当前项目的依赖里面有 Mocha，只要直接写"),t("code",[s._v("mocha test")]),s._v("就可以了。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mocha test"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("而不用写成下面这样:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./node_modules/.bin/mocha test"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("由于 npm 脚本的唯一要求就是可以在 Shell 执行，因此它不一定是 Node 脚本，任何可执行文件都可以写在里面。"),t("br"),s._v("\nnpm 脚本的退出码，也遵守 Shell 脚本规则。如果退出码不是"),t("code",[s._v("0")]),s._v("，npm 就认为这个脚本执行失败。")]),s._v(" "),t("h3",{attrs:{id:"通配符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[s._v("#")]),s._v(" 通配符")]),s._v(" "),t("p",[s._v("由于 npm 脚本就是 Shell 脚本，因为可以使用 Shell 通配符。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint *.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint **/*.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面代码中，*表示任意文件名，**表示任意一层子目录。"),t("br"),s._v("\n如果要将通配符传入原始命令，防止被 Shell 转义，要将星号转义。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tap test/\\*.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"传参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传参"}},[s._v("#")]),s._v(" 传参")]),s._v(" "),t("p",[s._v("向 npm 脚本传入参数，要使用"),t("code",[s._v("--")]),s._v("标明。")]),s._v(" "),t("h3",{attrs:{id:"执行顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[s._v("#")]),s._v(" 执行顺序")]),s._v(" "),t("p",[s._v("如果 npm 脚本里面需要执行多个任务，那么需要明确它们的执行顺序。如果是并行执行（即同时的平行执行），可以使用 "),t("code",[s._v("&")]),s._v(" 符号。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script1.js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script2.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果是继发执行（即只有前一个任务成功，才执行下一个任务），可以使用&&符号。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script1.js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run script2.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"默认值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#默认值"}},[s._v("#")]),s._v(" 默认值")]),s._v(" "),t("p",[s._v("一般来说，npm 脚本由用户提供。但是，npm 对两个脚本提供了默认值。也就是说，这两个脚本不用定义，就可以直接使用。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node server.js"')]),s._v("，\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"install"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-gyp rebuild"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面代码中，"),t("code",[s._v("npm run start")]),s._v("的默认值是"),t("code",[s._v("node server.j")]),s._v("s，前提是项目根目录下有"),t("code",[s._v("server.js")]),s._v("这个脚本；"),t("code",[s._v("npm run install")]),s._v("的默认值是"),t("code",[s._v("node-gyp rebuild")]),s._v("，前提是项目根目录下有"),t("code",[s._v("binding.gyp")]),s._v("文件。")]),s._v(" "),t("h3",{attrs:{id:"钩子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#钩子"}},[s._v("#")]),s._v(" 钩子")]),s._v(" "),t("p",[s._v("npm 脚本有"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("两个钩子。举例来说，"),t("code",[s._v("build")]),s._v("脚本命令的钩子就是"),t("code",[s._v("prebuild")]),s._v("和"),t("code",[s._v("postbuild")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prebuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo I run before the build script"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=production webpack"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postbuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo I run after the build script"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("用户执行npm run build的时候，会自动按照下面的顺序执行。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run prebuild "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run postbuild\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("因此，可以在这两个钩子里面，完成一些准备工作和清理工作。下面是一个例子:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clean"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rimraf ./dist && mkdir dist"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prebuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run clean"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=production webpack"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("npm 默认提供下面这些钩子。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("prepublish，postpublish\npreinstall，postinstall\npreuninstall，postuninstall\npreversion，postversion\npretest，posttest\nprestop，poststop\nprestart，poststart\nprerestart，postrestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("自定义的脚本命令也可以加上"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("钩子。比如，"),t("code",[s._v("myscript")]),s._v("这个脚本命令，也有"),t("code",[s._v("premyscript")]),s._v("和"),t("code",[s._v("postmyscript")]),s._v("钩子。不过，双重的"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("无效，比如"),t("code",[s._v("prepretest")]),s._v("和"),t("code",[s._v("postposttest")]),s._v("是无效的。")]),s._v(" "),t("p",[s._v("npm 提供一个"),t("code",[s._v("npm_lifecycle_event")]),s._v("变量，返回当前正在运行的脚本名称，比如"),t("code",[s._v("pretest")]),s._v("、"),t("code",[s._v("test")]),s._v("、"),t("code",[s._v("posttest")]),s._v("等等。所以，可以利用这个变量，在同一个脚本文件里面，为不同的"),t("code",[s._v("npm scripts")]),s._v("命令编写代码。请看下面的例子:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("const TARGET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" process.env.npm_lifecycle_event"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console.log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("Running the "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" task"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pretest'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console.log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("Running the pretest task"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'posttest'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console.log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("Running the posttest task"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"简写形式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简写形式"}},[s._v("#")]),s._v(" 简写形式")]),s._v(" "),t("p",[s._v("四个常用的 npm 脚本有简写形式。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("npm start")]),s._v("是"),t("code",[s._v("npm run start")]),s._v("的简写")]),s._v(" "),t("li",[t("code",[s._v("npm stop")]),s._v("是"),t("code",[s._v("npm run stop")]),s._v("的简写")]),s._v(" "),t("li",[t("code",[s._v("npm test")]),s._v("是"),t("code",[s._v("npm run test")]),s._v("的简写")]),s._v(" "),t("li",[t("code",[s._v("npm restart")]),s._v("是"),t("code",[s._v("npm run stop && npm run restart && npm run start")]),s._v("的简写")])]),s._v(" "),t("p",[t("code",[s._v("npm start")]),s._v("、"),t("code",[s._v("npm stop")]),s._v("和"),t("code",[s._v("npm restart")]),s._v("都比较好理解，而"),t("code",[s._v("npm restart")]),s._v("是一个复合命令，实际上会执行三个脚本命令："),t("code",[s._v("stop")]),s._v("、"),t("code",[s._v("restart")]),s._v("、"),t("code",[s._v("start")]),s._v("。具体的执行顺序如下:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("prerestart\nprestop\nstop\npoststop\nrestart\nprestart\nstart\npoststart\npostrestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),t("p",[s._v("npm 脚本有一个非常强大的功能，就是可以使用 npm 的内部变量。")]),s._v(" "),t("p",[s._v("首先，通过"),t("code",[s._v("npm_package_")]),s._v("前缀，npm 脚本可以拿到"),t("code",[s._v("package.json")]),s._v("里面的字段。比如，下面是一个"),t("code",[s._v("package.json")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.2.5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node view.js"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("那么，变量npm_package_name返回foo，变量npm_package_version返回1.2.5。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// view.js")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_package_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// foo")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_package_version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.2.5")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面代码中，我们通过环境变量"),t("code",[s._v("process.env")]),s._v("对象，拿到"),t("code",[s._v("package.json")]),s._v("的字段值。如果是 Bash 脚本，可以用"),t("code",[s._v("$npm_package_name")]),s._v("和"),t("code",[s._v("$npm_package_version")]),s._v("取到这两个值。")]),s._v(" "),t("p",[t("code",[s._v("npm_package_")]),s._v("前缀也支持嵌套的"),t("code",[s._v("package.json")]),s._v("字段。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"repository"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nscripts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_package_repository_type"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("上面代码中，"),t("code",[s._v("repository")]),s._v("字段的"),t("code",[s._v("type")]),s._v("属性，可以通过"),t("code",[s._v("npm_package_repository_type")]),s._v("取到")]),s._v(" "),t("p",[s._v("下面是另外一个例子")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"install"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面代码中，"),t("code",[s._v("npm_package_scripts_install")]),s._v("变量的值等于"),t("code",[s._v("foo.js")]),s._v("。")]),s._v(" "),t("p",[s._v("然后，npm 脚本还可以通过"),t("code",[s._v("npm_config_")]),s._v("前缀，拿到 npm 的配置变量，即"),t("code",[s._v("npm config get xxx")]),s._v("命令返回的值。比如，当前模块的发行标签，可以通过"),t("code",[s._v("npm_config_tag")]),s._v("取到。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_config_tag"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("注意，package.json里面的config对象，可以被环境变量覆盖。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"port"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8080"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node server.js"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("上面代码中，npm_package_config_port变量返回的是8080。这个值可以用下面的方法覆盖。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" foo:port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("最后，env命令可以列出所有环境变量。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"env"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"env"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"常用脚本示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用脚本示例"}},[s._v("#")]),s._v(" 常用脚本示例")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clean"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rimraf dist/*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 本地搭建一个 HTTP 服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http-server -p 9090 dist/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打开浏览器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"open:dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"opener http://localhost:9090"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 实时刷新")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"livereload"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"live-reload --port 9091 dist/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构建 HTML 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:html"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jade index.jade > dist/index.html"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只要 CSS 文件有变动，就重新执行构建")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"watch:css"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"watch 'npm run build:css' assets/styles/\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只要 HTML 文件有变动，就重新执行构建")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"watch:html"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"watch 'npm run build:html' assets/html\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 部署到 Amazon S3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"deploy:prod"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s3-cli sync ./dist/ s3://example-com/prod-site/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构建 favicon")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:favicon"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node scripts/favicon.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h2",{attrs:{id:"npm-模块安装机制简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-模块安装机制简介"}},[s._v("#")]),s._v(" npm 模块安装机制简介")]),s._v(" "),t("p",[s._v("npm 是 Node 的模块管理器，功能极其强大。它是 Node 获得成功的重要原因之一。正因为有了npm，我们只要一行命令，就能安装别人写好的模块:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("本文介绍 npm 模块安装机制的细节，以及如何解决安装速度慢的问题。")]),s._v(" "),t("h3",{attrs:{id:"从-npm-install-说起"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从-npm-install-说起"}},[s._v("#")]),s._v(" 从 npm install 说起")]),s._v(" "),t("p",[t("code",[s._v("npm install")]),s._v(" 命令用来安装模块到"),t("code",[s._v("node_modules")]),s._v("目录。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("安装之前，"),t("code",[s._v("npm install")]),s._v("会先检查，"),t("code",[s._v("node_modules")]),s._v("目录之中是否已经存在指定模块。如果存在，就不再重新安装了，即使远程仓库已经有了一个新版本，也是如此。"),t("br"),s._v("\n如果你希望，一个模块不管是否安装过，npm 都要强制重新安装，可以使用-f或--force参数。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --force\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"npm-update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-update"}},[s._v("#")]),s._v(" npm update")]),s._v(" "),t("p",[s._v("如果想更新已安装模块，就要用到"),t("code",[s._v("npm update")]),s._v("命令。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("它会先到远程仓库查询最新版本，然后查询本地版本。如果本地版本不存在，或者远程版本较新，就会安装。")]),s._v(" "),t("h3",{attrs:{id:"registry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#registry"}},[s._v("#")]),s._v(" registry")]),s._v(" "),t("p",[t("code",[s._v("npm update")]),s._v("命令怎么知道每个模块的最新版本呢？")]),s._v(" "),t("p",[s._v("答案是 npm 模块仓库提供了一个查询服务，叫做 "),t("code",[s._v("registry")]),s._v(" 。以 "),t("code",[s._v("npmjs.org")]),s._v(" 为例，它的查询服务网址是 "),t("a",{attrs:{href:"https://registry.npmjs.org/",target:"_self",rel:"noopener noreferrer"}},[s._v("https://registry.npmjs.org/")]),s._v("。"),t("br"),s._v("\n这个网址后面跟上模块名，就会得到一个 JSON 对象，里面是该模块所有版本的信息。比如，访问 "),t("a",{attrs:{href:"https://registry.npmjs.org/react",target:"_self",rel:"noopener noreferrer"}},[s._v("https://registry.npmjs.org/react")]),s._v("，就会看到 react 模块所有版本的信息。它跟下面命令的效果是一样的:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view react\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm view 的别名")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" info react\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" show react\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("v")]),s._v(" react\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("registry 网址的模块名后面，还可以跟上版本号或者标签，用来查询某个具体版本的信息。比如， 访问 "),t("code",[s._v("https://registry.npmjs.org/react/v0.14.6")]),s._v(" ，就可以看到 React 的 0.14.6 版。"),t("br"),s._v("返回的 JSON 对象里面，有一个dist.tarball属性，是该版本压缩包的网址。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  shasum"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" '"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("57")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("cf"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8747")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("483759")]),s._v("ad"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("de"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("fa"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v("fb"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("cf"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("a'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  tarball"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//registry.npmjs.org/react/-/react-0.14.6.tgz' ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("到这个网址下载压缩包，在本地解压，就得到了模块的源码。"),t("code",[s._v("npm install")]),s._v("和"),t("code",[s._v("npm update")]),s._v("命令，都是通过这种方式安装模块的。")]),s._v(" "),t("h3",{attrs:{id:"缓存目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缓存目录"}},[s._v("#")]),s._v(" 缓存目录")]),s._v(" "),t("p",[t("code",[s._v("npm install")]),s._v("或"),t("code",[s._v("npm update")]),s._v("命令，从 registry 下载压缩包之后，都存放在本地的缓存目录。")]),s._v(" "),t("p",[s._v("这个缓存目录，在 Linux 或 Mac 默认是用户主目录下的"),t("code",[s._v(".npm")]),s._v("目录，在 Windows 默认是"),t("code",[s._v("%AppData%/npm-cache")]),s._v("。通过配置命令，可以查看这个目录的具体位置")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get cache\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.npm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("你最好浏览一下这个目录")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" ~/.npm \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("你会看到里面存放着大量的模块，储存结构是{cache}/{name}/{version}。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" react\n~/.npm/react/react/0.14.6/\n~/.npm/react/react/0.14.6/package.tgz\n~/.npm/react/react/0.14.6/package/\n~/.npm/react/react/0.14.6/package/package.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("每个模块的每个版本，都有一个自己的子目录，里面是代码的压缩包"),t("code",[s._v("package.tgz")]),s._v("文件，以及一个描述文件"),t("code",[s._v("package/package.json")]),s._v("。")]),s._v(" "),t("p",[s._v("除此之外，还会生成一个"),t("code",[s._v("{cache}/{hostname}/{path}/.cache.json")]),s._v("文件。比如，从 npm 官方仓库下载 react 模块的时候，就会生成"),t("code",[s._v("registry.npmjs.org/react/.cache.json")]),s._v("文件。\n这个文件保存的是，所有版本的信息，以及该模块最近修改的时间和最新一次请求时服务器返回的 ETag")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"time"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modified"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2016-01-06T23:52:45.571Z"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_etag"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\"7S37I0775YLURCFIO8N85FO0F\\""')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("对于一些不是很关键的操作（比如"),t("code",[s._v("npm search")]),s._v("或"),t("code",[s._v("npm view")]),s._v("），npm会先查看"),t("code",[s._v(".cache.jso")]),s._v("n里面的模块最近更新时间，跟当前时间的差距，是不是在可接受的范围之内。如果是的，就不再向远程仓库发出请求，而是直接返回"),t("code",[s._v(".cache.json")]),s._v("的数据。")]),s._v(" "),t("p",[t("code",[s._v(".npm")]),s._v("目录保存着大量文件，清空它的命令如下")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf ~/.npm/*\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" cache clean\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"模块的安装过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模块的安装过程"}},[s._v("#")]),s._v(" 模块的安装过程")]),s._v(" "),t("p",[s._v("总结一下，Node模块的安装过程是这样的。")]),s._v(" "),t("ul",[t("li",[s._v("发出npm install命令")]),s._v(" "),t("li",[s._v("npm 向 registry 查询模块压缩包的网址")]),s._v(" "),t("li",[s._v("下载压缩包，存放在~/.npm目录")]),s._v(" "),t("li",[s._v("解压压缩包到当前项目的node_modules目录")])]),s._v(" "),t("p",[s._v("注意，一个模块安装以后，本地其实保存了两份。一份是"),t("code",[s._v("~/.npm")]),s._v("目录下的压缩包，另一份是"),t("code",[s._v("node_modules")]),s._v("目录下解压后的代码。"),t("br"),s._v("\n但是，运行npm install的时候，只会检查node_modules目录，而不会检查~/.npm目录。也就是说，如果一个模块在～/.npm下有压缩包，但是没有安装在node_modules目录中，npm 依然会从远程仓库下载一次新的压缩包。"),t("br"),s._v("\n这种行为固然可以保证总是取得最新的代码，但有时并不是我们想要的。最大的问题是，它会极大地影响安装速度。即使某个模块的压缩包就在缓存目录中，也要去远程仓库下载，这怎么可能不慢呢？")]),s._v(" "),t("h3",{attrs:{id:"cache-min-参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cache-min-参数"}},[s._v("#")]),s._v(" --cache-min 参数")]),s._v(" "),t("p",[s._v("为了解决这些问题，npm 提供了一个--cache-min参数，用于从缓存目录安装模块。")]),s._v(" "),t("p",[t("code",[s._v("--cache-min")]),s._v("参数指定一个时间（单位为分钟），只有超过这个时间的模块，才会从 registry 下载")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --cache-min "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999999")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面命令指定，只有超过999999分钟的模块，才从 registry 下载。实际上就是指定，所有模块都从缓存安装，这样就大大加快了下载速度。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("它还有另一种写法。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --cache-min Infinity "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("但是，这并不等于离线模式，这时仍然需要网络连接。因为现在的"),t("code",[s._v("--cache-min")]),s._v("实现有一些问题。")]),s._v(" "),t("blockquote",[t("p",[s._v("（1）如果指定模块不在缓存目录，那么 npm 会连接 registry，下载最新版本。这没有问题，但是如果指定模块在缓存目录之中，npm 也会连接 registry，发出指定模块的 etag ，服务器返回状态码304，表示不需要重新下载压缩包。"),t("br"),s._v("\n（2）如果某个模块已经在缓存之中，但是版本低于要求，npm会直接报错，而不是去 registry 下载最新版本。")])]),s._v(" "),t("blockquote",[t("p",[s._v("npm 团队知道存在这些问题，正在重写 cache。并且，将来会提供一个"),t("code",[s._v("--offlin")]),s._v("e参数，使得 npm 可以在离线情况下使用。"),t("br"),s._v("\n不过，这些改进没有日程表。所以，当前使用--cache-min改进安装速度，是有问题的。")])]),s._v(" "),t("h3",{attrs:{id:"离线安装的解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#离线安装的解决方案"}},[s._v("#")]),s._v(" 离线安装的解决方案")]),s._v(" "),t("p",[s._v("社区已经为npm的离线使用，提出了几种解决方案。它们可以大大加快模块安装的速度。")]),s._v(" "),t("p",[s._v("解决方案大致分成三类:")]),s._v(" "),t("p",[t("strong",[s._v("第一类，Registry 代理")])]),s._v(" "),t("ul",[t("li",[s._v("npm-proxy-cache")]),s._v(" "),t("li",[s._v("local-npm")]),s._v(" "),t("li",[s._v("npm-lazy")])]),s._v(" "),t("p",[s._v("上面三个模块的用法很类似，都是在本机起一个 Registry 服务，所有npm install命令都要通过这个服务代理。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm-proxy-cache")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --proxy http://localhost:8080 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --https-proxy http://localhost:8080 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --strict-ssl "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# local-npm")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://127.0.0.1:5080\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm-lazy")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --registry http://localhost:8080/ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" socket.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("有了本机的Registry服务，就能完全实现缓存安装，可以实现离线使用。")]),s._v(" "),t("p",[t("strong",[s._v("第二类，npm install替代")])]),s._v(" "),t("p",[s._v("如果能够改变"),t("code",[s._v("npm install")]),s._v("的行为，就能实现缓存安装。"),t("code",[s._v("npm-cache")]),s._v(" 工具就是这个思路。凡是使用"),t("code",[s._v("npm install")]),s._v("的地方，都可以使用"),t("code",[s._v("npm-cache")]),s._v("替代。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ npm-cache "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("第三类，node_modules作为缓存目录")])]),s._v(" "),t("p",[s._v("这个方案的思路是，不使用.npm缓存，而是使用项目的node_modules目录作为缓存")]),s._v(" "),t("ul",[t("li",[s._v("Freight")]),s._v(" "),t("li",[s._v("npmbox")])]),s._v(" "),t("p",[s._v("上面两个工具，都能将项目的node_modules目录打成一个压缩包，以后安装的时候，就从这个压缩包之中取出文件")])])}),[],!1,null,null,null);a.default=e.exports}}]);