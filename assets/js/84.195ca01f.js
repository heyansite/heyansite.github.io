(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{666:function(s,t,a){s.exports=a.p+"assets/img/cdi-1.45729261.jpg"},894:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"centos云服务器安装docker环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos云服务器安装docker环境"}},[s._v("#")]),s._v(" CentOS云服务器安装Docker环境")]),s._v(" "),e("p",[s._v("因为采用的是阿里云的CentOS服务器，所以本篇是基于CentOS的Docker环境安装与配置。不说了，直接上安装步骤。")]),s._v(" "),e("h2",{attrs:{id:"安装步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[s._v("#")]),s._v(" "),e("strong",[s._v("安装步骤")])]),s._v(" "),e("h4",{attrs:{id:"_1-确定系统是centos7及以上版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-确定系统是centos7及以上版本"}},[s._v("#")]),s._v(" "),e("strong",[s._v("1. 确定系统是CentOS7及以上版本")])]),s._v(" "),e("p",[e("code",[s._v("cat /etc/redhat-release")])]),s._v(" "),e("h4",{attrs:{id:"_2-yum安装gcc相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-yum安装gcc相关"}},[s._v("#")]),s._v(" 2."),e("strong",[s._v("yum安装gcc相关")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\nyum -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("下面安装步骤可以参考官网：https://docs.docker.com/install/linux/docker-ce/centos/")])]),s._v(" "),e("h4",{attrs:{id:"_3-卸载旧版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-卸载旧版本"}},[s._v("#")]),s._v(" 3."),e("strong",[s._v("卸载旧版本")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("It’s OK if "),e("code",[s._v("yum")]),s._v(" reports that none of these packages are installed.")]),s._v(" "),e("h4",{attrs:{id:"_4-安装需要的软件包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装需要的软件包"}},[s._v("#")]),s._v(" "),e("strong",[s._v("4")]),s._v(".安装需要的软件包")]),s._v(" "),e("p",[s._v("Install required packages. "),e("code",[s._v("yum-utils")]),s._v(" provides the "),e("code",[s._v("yum-config-manager")]),s._v(" utility, and "),e("code",[s._v("device-mapper-persistent-data")]),s._v(" and "),e("code",[s._v("lvm2")]),s._v(" are required by the devicemapper storage driver.")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  device-mapper-persistent-data "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  lvm2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("Use the following command to set up the "),e("strong",[s._v("stable")]),s._v(" repository.")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#国外镜像源（慢）")]),s._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#阿里云镜像源（快）")]),s._v("\nyum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"_5-更新yum软件包索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-更新yum软件包索引"}},[s._v("#")]),s._v(" 5."),e("strong",[s._v("更新yum软件包索引")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum makecache fast\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_6-安装docker-ce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-安装docker-ce"}},[s._v("#")]),s._v(" 6."),e("strong",[s._v("安装Docker CE")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_7-启动docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-启动docker"}},[s._v("#")]),s._v(" 7."),e("strong",[s._v("启动Docker")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl start docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_8-测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-测试"}},[s._v("#")]),s._v(" 8.测试")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker verison \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Verify that Docker Engine - Community is installed correctly by running the hello-world image")]),s._v("\ndocker run hello-world\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("br"),s._v(" "),e("p",[e("font",{staticStyle:{"font-weight":"600"},attrs:{color:"orange"}},[s._v("配置阿里云加速")])],1),s._v(" "),e("h4",{attrs:{id:"_9-配置阿里云镜像加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-配置阿里云镜像加速"}},[s._v("#")]),s._v(" 9."),e("strong",[s._v("配置阿里云镜像加速")])]),s._v(" "),e("p",[s._v("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors")]),s._v(" "),e("p",[s._v("具体可在个人界面“容器镜像服务”里面找到相关服务,如图")]),s._v(" "),e("div",{staticStyle:{display:"flex"}},[e("img",{staticStyle:{zoom:"40%",display:"block"},attrs:{src:a(666),alt:"容器镜像服务",align:"left"}})]),s._v(" "),e("br"),s._v(" "),e("ul",[e("li",[e("strong",[s._v("注册阿里云账号")])]),s._v(" "),e("li",[e("strong",[s._v("配置镜像加速器")])])]),s._v(" "),e("blockquote",[e("p",[s._v("针对Docker客户端版本大于 1.10.0 的用户")]),s._v(" "),e("p",[s._v("您可以通过修改daemon配置文件"),e("code",[s._v("/etc/docker/daemon.json")]),s._v("来使用加速器")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n "registry-mirrors": ["https://xxxxxx.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])]),s._v(" "),e("h4",{attrs:{id:"_10-如需卸载，参考如下命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-如需卸载，参考如下命令"}},[s._v("#")]),s._v(" "),e("div",{staticStyle:{background:"#ffc862"}},[s._v("10."),e("strong",[s._v("如需卸载，参考如下命令")])])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl stop docker\nyum -y remove docker-ce\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/lib/docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);