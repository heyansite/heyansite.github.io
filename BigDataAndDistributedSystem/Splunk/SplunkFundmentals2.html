<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Splunk Fundamentals 2 | Yan&#39;s Blog Home</title>
    <meta name="description" content="Personal blog site">
    
    
    <link rel="preload" href="/assets/css/0.styles.659f981c.css" as="style"><link rel="preload" href="/assets/js/app.2ba1140b.js" as="script"><link rel="preload" href="/assets/js/2.858e58ff.js" as="script"><link rel="preload" href="/assets/js/24.f151ffcb.js" as="script"><link rel="prefetch" href="/assets/js/10.5dcc1f52.js"><link rel="prefetch" href="/assets/js/100.0327e00b.js"><link rel="prefetch" href="/assets/js/101.404f187c.js"><link rel="prefetch" href="/assets/js/102.d78878ec.js"><link rel="prefetch" href="/assets/js/103.a682f6f1.js"><link rel="prefetch" href="/assets/js/104.d831bcb5.js"><link rel="prefetch" href="/assets/js/105.afbf1884.js"><link rel="prefetch" href="/assets/js/106.8e9709d3.js"><link rel="prefetch" href="/assets/js/107.9712aa22.js"><link rel="prefetch" href="/assets/js/108.4158fdb6.js"><link rel="prefetch" href="/assets/js/109.ae61a303.js"><link rel="prefetch" href="/assets/js/11.34e3d90e.js"><link rel="prefetch" href="/assets/js/110.0abce6c9.js"><link rel="prefetch" href="/assets/js/111.b5c958e5.js"><link rel="prefetch" href="/assets/js/112.fdacfaf6.js"><link rel="prefetch" href="/assets/js/113.9d95243d.js"><link rel="prefetch" href="/assets/js/114.f759f9b9.js"><link rel="prefetch" href="/assets/js/115.1b1f9f3d.js"><link rel="prefetch" href="/assets/js/116.1e5e62e4.js"><link rel="prefetch" href="/assets/js/117.952db9d4.js"><link rel="prefetch" href="/assets/js/118.ed9df468.js"><link rel="prefetch" href="/assets/js/119.f19ee9e0.js"><link rel="prefetch" href="/assets/js/12.cd237cda.js"><link rel="prefetch" href="/assets/js/120.24dbecef.js"><link rel="prefetch" href="/assets/js/121.0aa2d47c.js"><link rel="prefetch" href="/assets/js/122.5205ca42.js"><link rel="prefetch" href="/assets/js/123.25aa20a6.js"><link rel="prefetch" href="/assets/js/124.420b2a92.js"><link rel="prefetch" href="/assets/js/125.091331f4.js"><link rel="prefetch" href="/assets/js/126.471b335f.js"><link rel="prefetch" href="/assets/js/127.60ffdb36.js"><link rel="prefetch" href="/assets/js/128.9c5c36ef.js"><link rel="prefetch" href="/assets/js/129.36fd802b.js"><link rel="prefetch" href="/assets/js/13.de2ffe9f.js"><link rel="prefetch" href="/assets/js/130.822de8a4.js"><link rel="prefetch" href="/assets/js/131.697750e2.js"><link rel="prefetch" href="/assets/js/132.fd5faa78.js"><link rel="prefetch" href="/assets/js/133.cf327ef4.js"><link rel="prefetch" href="/assets/js/134.6cdb8690.js"><link rel="prefetch" href="/assets/js/135.906c8800.js"><link rel="prefetch" href="/assets/js/136.43585d13.js"><link rel="prefetch" href="/assets/js/137.3c7ddb41.js"><link rel="prefetch" href="/assets/js/138.e3274ead.js"><link rel="prefetch" href="/assets/js/139.7fa38b58.js"><link rel="prefetch" href="/assets/js/14.9d6406e7.js"><link rel="prefetch" href="/assets/js/140.1b026dad.js"><link rel="prefetch" href="/assets/js/141.c1adfec5.js"><link rel="prefetch" href="/assets/js/142.ed2a4a22.js"><link rel="prefetch" href="/assets/js/143.af96e2f9.js"><link rel="prefetch" href="/assets/js/144.923a7d38.js"><link rel="prefetch" href="/assets/js/145.d88163de.js"><link rel="prefetch" href="/assets/js/146.2134dd3e.js"><link rel="prefetch" href="/assets/js/147.9925c468.js"><link rel="prefetch" href="/assets/js/148.109297cc.js"><link rel="prefetch" href="/assets/js/149.ae529d47.js"><link rel="prefetch" href="/assets/js/15.fe3428fa.js"><link rel="prefetch" href="/assets/js/150.6bf9657f.js"><link rel="prefetch" href="/assets/js/151.603cf1f9.js"><link rel="prefetch" href="/assets/js/152.b64ef399.js"><link rel="prefetch" href="/assets/js/153.fd5cde7c.js"><link rel="prefetch" href="/assets/js/154.8cedd5d3.js"><link rel="prefetch" href="/assets/js/155.042308eb.js"><link rel="prefetch" href="/assets/js/156.1f58dd5a.js"><link rel="prefetch" href="/assets/js/157.69e07481.js"><link rel="prefetch" href="/assets/js/158.40b656df.js"><link rel="prefetch" href="/assets/js/159.823c56a4.js"><link rel="prefetch" href="/assets/js/16.7976352c.js"><link rel="prefetch" href="/assets/js/160.93aba24e.js"><link rel="prefetch" href="/assets/js/161.3ae7729a.js"><link rel="prefetch" href="/assets/js/162.8092cc22.js"><link rel="prefetch" href="/assets/js/163.3c82e51b.js"><link rel="prefetch" href="/assets/js/164.d358ee7b.js"><link rel="prefetch" href="/assets/js/165.60d778eb.js"><link rel="prefetch" href="/assets/js/166.54d7340a.js"><link rel="prefetch" href="/assets/js/167.5fd6aaa3.js"><link rel="prefetch" href="/assets/js/168.205929f8.js"><link rel="prefetch" href="/assets/js/169.873b90b1.js"><link rel="prefetch" href="/assets/js/17.72e8ffa6.js"><link rel="prefetch" href="/assets/js/170.68c49359.js"><link rel="prefetch" href="/assets/js/171.d8f93304.js"><link rel="prefetch" href="/assets/js/172.6b496cc7.js"><link rel="prefetch" href="/assets/js/173.f276a0ce.js"><link rel="prefetch" href="/assets/js/174.09cb41e2.js"><link rel="prefetch" href="/assets/js/175.c77ce8d9.js"><link rel="prefetch" href="/assets/js/176.01ab9f3f.js"><link rel="prefetch" href="/assets/js/177.2f91a2a4.js"><link rel="prefetch" href="/assets/js/178.5f0a0527.js"><link rel="prefetch" href="/assets/js/179.0d14e948.js"><link rel="prefetch" href="/assets/js/18.8264b169.js"><link rel="prefetch" href="/assets/js/180.9a15f295.js"><link rel="prefetch" href="/assets/js/181.d5bcbada.js"><link rel="prefetch" href="/assets/js/182.571b87a8.js"><link rel="prefetch" href="/assets/js/183.b87f5a38.js"><link rel="prefetch" href="/assets/js/184.90ecbd35.js"><link rel="prefetch" href="/assets/js/185.3a38f733.js"><link rel="prefetch" href="/assets/js/186.881a0fab.js"><link rel="prefetch" href="/assets/js/187.17663dea.js"><link rel="prefetch" href="/assets/js/188.471fcd9b.js"><link rel="prefetch" href="/assets/js/189.6d486653.js"><link rel="prefetch" href="/assets/js/19.e6227b20.js"><link rel="prefetch" href="/assets/js/190.357b4cc8.js"><link rel="prefetch" href="/assets/js/191.ccf9ae83.js"><link rel="prefetch" href="/assets/js/192.3ee45cf5.js"><link rel="prefetch" href="/assets/js/193.2fbcbc68.js"><link rel="prefetch" href="/assets/js/194.61d0acd9.js"><link rel="prefetch" href="/assets/js/195.33b772c3.js"><link rel="prefetch" href="/assets/js/196.7d35848a.js"><link rel="prefetch" href="/assets/js/197.4b958d27.js"><link rel="prefetch" href="/assets/js/198.dfbfba98.js"><link rel="prefetch" href="/assets/js/199.f6c7aacb.js"><link rel="prefetch" href="/assets/js/20.65ad9b00.js"><link rel="prefetch" href="/assets/js/200.6a05302e.js"><link rel="prefetch" href="/assets/js/201.be446c97.js"><link rel="prefetch" href="/assets/js/202.d058ca1d.js"><link rel="prefetch" href="/assets/js/203.ef2b609c.js"><link rel="prefetch" href="/assets/js/204.dab38ee5.js"><link rel="prefetch" href="/assets/js/21.300f7dfb.js"><link rel="prefetch" href="/assets/js/22.0ed457bc.js"><link rel="prefetch" href="/assets/js/23.9cf0f43d.js"><link rel="prefetch" href="/assets/js/25.680a763b.js"><link rel="prefetch" href="/assets/js/26.6a5f804d.js"><link rel="prefetch" href="/assets/js/27.98408441.js"><link rel="prefetch" href="/assets/js/28.acbefbd1.js"><link rel="prefetch" href="/assets/js/29.fbd2340a.js"><link rel="prefetch" href="/assets/js/3.753236a7.js"><link rel="prefetch" href="/assets/js/30.30b44255.js"><link rel="prefetch" href="/assets/js/31.510d262b.js"><link rel="prefetch" href="/assets/js/32.c204bc79.js"><link rel="prefetch" href="/assets/js/33.5fa66039.js"><link rel="prefetch" href="/assets/js/34.6db47b26.js"><link rel="prefetch" href="/assets/js/35.fcb88dd5.js"><link rel="prefetch" href="/assets/js/36.e294e99d.js"><link rel="prefetch" href="/assets/js/37.fe541556.js"><link rel="prefetch" href="/assets/js/38.94af8189.js"><link rel="prefetch" href="/assets/js/39.e7017f9b.js"><link rel="prefetch" href="/assets/js/4.1c3159e6.js"><link rel="prefetch" href="/assets/js/40.b7a1deeb.js"><link rel="prefetch" href="/assets/js/41.ae4d7d1e.js"><link rel="prefetch" href="/assets/js/42.5dc5c7f6.js"><link rel="prefetch" href="/assets/js/43.73610732.js"><link rel="prefetch" href="/assets/js/44.2b0e19f3.js"><link rel="prefetch" href="/assets/js/45.903efdc0.js"><link rel="prefetch" href="/assets/js/46.0684656f.js"><link rel="prefetch" href="/assets/js/47.6425b35e.js"><link rel="prefetch" href="/assets/js/48.43663ba9.js"><link rel="prefetch" href="/assets/js/49.34841bc0.js"><link rel="prefetch" href="/assets/js/5.d3774f5f.js"><link rel="prefetch" href="/assets/js/50.48ce1d7e.js"><link rel="prefetch" href="/assets/js/51.1820aa29.js"><link rel="prefetch" href="/assets/js/52.5317c537.js"><link rel="prefetch" href="/assets/js/53.71b86df9.js"><link rel="prefetch" href="/assets/js/54.31ed2a5e.js"><link rel="prefetch" href="/assets/js/55.4f9933ab.js"><link rel="prefetch" href="/assets/js/56.beb74e07.js"><link rel="prefetch" href="/assets/js/57.705bc19e.js"><link rel="prefetch" href="/assets/js/58.f5fd656b.js"><link rel="prefetch" href="/assets/js/59.cc8ae217.js"><link rel="prefetch" href="/assets/js/6.f082ca37.js"><link rel="prefetch" href="/assets/js/60.fc3cf484.js"><link rel="prefetch" href="/assets/js/61.b5032b43.js"><link rel="prefetch" href="/assets/js/62.64d7637a.js"><link rel="prefetch" href="/assets/js/63.2a71075b.js"><link rel="prefetch" href="/assets/js/64.21eb4820.js"><link rel="prefetch" href="/assets/js/65.11535a8c.js"><link rel="prefetch" href="/assets/js/66.d9c62638.js"><link rel="prefetch" href="/assets/js/67.5782c958.js"><link rel="prefetch" href="/assets/js/68.35886dae.js"><link rel="prefetch" href="/assets/js/69.934aa057.js"><link rel="prefetch" href="/assets/js/7.9a79fd87.js"><link rel="prefetch" href="/assets/js/70.53c7c7a2.js"><link rel="prefetch" href="/assets/js/71.0e82b1c6.js"><link rel="prefetch" href="/assets/js/72.1da0eaf9.js"><link rel="prefetch" href="/assets/js/73.3dabc9cd.js"><link rel="prefetch" href="/assets/js/74.b2ae43f6.js"><link rel="prefetch" href="/assets/js/75.55bf2044.js"><link rel="prefetch" href="/assets/js/76.2f88e50b.js"><link rel="prefetch" href="/assets/js/77.d916e87e.js"><link rel="prefetch" href="/assets/js/78.0e80a77d.js"><link rel="prefetch" href="/assets/js/79.03bce65e.js"><link rel="prefetch" href="/assets/js/8.60d5a8a9.js"><link rel="prefetch" href="/assets/js/80.96678f59.js"><link rel="prefetch" href="/assets/js/81.75ffa4d3.js"><link rel="prefetch" href="/assets/js/82.41c1aeb7.js"><link rel="prefetch" href="/assets/js/83.16d5e455.js"><link rel="prefetch" href="/assets/js/84.195ca01f.js"><link rel="prefetch" href="/assets/js/85.d850d4dd.js"><link rel="prefetch" href="/assets/js/86.32d87d56.js"><link rel="prefetch" href="/assets/js/87.5f97a4f6.js"><link rel="prefetch" href="/assets/js/88.f5b0bbdb.js"><link rel="prefetch" href="/assets/js/89.9f9150f5.js"><link rel="prefetch" href="/assets/js/9.74db15a0.js"><link rel="prefetch" href="/assets/js/90.f69286ce.js"><link rel="prefetch" href="/assets/js/91.c9995055.js"><link rel="prefetch" href="/assets/js/92.e992da4f.js"><link rel="prefetch" href="/assets/js/93.14137340.js"><link rel="prefetch" href="/assets/js/94.c8228a63.js"><link rel="prefetch" href="/assets/js/95.bbb7ce03.js"><link rel="prefetch" href="/assets/js/96.ce87793d.js"><link rel="prefetch" href="/assets/js/97.4fdd8a0b.js"><link rel="prefetch" href="/assets/js/98.74cfc635.js"><link rel="prefetch" href="/assets/js/99.abdd1b46.js">
    <link rel="stylesheet" href="/assets/css/0.styles.659f981c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yan's Blog Home</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>大数据和分布式系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统理论</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式协调服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据摄取 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据流 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据存储 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据处理 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析 Layer (OLAP)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统基础框架Hadoop</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Data Platform - Splunk</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BigDataAndDistributedSystem/Splunk/" class="sidebar-link">Data Platform - Splunk</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals1.html" class="sidebar-link">Splunk Fundamentals 1</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html" class="active sidebar-link">Splunk Fundamentals 2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#beyond-search-fundamentals" class="sidebar-link">Beyond Search Fundamentals</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#basic-search-review" class="sidebar-link">Basic Search Review</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transforming-search-commands" class="sidebar-link">Transforming Search Commands</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#case-sensitivity-–-sensitive" class="sidebar-link">Case Sensitivity – Sensitive</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#case-sensitivity-–-insensitive" class="sidebar-link">Case Sensitivity – Insensitive</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#how-splunk-searches-–-buckets" class="sidebar-link">How Splunk Searches – Buckets</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#how-splunk-searches-–-searching" class="sidebar-link">How Splunk Searches – Searching</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#general-search-practices-推荐" class="sidebar-link">General Search Practices (推荐)</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#reviewing-search-mode-–-fast-smart-verbose" class="sidebar-link">Reviewing Search Mode – Fast/Smart/Verbose</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#search-performance-–-types-of-searches" class="sidebar-link">Search Performance – Types of Searches</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#search-job-inspector" class="sidebar-link">Search Job Inspector</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#commands-for-visualizations" class="sidebar-link">Commands for Visualizations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#visualization-types" class="sidebar-link">Visualization Types</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#chart-command" class="sidebar-link">chart Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#timechart-command" class="sidebar-link">timechart Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transforming-command-summary" class="sidebar-link">Transforming Command Summary</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#advanced-visualizations" class="sidebar-link">Advanced Visualizations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#trendline-command" class="sidebar-link">trendline Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#iplocation-command" class="sidebar-link">iplocation Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#geostats-command" class="sidebar-link">geostats Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#choropleth-map" class="sidebar-link">Choropleth Map</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#geom-command" class="sidebar-link">geom Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#viewing-results-as-a-single-value" class="sidebar-link">Viewing Results as a Single Value</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#adding-totals-auto-command" class="sidebar-link">Adding Totals (Auto &amp; Command)</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#filtering-and-formatting-data" class="sidebar-link">Filtering and Formatting Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-overview" class="sidebar-link">eval Command (overview)</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-–-convert-values" class="sidebar-link">eval Command – Convert Values</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-–-round-values" class="sidebar-link">eval Command – Round Values</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-–-calculating-values" class="sidebar-link">eval Command – Calculating Values</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-–-tostring-function" class="sidebar-link">eval Command – tostring Function</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-example-formatting-and-sorting-values" class="sidebar-link">eval Example - Formatting and Sorting Values</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-commands-with-multiple-expressions" class="sidebar-link">eval Commands with Multiple Expressions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-–-if-function-syntax" class="sidebar-link">eval Command – if Function Syntax</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-command-–-case-function" class="sidebar-link">eval Command – case Function</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#eval-function" class="sidebar-link">eval function</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#filtering-results-–-search-and-where" class="sidebar-link">Filtering Results – search and where</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#search-command" class="sidebar-link">search Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#where-command" class="sidebar-link">where Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#where-command-with-like-operator" class="sidebar-link">where Command With like Operator</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#fillnull-command" class="sidebar-link">fillnull Command</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#correlating-events" class="sidebar-link">Correlating Events</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#what-is-a-transaction" class="sidebar-link">What is a Transaction?</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-command" class="sidebar-link">transaction Command</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-command-–-specific-fields" class="sidebar-link">transaction Command – Specific Fields</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-command-–-maxspan-maxpause" class="sidebar-link">transaction Command – maxspan/maxpause</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-command-–-startswith-endswith" class="sidebar-link">transaction Command – startswith/endswith</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-sample-case-investigating-with-transactions" class="sidebar-link">transaction sample case - Investigating with Transactions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-sample-case-reporting-on-transactions" class="sidebar-link">transaction sample case - Reporting on Transactions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#transaction-vs-stats" class="sidebar-link">transaction vs. stats</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#introduction-to-knowledge-objects" class="sidebar-link">Introduction to Knowledge Objects</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#what-are-knowledge-objects" class="sidebar-link">What are Knowledge Objects?</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#what-is-a-knowledge-manager" class="sidebar-link">What is a Knowledge Manager?</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#defining-naming-conventions" class="sidebar-link">Defining Naming Conventions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#reviewing-permissions" class="sidebar-link">Reviewing Permissions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#managing-knowledge-objects" class="sidebar-link">Managing Knowledge Objects</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#creating-and-managing-fields" class="sidebar-link">Creating and Managing Fields</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#creating-field-aliases-and-calculated-fields" class="sidebar-link">Creating Field Aliases and Calculated Fields</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#working-with-tags-and-event-types" class="sidebar-link">Working with Tags and Event Types</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#creating-and-using-macros" class="sidebar-link">Creating and Using Macros</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#creating-and-using-workflow-actions" class="sidebar-link">Creating and Using Workflow Actions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#creating-data-models" class="sidebar-link">Creating Data Models</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html#using-the-common-information-model-cim-add-on" class="sidebar-link">Using the Common Information Model (CIM) Add-On</a></li></ul></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals3.html" class="sidebar-link">Splunk Fundamentals 3</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html" class="sidebar-link">Splunk 相关知识</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data Platform - ELK</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/index/" class="sidebar-link">&lt; 首页</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="splunk-fundamentals-2"><a href="#splunk-fundamentals-2" class="header-anchor">#</a> Splunk Fundamentals 2</h1> <div class="custom-block tip"><p class="custom-block-title">参考</p> <ul><li>官网付费Course (<em>based on version: 7.x</em>)</li></ul></div> <h2 id="beyond-search-fundamentals"><a href="#beyond-search-fundamentals" class="header-anchor">#</a> Beyond Search Fundamentals</h2> <h3 id="basic-search-review"><a href="#basic-search-review" class="header-anchor">#</a> Basic Search Review</h3> <ul><li><strong>Keywords</strong> : For example, search for a single word (e.g., error) or group of words (e.g., error password)</li> <li><strong>Booleans</strong> : NOT, OR, AND; AND is implied; MUST be uppercase; can use ( )’s to force precedence sourcetype=vendor_sales OR (sourcetype=access_combined action=purchase)</li> <li><strong>Phrases</strong> : &quot;web error&quot; (different than web AND error)</li> <li><strong>Field searches</strong> : status=404, user=admin</li> <li><strong>Wildcard (*)</strong> <ul><li>status=40* matches 40, 40a, 404, etc.</li> <li>Starting keywords with a wildcard is very inefficient, e.g. *<strong>dmin</strong></li></ul></li> <li><strong>Comparisons</strong> : =, !=, &lt;, &lt;=, &gt;=, &gt; status&gt;399, user!=admin</li></ul> <h4 id="basic-search-review-cont"><a href="#basic-search-review-cont" class="header-anchor">#</a> Basic Search Review (cont.)</h4> <ul><li><strong>table</strong>: returns table containing only specified fields in result set • rename: renames a field in results</li> <li><strong>fields</strong>: includes or excludes specified fields</li> <li><strong>dedup</strong>: removes duplicates from results</li> <li><strong>sort</strong>: sorts results by specified field</li> <li><strong>lookup</strong>: adds field values from external source (e.g., csv files)</li></ul> <h3 id="transforming-search-commands"><a href="#transforming-search-commands" class="header-anchor">#</a> Transforming Search Commands</h3> <ul><li>A transforming command:
<ul><li>Massages raw data into a data table</li> <li>'Transforms' specified cell values for each event into numerical values that you can use for statistical purposes</li> <li>Is required to 'transform' search results into visualizations</li></ul></li> <li>Transforming commands include:
<ul><li><strong>top</strong></li> <li><strong>rare</strong></li> <li><strong>chart</strong></li> <li><strong>timechart – stats</strong></li> <li><strong>geostats</strong></li></ul></li></ul> <h3 id="case-sensitivity-–-sensitive"><a href="#case-sensitivity-–-sensitive" class="header-anchor">#</a> Case Sensitivity – Sensitive</h3> <table><thead><tr><th>Case sensitive</th> <th>Examples</th></tr></thead> <tbody><tr><td>Boolean operators (uppercase)</td> <td>AND, OR, NOT (Boolean operators) and, or, not (literal keywords)</td></tr> <tr><td>Field names</td> <td>productId vs. productid  eval cs_username = &quot;Total Access&quot;</td></tr> <tr><td>Field values from lookup (default, but configurable)</td> <td>product_name=&quot;Tulip Bouquet&quot; vs. product_name=&quot;tulip bouquet&quot;</td></tr> <tr><td>Regular expressions ]</td> <td>\d\d\d vs. \D\D\D</td></tr> <tr><td>eval and where commands</td> <td>eval action=if(action==&quot;view&quot;,...) where action=&quot;Purchase&quot;  stats count(eval(action=&quot;view&quot;) as...</td></tr> <tr><td>Tags</td> <td>tag=DMZ vs. tag=dmz</td></tr></tbody></table> <h3 id="case-sensitivity-–-insensitive"><a href="#case-sensitivity-–-insensitive" class="header-anchor">#</a> Case Sensitivity – Insensitive</h3> <table><thead><tr><th>Case insensitive</th> <th>Examples</th></tr></thead> <tbody><tr><td>Command names</td> <td><code>STATS, stats, sTaTs</code></td></tr> <tr><td>Command clauses</td> <td><code>AS used by stats, rename, ...; BY used by stats, chart, top, ...; WITH used by replace</code></td></tr> <tr><td>Search terms</td> <td><code>failed, FAILED, Failed</code></td></tr> <tr><td>Statistical functions</td> <td><code>avg, AVG, Avg used by stats, chart, ...</code></td></tr> <tr><td>Field values</td> <td><code>host=www1, host=WWW1</code> 							(unless coming from a lookup)</td></tr></tbody></table> <h3 id="how-splunk-searches-–-buckets"><a href="#how-splunk-searches-–-buckets" class="header-anchor">#</a> How Splunk Searches – Buckets</h3> <ul><li>As events come in, Splunk places them into an index's hot bucket (only writable bucket)</li> <li>As buckets age, they roll from the hot to warm to cold</li> <li>Each bucket has its own raw data, metadata, and index files</li> <li>Metadata files track source, sourcetype, and host</li> <li>Admins can add more</li></ul> <h3 id="how-splunk-searches-–-searching"><a href="#how-splunk-searches-–-searching" class="header-anchor">#</a> How Splunk Searches – Searching</h3> <ul><li>When you search, Splunk uses the time range to choose which buckets to search and then uses the bucket indexes to find qualifying events</li> <li>When you search for <code>index=web password fail*</code> during the last 24 hours:
<ul><li>Splunk identifies the buckets for the last 24 hours
<ul><li>And searches the indexes of those buckets for the search terms</li></ul></li></ul></li></ul> <table><thead><tr><th>Hot: Now to -3h</th> <th>index</th> <th>raw events</th></tr></thead> <tbody><tr><td><font color="red">Hot: -3 to -6h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="red">Hot: -5 to -8h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="orange">Warm: -9 to -12h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="orange">Warm: -12 to -15h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="orange">Warm: -14 to -17h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td>.....</td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="orange">Warm: -42 to -45h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="orange">Warm: -45 to -48h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="blue">Cold: -48 to -51h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="blue">Cold: -51 to -54h</font></td> <td>index</td> <td>raw events</td></tr> <tr><td><font color="blue">Cold: -54 to -57h...</font></td> <td>index</td> <td>raw events</td></tr></tbody></table> <h3 id="general-search-practices-推荐"><a href="#general-search-practices-推荐" class="header-anchor">#</a> General Search Practices (推荐)</h3> <ul><li>As events are stored by time, time is the most efficient filter</li> <li>After time, most powerful keywords are host, source, sourcetype</li> <li>To make searches more efficient, include as many terms as possible - e.g., searching for sourcetype=<em>x</em> failure is better than failure</li> <li>Use the fields command to extract (discover) only fields you need
<blockquote><p>Example: Search last 365 days, scans 566,720 events (in secs):</p> <p><code>index=web sourcetype=access_combined</code> 	15.16</p> <p><code>index=web sourcetype=access_combined | fields clientip bytes referrer</code> 	4.49</p></blockquote></li> <li>Inclusion is generally better than exclusion</li> <li>Searching for &quot;access denied&quot; is faster than<div class="language- line-numbers-mode"><pre class="language-text"><code>   NOT &quot;access granted&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>Filter as early in your search as possible</li> <li>Removing duplicates then sorting is faster than sorting then removing duplicates</li> <li>Use the appropriate search mode
<ul><li>Fast - performance over completeness</li> <li>Smart [default]</li> <li>Verbose - completeness over performance</li></ul></li></ul> <p><strong>Wildcards</strong></p> <ul><li>Splunk only searches for whole words, but wildcards allowed</li> <li>Only <em>trailing</em> wildcards make efficient use of index
<ul><li>Wildcards at <em>beginning</em> of string scan all events within time frame</li> <li>Wildcards in <em>middle</em> of string may return inconsistent results – So use fail* (not <em>fail or <em>fail</em> or f</em>il)</li></ul></li> <li>Wildcards tested after all other terms</li></ul> <h3 id="reviewing-search-mode-–-fast-smart-verbose"><a href="#reviewing-search-mode-–-fast-smart-verbose" class="header-anchor">#</a> Reviewing Search Mode – Fast/Smart/Verbose</h3> <h4 id="fast-mode"><a href="#fast-mode" class="header-anchor">#</a> Fast Mode</h4> <ul><li>Emphasizes performance, returning only essential and required data</li> <li>For non-transforming searches:
<ul><li>✓ Events – fields sidebar displays only those fields required for the search</li> <li>✓ Patterns</li> <li>✗ Statistics or visualizations</li></ul></li> <li>Contents of interesting fields sidebar are lost</li> <li>For transforming searches:
<ul><li>✗ Events</li> <li>✗ Patterns</li> <li>✓ Statistics or visualizations</li></ul></li></ul> <h4 id="smart-mode-default"><a href="#smart-mode-default" class="header-anchor">#</a> Smart Mode (Default)</h4> <ul><li>Designed to give you the best results for your search</li> <li>Combination of Fast and Verbose modes</li> <li>For non-transforming searches [Verbose]:
<ul><li>✓ Events – fields sidebar displays all fields</li> <li>✓ Patterns</li> <li>✗ Statistics or visualizations</li></ul></li> <li>For transforming searches:
<ul><li>✗ Events</li> <li>✗ Patterns</li> <li>✓ Statistics or visualizations</li></ul></li></ul> <h4 id="verbose-mode"><a href="#verbose-mode" class="header-anchor">#</a> Verbose Mode</h4> <ul><li>Emphasizes completeness by returning all possible field and event data</li> <li>For non-transforming searches:
<ul><li>✓ Events – fields sidebar displays all fields</li> <li>✓ Patterns</li> <li>✗ Statistics or visualizations</li></ul></li> <li>For transforming searches:
<ul><li>✓ Events</li> <li>✓ Patterns</li> <li>✓ Statistics or visualizations</li></ul></li></ul> <h4 id="modes-summary"><a href="#modes-summary" class="header-anchor">#</a> Modes Summary</h4> <ul><li>Use the most appropriate search mode:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  index=web sourcetype=access_combined
  | chart count by product_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Time range: last 365 days
| Mode     | Returned Results | Events Scanned | Time |
| ----------------------- | ---------- |---------- | ---------- |
|   Fast  | 14 | 566,731 | 1.82 |
|   Smart  | 14 | 566,731 | 1.91 |
|   Verbose  | 14 | 566,731 | 15.21 |</li></ul> <h3 id="search-performance-–-types-of-searches"><a href="#search-performance-–-types-of-searches" class="header-anchor">#</a> Search Performance – Types of Searches</h3> <div style="display:flex;"><img src="/assets/img/splunkstart2-1.95b6247e.png" alt="" align="left" style="zoom:150%;display:block;"></div> <h3 id="search-job-inspector"><a href="#search-job-inspector" class="header-anchor">#</a> Search Job Inspector</h3> <ul><li>Tool allows you to examine:
<ul><li>Overall stats of search (e.g., records processed and returned, processing time)</li> <li>How search was processed – Where Splunk spent its time</li></ul></li> <li>Use to troubleshoot search’s performance and understand impact of knowledge objects on processing (e.g., event types, tags, lookups)</li> <li>Any existing (i.e., not expired) search job can be inspected</li></ul> <h4 id="_3-components"><a href="#_3-components" class="header-anchor">#</a> 3 Components</h4> <ul><li>Header
<ul><li>Top of Search job inspector provides basic information, including time to run and # of events scanned</li></ul></li> <li>Execution costs
<ul><li>Provides details on cost to retrieve results, such as:
<ul><li><code>command.search.index</code>: Time to search the index for the location to read in rawdata files</li> <li><code>command.search.filter</code>: Time to filter out events that do not match</li> <li><code>command.search.rawdata</code>: Time to read events from the rawdata files</li></ul></li></ul></li> <li>Search job properties
<ul><li>Example: <code>index=sales sourcetype=vendor_sales VendorID&gt;=7000 AND VendorID&lt;9000</code></li> <li>Produces scanCount of 127,201 events</li> <li>Returns resultCount of 2,144 in 3.01 seconds</li> <li>To calculate performance:
<ul><li>Do not use resultCount/time 2,144 / 3.01 = 712 EPS* (* EPS= events per second)</li> <li>Rather, calculate scanCount/time 127,201/ 3.01 = 40,892 EPS</li></ul></li></ul></li></ul> <h2 id="commands-for-visualizations"><a href="#commands-for-visualizations" class="header-anchor">#</a> Commands for Visualizations</h2> <h3 id="visualization-types"><a href="#visualization-types" class="header-anchor">#</a> Visualization Types</h3> <p>When a search returns statistical values, results can be viewed with a wide variety of visualization types</p> <ul><li>Statistics table</li> <li>Charts: Line, column, pie, etc</li> <li>Single value, gauges</li> <li>Maps</li> <li>Many more</li></ul> <h3 id="chart-command"><a href="#chart-command" class="header-anchor">#</a> chart Command</h3> <ul><li>chart command can display any series of data that you want to plot</li> <li>You decide which field to plot on the x-axis
<ul><li>The function defines the value of the y-axis, therefore it should be numeric – The first field after the over clause is the x-axis</li> <li>Using the over and by clauses divides the data into sub-groupings
<ul><li>The values from the by clause display in the legend</li></ul></li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>chart <span class="token function">avg</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token keyword">over</span> host
– The host <span class="token keyword">values</span> display <span class="token keyword">over</span> the x<span class="token operator">-</span>axis

chart <span class="token function">avg</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token keyword">over</span> host <span class="token keyword">by</span> product_name
– The host field <span class="token operator">is</span> the x<span class="token operator">-</span>axis <span class="token operator">and</span> the series <span class="token operator">is</span> further split <span class="token keyword">by</span> product_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>examples:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/* over field */</span>

<span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> chart count <span class="token keyword">over</span> vendor_action


<span class="token comment">/* over field by field */</span>

<span class="token comment">//- You can use the by clause with the over clause to split results (over vendor_action by user)</span>
<span class="token comment">//- Alternatively, you can just use two by clauses (by vendor_action, user)</span>
<span class="token comment">//- You can only split chart results over TWO dimensions (unlike stats results)</span>

<span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> chart count <span class="token keyword">over</span> vendor_action <span class="token keyword">by</span> <span class="token keyword">user</span>
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="including-null-and-other-values"><a href="#including-null-and-other-values" class="header-anchor">#</a> Including NULL and OTHER Values</h4> <ul><li>chart and timechart commands automatically filter results to include the ten highest values
<ul><li>Surplus values are grouped into OTHER</li></ul></li> <li>In this example, the results are skewed by NULL and OTHER
<ul><li>These values are shown by default</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined <span class="token keyword">status</span><span class="token operator">&gt;</span><span class="token number">399</span>
<span class="token operator">|</span> chart count <span class="token keyword">over</span> host <span class="token keyword">by</span> itemId
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="omitting-null-and-other-values"><a href="#omitting-null-and-other-values" class="header-anchor">#</a> Omitting NULL and OTHER Values</h4> <ul><li>To remove empty (NULL) and OTHER field values from the display, use these options:
<ul><li>useother=f</li> <li>usenull=f</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined <span class="token keyword">status</span><span class="token operator">&gt;</span><span class="token number">399</span>
<span class="token operator">|</span> chart count <span class="token keyword">over</span> host <span class="token keyword">by</span> itemId useother<span class="token operator">=</span>f usenull<span class="token operator">=</span>f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="limiting-the-number-of-values"><a href="#limiting-the-number-of-values" class="header-anchor">#</a> Limiting the Number of Values</h4> <ul><li>To adjust the number of plotted series, use the limit argument</li> <li>For unlimited values, use limit=0</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined <span class="token keyword">action</span><span class="token operator">=</span>purchase <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">200</span>
<span class="token operator">|</span> chart <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">over</span> host <span class="token keyword">by</span> product_name <span class="token keyword">limit</span><span class="token operator">=</span><span class="token number">5</span> useother<span class="token operator">=</span>f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="timechart-command"><a href="#timechart-command" class="header-anchor">#</a> timechart Command</h3> <ul><li>timechart command performs statistical aggregations against time</li> <li>Plots and trends data over time</li> <li>_time is always the x-axis</li> <li>You can optionally split data using the by clause for one other field - Each distinct value of the split by field is a separate series in the chart</li> <li>Timecharts are best represented as line or area charts</li></ul> <p>Examples:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>network sourcetype<span class="token operator">=</span>cisco_wsa_squid <span class="token keyword">usage</span><span class="token operator">=</span>Violation
<span class="token operator">|</span> timechart count

<span class="token comment">/* Multiple Values */</span>
<span class="token keyword">index</span><span class="token operator">=</span>network sourcetype<span class="token operator">=</span>cisco_wsa_squid
<span class="token operator">|</span> timechart count <span class="token keyword">by</span> <span class="token keyword">usage</span>

<span class="token comment">/* other settings: 

    Multi-series: No
    Multi-series: Yes

*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="adjusting-the-sampling-interval"><a href="#adjusting-the-sampling-interval" class="header-anchor">#</a> Adjusting the Sampling Interval</h4> <ul><li>The timechart command &quot;buckets&quot; the values of the _time field
<ul><li>This provides dynamic sampling intervals, based upon the time range of the search</li></ul></li> <li>Example defaults:
<ul><li>Last 60 minutes uses span=1m</li> <li>Last 24 hours uses span=30m</li></ul></li> <li>Adjust the interval using the span argument, e.g. span=15m</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure vendor_action<span class="token operator">=</span><span class="token operator">*</span>
<span class="token operator">|</span> timechart span<span class="token operator">=</span><span class="token number">15</span>m count <span class="token keyword">by</span> vendor_action

<span class="token comment">/* other settings:

    Trellis Layout - 
    • Display multiple charts based on one result set
    • Allows visual comparison between different categories
    • Data only fetched once
    
    Visualization Formatting   【图表菜单里的各种设置】
    	...
    	Chart Overlay  
    	... 
*/</span>
<span class="token punctuation">(</span><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined <span class="token keyword">action</span><span class="token operator">=</span>purchase <span class="token keyword">status</span><span class="token operator">&lt;</span><span class="token number">400</span><span class="token punctuation">)</span> <span class="token operator">OR</span> <span class="token punctuation">(</span><span class="token keyword">index</span><span class="token operator">=</span>sales sourcetype<span class="token operator">=</span>vendor_sales<span class="token punctuation">)</span>
<span class="token operator">|</span> timechart span<span class="token operator">=</span><span class="token number">1</span>h <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">by</span> sourcetype
<span class="token operator">|</span> <span class="token keyword">rename</span> access_combined <span class="token keyword">as</span> webSales<span class="token punctuation">,</span> vendor_sales <span class="token keyword">as</span> retailSales
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="transforming-command-summary"><a href="#transforming-command-summary" class="header-anchor">#</a> Transforming Command Summary</h3> <p><strong>some comparation</strong></p> <table><thead><tr><th>Feature</th> <th>stats</th> <th>chart</th> <th>timechart</th></tr></thead> <tbody><tr><td>Multi-level breakdown [by clause]</td> <td>Many</td> <td>2</td> <td>1</td></tr> <tr><td>Limit # series shown</td> <td>NA</td> <td>limit=<em>n</em> <em>Default=10</em></td> <td>limit=<em>n</em> <em>Default=10</em></td></tr> <tr><td>Filter other series</td> <td>NA</td> <td>useother=f</td> <td>useother=f</td></tr> <tr><td>Filter null values</td> <td>NA</td> <td>usenull=f</td> <td>usenull=f</td></tr> <tr><td>Set time value on x axis</td> <td>NA</td> <td>NA</td> <td>span</td></tr></tbody></table> <p><strong>To count the frequency of a field(s), use top/rare</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> <span class="token keyword">top</span> src_ip<span class="token punctuation">,</span> <span class="token keyword">user</span><span class="token punctuation">,</span> vendor_action<span class="token punctuation">,</span> app

<span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> rare src_ip<span class="token punctuation">,</span> <span class="token keyword">user</span><span class="token punctuation">,</span> vendor_action<span class="token punctuation">,</span> app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Use stats to calculate statistics for two or more by fields (non time-based)</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> stats count <span class="token keyword">by</span> src_ip<span class="token punctuation">,</span> <span class="token keyword">user</span><span class="token punctuation">,</span> vendor_action<span class="token punctuation">,</span> app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>To calculate statistics with an arbitrary field as the x-axis (not _time), use chart</strong></p> <ul><li>When you use a by field, the output is a table</li> <li>Each column represents a distinct value of the split-by field</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> chart count <span class="token keyword">over</span> src_ip
  <span class="token keyword">by</span> vendor_action
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Use timechart to calculate statistics with _time as the x-axis</strong></p> <ul><li>If a by field is used, the output is a table</li> <li>Each column represents a distinct value of the split-by field</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">|</span>  timechart span<span class="token operator">=</span><span class="token number">1</span>h count <span class="token keyword">by</span> itemId <span class="token keyword">limit</span><span class="token operator">=</span><span class="token number">3</span> useother<span class="token operator">=</span>f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="advanced-visualizations"><a href="#advanced-visualizations" class="header-anchor">#</a> Advanced Visualizations</h2> <h3 id="trendline-command"><a href="#trendline-command" class="header-anchor">#</a> trendline Command</h3> <ul><li>Allows you to overlay a computed moving average on a chart</li> <li>trendline computes the moving averages of a field<br> <code>trendline &lt;trendtype&gt;&lt;period&gt;(field) [AS newfield]</code> <blockquote><p><em>trendtype</em>:</p> <p>– sma - simple moving average<br>– ema - exponential moving average<br>– wma - weighted moving average</p></blockquote></li> <li>Must define the period over which to compute the trend</li> <li>period must be an integer between 2 and 10000
<ul><li>For example, <code>sma2(sales)</code>is valid</li> <li>But <code>sma(sales)</code> would fail as it is missing an integer, the defining period</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined <span class="token keyword">action</span><span class="token operator">=</span>purchase <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">200</span> 
<span class="token operator">|</span> timechart span<span class="token operator">=</span><span class="token number">2</span>h <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> sales
<span class="token operator">|</span> trendline sma2<span class="token punctuation">(</span>sales<span class="token punctuation">)</span> <span class="token keyword">as</span> trend
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="iplocation-command"><a href="#iplocation-command" class="header-anchor">#</a> iplocation Command</h3> <ul><li>Use iplocation to look up and add location information to an event
<ul><li>This information includes <code>city</code>,<code>country</code>,<code>region</code>,<code>latitude</code> and <code>longitude</code></li></ul></li> <li>Not all of the information is available for all ip address ranges</li> <li>Automatically defines the default lat and lon fields required by <code>geostats</code> （自动产生geostats命令所需要的经度、纬度）</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure <span class="token punctuation">(</span>fail<span class="token operator">*</span> <span class="token operator">OR</span> invalid<span class="token punctuation">)</span>
<span class="token operator">|</span> iplocation src_ip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="geostats-command"><a href="#geostats-command" class="header-anchor">#</a> geostats Command</h3> <ul><li>Use geostats to compute statistical functions and render a cluster map <br> <code>geostats [latfield=string] [longfield=string] [stats-agg- term]* [by-clause]</code></li> <li>Data must include latitude and longitude values</li> <li>Define the latfield and longfield only if they differ from the default lat and lon fields</li> <li>To control the column count:
<ul><li>On a global level, use the globallimit argument</li> <li>On a local level, depending on where your focus is (i.e., where you’ve zoomed in), use the locallimit argument</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token punctuation">(</span>fail<span class="token operator">*</span> <span class="token operator">OR</span> invalid<span class="token punctuation">)</span>
<span class="token operator">|</span> iplocation src_ip
<span class="token operator">|</span> geostats globallimit<span class="token operator">=</span><span class="token number">5</span> count <span class="token keyword">by</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="choropleth-map"><a href="#choropleth-map" class="header-anchor">#</a> Choropleth Map</h3> <ul><li>Uses shading to show relative metrics, such as sales, network intruders, etc. for predefined geographic regions</li> <li>To define regional boundaries, you must have either a:
<ul><li>KML (Keyhole Markup Language) file</li> <li>KMZ (compressed Keyhole Markup Language) file</li></ul></li> <li>Splunk ships with:
<ul><li>geo_us_states, United States</li> <li>geo_countries, countries of the world</li></ul></li></ul> <p><code>...| geom [*featureCollection*] [featureIdField=*string*]</code></p> <h3 id="geom-command"><a href="#geom-command" class="header-anchor">#</a> geom Command</h3> <blockquote><p>Display the previous week’s retail sales in EMEA.</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>sales sourcetype<span class="token operator">=</span>vendor_sales
VendorID <span class="token operator">&gt;</span> <span class="token number">4999</span> <span class="token operator">AND</span> VendorID <span class="token operator">&lt;</span> <span class="token number">6000</span>
<span class="token operator">|</span> stats count <span class="token keyword">as</span> Sales <span class="token keyword">by</span> VendorCountry
<span class="token operator">|</span> geom geo_countries featureIdField<span class="token operator">=</span>VendorCountry
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="viewing-results-as-a-single-value"><a href="#viewing-results-as-a-single-value" class="header-anchor">#</a> Viewing Results as a Single Value</h3> <blockquote><p>some examples - you can change the format in the configuration options</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure vendor_action<span class="token operator">=</span>failed
<span class="token operator">|</span> stats count
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>sourcetype<span class="token operator">=</span>access_combined <span class="token keyword">action</span><span class="token operator">=</span>purchase
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> count
<span class="token operator">|</span> gauge count <span class="token number">0</span> <span class="token number">5000</span> <span class="token number">10000</span> <span class="token number">15000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure <span class="token punctuation">(</span>fail<span class="token operator">*</span> <span class="token operator">OR</span> invalid<span class="token punctuation">)</span>
<span class="token operator">|</span> stats <span class="token function">count</span><span class="token punctuation">(</span>vendor_action<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
 <span class="token punctuation">(</span>fail<span class="token operator">*</span> <span class="token operator">OR</span> invalid<span class="token punctuation">)</span>
<span class="token operator">|</span> chart count <span class="token keyword">by</span> src_ip 
<span class="token operator">|</span> sort <span class="token operator">-</span>count
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure <span class="token punctuation">(</span>fail<span class="token operator">*</span> <span class="token operator">OR</span> invalid<span class="token punctuation">)</span>
<span class="token operator">|</span> stats count
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="single-value-visualizations-timechart"><a href="#single-value-visualizations-timechart" class="header-anchor">#</a> Single Value Visualizations: timechart</h4> <ul><li>With the timechart command, you can add a sparkline and a trend</li> <li>A <strong>sparkline</strong> is an inline chart
<ul><li>It is designed to display time- based trends associated with the primary key</li></ul></li> <li>The <strong>trend</strong> shows the direction in which values are moving
<ul><li>It appears to the right of the single value</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure 
fail<span class="token operator">*</span> <span class="token operator">OR</span> invalid
<span class="token operator">|</span> timechart span<span class="token operator">=</span><span class="token number">15</span>m <span class="token function">count</span><span class="token punctuation">(</span>vendor_action<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div style="display:flex;"><img src="/assets/img/splunkstart2-2.83af6dd9.png" alt="" align="left" style="zoom:100%;display:block;"></div> <h3 id="adding-totals-auto-command"><a href="#adding-totals-auto-command" class="header-anchor">#</a> Adding Totals (Auto &amp; Command)</h3> <h4 id="using-format-options"><a href="#using-format-options" class="header-anchor">#</a> Using Format Options</h4> <blockquote><p>选择 statistic -&gt; Format -&gt; Summary  打开 Totals/Percentages</p> <p>此方法会自动对所有column添加 totals/百分比， 无法定制化</p></blockquote> <ul><li>Automatically total every column using the Format options</li> <li>When using this approach, you:
<ul><li>Cannot indicate which column to total; all columns are always totaled</li> <li>Cannot add labels</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> Bytes<span class="token punctuation">,</span>
  <span class="token function">avg</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> avgBytes<span class="token punctuation">,</span>
  count <span class="token keyword">as</span> totalEvents <span class="token keyword">by</span> host
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="using-addtotals-command"><a href="#using-addtotals-command" class="header-anchor">#</a> Using addtotals Command</h4> <ul><li>Alternatively, use the addtotals command to:
<ul><li>Compute the sum of all <strong>or selected</strong> numeric fields for each column and place the total in the last row</li> <li>Compute the sum of all <strong>or selected</strong> numeric fields for each <strong>row</strong> and place the total in the last column</li></ul></li></ul> <p><code>addtotals [row=*bool*] [fieldname=*field*] [col=*bool*][labelfield=*field*] [label=*string*] *field-list*</code></p> <table><thead><tr><th><strong>Row Options</strong></th> <th><strong>Row Options</strong></th> <th><strong>Column Options</strong></th> <th><strong>Column Options</strong></th></tr></thead> <tbody><tr><td>row=true/false (Default= true)</td> <td>A column is created that contains numeric totals for each row.</td> <td>col=true/false (Default= false)</td> <td>A row is created that contains numeric totals for each column.</td></tr> <tr><td>fieldname=<em>field</em> (Default=Total)</td> <td>Defines a string used to create a field name for the totals column.</td> <td>label=<em>string</em> (Default=Total)</td> <td>Defines a string used to name the totals row.</td></tr> <tr><td></td> <td></td> <td>labelfield= <em>fieldname</em></td> <td>Defines where the label string is placed. (Generally, you should make this the first column.)</td></tr></tbody></table> <table><thead><tr><th><strong>General Options</strong></th> <th><strong>General Options</strong></th></tr></thead> <tbody><tr><td><em>field-list</em>=one or more numeric fields. (Default: all numeric fields)</td> <td>Defines the numeric fields to be totaled.</td></tr></tbody></table> <blockquote><p>Examples:  (具体参考官方pdf： <a href="http://heyan.site/download/Splunk%207.X%20Fundamentals%20Part%202%20%28IOD%29-unlock.pdf" target="_self" rel="noopener noreferrer">Splunk 7.X Fundamentals Part 2 (IOD)-unlock.pdf</a>)</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>sales sourcetype<span class="token operator">=</span>vendor_sales
<span class="token operator">|</span> chart count <span class="token keyword">over</span> product_name <span class="token keyword">by</span> VendorCountry
<span class="token operator">|</span> addtotals
fieldname<span class="token operator">=</span><span class="token string">&quot;Total Per Product&quot;</span> 
col<span class="token operator">=</span>t 
label<span class="token operator">=</span><span class="token string">&quot;Total Per Country&quot;</span> labelfield<span class="token operator">=</span>product_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>row=t (default) counts the fields in each row under a column named &quot;Total Per Product”</li> <li>col=t counts the fields in each row in a row named &quot;Total Per Country&quot;</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> Bytes<span class="token punctuation">,</span>
	<span class="token function">avg</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> avgBytes<span class="token punctuation">,</span>
	count <span class="token keyword">as</span> totalEvents <span class="token keyword">by</span> host
<span class="token operator">|</span> addtotals <span class="token keyword">row</span><span class="token operator">=</span>f <span class="token operator">*</span>A<span class="token operator">*</span> col<span class="token operator">=</span>t <span class="token operator">*</span>B<span class="token operator">*</span> label<span class="token operator">=</span>totalBytes <span class="token operator">*</span>C<span class="token operator">*</span>
	labelfield<span class="token operator">=</span>host <span class="token operator">*</span>D<span class="token operator">*</span> Bytes <span class="token operator">*</span>E<span class="token operator">*</span>
	
<span class="token comment">// *A* *B* ... 是注释序号 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>A - Do not total rows</li> <li>B - Total columns</li> <li>C - Add the label totalBytes</li> <li>D - Place the label under the host column</li> <li>E - Only total the Bytes column</li></ul> <div style="display:flex;"><img src="/assets/img/splunkstart2-3.9ed25b01.png" alt="" align="left" style="zoom:100%;display:block;"></div> <h2 id="filtering-and-formatting-data"><a href="#filtering-and-formatting-data" class="header-anchor">#</a> Filtering and Formatting Data</h2> <h3 id="eval-command-overview"><a href="#eval-command-overview" class="header-anchor">#</a> eval Command (overview)</h3> <ul><li>eval allows you to calculate and manipulate field values in your report<br><code>eval *fieldname1* = *expression1 [, fieldname2 = expression2...]*</code></li> <li>Supports a variety of functions</li> <li>Results of eval written to either new or existing field you specify
<ul><li>If the destination field exists, the values of the field are replaced by the results of eval</li> <li>Indexed data is not modified, and no new data is written into the index</li> <li>Field values are treated in a case-sensitive manner</li></ul></li> <li>The eval command allows you to:
<ul><li>Calculate expressions</li> <li>Place the results in a field</li> <li>Use that field in searches or other expressions</li></ul></li> <li>Type &amp; Operators
<ul><li>Arithmetic <code>+ - * / %</code></li> <li>Concatenation <code>+ .</code></li> <li>Boolean <code>AND OR NOT XOR</code></li> <li>Comparison <code>&lt; &gt; &lt;= &gt;= != = == LIKE</code></li></ul></li></ul> <h3 id="eval-command-–-convert-values"><a href="#eval-command-–-convert-values" class="header-anchor">#</a> eval Command – Convert Values</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>network sourcetype<span class="token operator">=</span>cisco_wsa_squid 
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>sc_bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> Bytes <span class="token keyword">by</span> <span class="token keyword">usage</span> 
<span class="token operator">|</span> eval bandwidth <span class="token operator">=</span> Bytes<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>In this example:</p> <ul><li>Calculate the number of bytes for each usage type</li> <li>Create a new field named &quot;bandwidth&quot;</li> <li>Convert the values of the Bytes field into MB by dividing Bytes field values by (1024*1024)</li></ul></blockquote> <h3 id="eval-command-–-round-values"><a href="#eval-command-–-round-values" class="header-anchor">#</a> eval Command – Round Values</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>network sourcetype<span class="token operator">=</span>cisco_wsa_squid
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>sc_bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> Bytes <span class="token keyword">by</span> <span class="token keyword">usage</span>
<span class="token operator">|</span> eval bandwidth <span class="token operator">=</span> <span class="token function">round</span><span class="token punctuation">(</span>Bytes<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> 
<span class="token operator">|</span> sort <span class="token operator">-</span>bandwidth
<span class="token operator">|</span> <span class="token keyword">rename</span> bandwidth <span class="token keyword">as</span> <span class="token string">&quot;Bandwidth (MB)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Removing Fields</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>network sourcetype<span class="token operator">=</span>cisco_wsa_squid
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>sc_bytes<span class="token punctuation">)</span> <span class="token keyword">as</span> Bytes <span class="token keyword">by</span> <span class="token keyword">usage</span>
<span class="token operator">|</span> eval bandwidth <span class="token operator">=</span> <span class="token function">round</span><span class="token punctuation">(</span>Bytes<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span> sort <span class="token operator">-</span>bandwidth
<span class="token operator">|</span> <span class="token keyword">rename</span> bandwidth <span class="token keyword">as</span> <span class="token string">&quot;Bandwidth (MB)&quot;</span>
<span class="token operator">|</span> <span class="token keyword">fields</span> <span class="token operator">-</span> Bytes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="eval-command-–-calculating-values"><a href="#eval-command-–-calculating-values" class="header-anchor">#</a> eval Command – Calculating Values</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined product_name<span class="token operator">=</span><span class="token operator">*</span> <span class="token keyword">action</span><span class="token operator">=</span>purchase
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> tp<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>sale_price<span class="token punctuation">)</span> <span class="token keyword">as</span> tsp <span class="token keyword">by</span> product_name
<span class="token operator">|</span> eval Discount <span class="token operator">=</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tp <span class="token operator">-</span> tsp<span class="token punctuation">)</span><span class="token operator">/</span> tp<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token operator">|</span> sort <span class="token operator">-</span>Discount
<span class="token operator">|</span> eval Discount <span class="token operator">=</span> Discount<span class="token punctuation">.</span><span class="token string">&quot;%&quot;</span>
<span class="token operator">|</span> <span class="token keyword">rename</span> tp <span class="token keyword">as</span> <span class="token string">&quot;Total List Price&quot;</span><span class="token punctuation">,</span> tsp <span class="token keyword">as</span> <span class="token string">&quot;Total Sale Price&quot;</span><span class="token punctuation">,</span> product_name <span class="token keyword">as</span> Product
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="eval-command-–-tostring-function"><a href="#eval-command-–-tostring-function" class="header-anchor">#</a> eval Command – tostring Function</h3> <ul><li>tostring converts a numeric field value to a string <br> <code>tostring(field,&quot;*option*&quot;)</code></li> <li>Options:
<ul><li>&quot;commas&quot;: applies commas
<ul><li>If the number includes decimals, it rounds to two decimal places</li></ul></li> <li>&quot;duration&quot;: formats the number as &quot;hh:mm:ss&quot;</li> <li>&quot;hex&quot;: formats the number in hexadecimal</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token keyword">action</span><span class="token operator">=</span>purchase <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">503</span>
<span class="token operator">|</span> stats <span class="token function">count</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> NumberOfLostSales<span class="token punctuation">,</span>
  <span class="token function">avg</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> AverageLostSales<span class="token punctuation">,</span>
  <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> TotalLostRevenue
<span class="token operator">|</span> eval AverageLostSales <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>AverageLostSales<span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  TotalLostRevenue <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>TotalLostRevenue<span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>with duration option</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> stats range<span class="token punctuation">(</span>_time<span class="token punctuation">)</span> <span class="token keyword">as</span> sessionTime <span class="token keyword">by</span> JSESSIONID <span class="token operator">|</span> sort <span class="token number">5</span> <span class="token operator">-</span>sessionTime
<span class="token operator">|</span> eval duration <span class="token operator">=</span> tostring<span class="token punctuation">(</span>sessionTime<span class="token punctuation">,</span><span class="token string">&quot;duration&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="eval-example-formatting-and-sorting-values"><a href="#eval-example-formatting-and-sorting-values" class="header-anchor">#</a> eval Example - Formatting and Sorting Values</h3> <ul><li>eval with added characters converts numeric field values to strings</li> <li>To order numerically, first sort, then use eval</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined price<span class="token operator">=</span><span class="token operator">*</span>
<span class="token operator">|</span> stats <span class="token keyword">values</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> price <span class="token keyword">by</span> product_name
<span class="token operator">|</span> sort <span class="token operator">-</span>price
<span class="token operator">|</span> eval price <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span><span class="token punctuation">.</span>price
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="eval-commands-with-multiple-expressions"><a href="#eval-commands-with-multiple-expressions" class="header-anchor">#</a> eval Commands with Multiple Expressions</h3> <ul><li>Multiple expressions can be combined into one eval command</li> <li>Each subsequent expression references the results of previous expressions</li> <li>Expressions must be separated by commas</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>eval fieldname1 <span class="token operator">=</span> expression1<span class="token punctuation">,</span> 
		 fieldname2 <span class="token operator">=</span> expression2<span class="token punctuation">,</span>
     fieldname3 <span class="token operator">=</span> expression3<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><em>example</em>:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined price<span class="token operator">=</span><span class="token operator">*</span>
<span class="token operator">|</span> stats <span class="token keyword">values</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> list_price<span class="token punctuation">,</span> <span class="token keyword">values</span><span class="token punctuation">(</span>sale_price<span class="token punctuation">)</span>
  <span class="token keyword">as</span> current_sale_price <span class="token keyword">by</span> product_name
<span class="token operator">|</span> eval current_discount <span class="token operator">=</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>list_price – current_sale_price<span class="token punctuation">)</span><span class="token operator">/</span>list_price<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	new_discount <span class="token operator">=</span> <span class="token punctuation">(</span>current_discount <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	new_sale_price <span class="token operator">=</span> list_price <span class="token operator">-</span> <span class="token punctuation">(</span>list_price <span class="token operator">*</span> <span class="token punctuation">(</span>new_discount<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="eval-command-–-if-function-syntax"><a href="#eval-command-–-if-function-syntax" class="header-anchor">#</a> eval Command – if Function Syntax</h3> <p><code>if(*X*,*Y*,*Z*)</code></p> <ul><li>The if function takes three arguments</li> <li>Thefirstargument,X, isaBooleanexpression
<ul><li>If it evaluates to TRUE, the result evaluates to the second argument, Y</li> <li>If it evaluates to FALSE, the result evaluates to the third argument, Z</li></ul></li> <li>Non-numeric values must be enclosed in &quot;double quotes&quot; • Field values are treated in a case-sensitive manner</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>example:

<span class="token keyword">index</span><span class="token operator">=</span>sales sourcetype<span class="token operator">=</span>vendor_sales
<span class="token operator">|</span> eval SalesTerritory <span class="token operator">=</span>
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> TotalRevenue <span class="token keyword">by</span> SalesTerritory
<span class="token operator">|</span> eval TotalRevenue <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>TotalRevenue<span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="eval-command-–-case-function"><a href="#eval-command-–-case-function" class="header-anchor">#</a> eval Command – case Function</h3> <p><code>case(X1,Y1,X2,Y2...)</code></p> <ul><li>Thefirstargument,X1, isaBooleanexpression</li> <li>If it evaluates to TRUE, the result evaluates to Y1</li> <li>If it evaluates to FALSE, the next Boolean expression, X2, is evaluated, etc.</li> <li>If you want an “otherwise” clause, just test for a condition you know is true at the end (e.g., 0=0)</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> eval rating <span class="token operator">=</span> <span class="token keyword">case</span><span class="token punctuation">(</span>productId <span class="token operator">LIKE</span> <span class="token string">&quot;WC%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Teen&quot;</span><span class="token punctuation">,</span> productId <span class="token operator">LIKE</span> <span class="token string">&quot;FS%&quot;</span><span class="token punctuation">,</span> Mature<span class="token string">&quot;, 0=0, &quot;</span>Unrated&quot;<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="eval-function"><a href="#eval-function" class="header-anchor">#</a> eval function</h3> <ul><li>Used within a transforming command, such as stats</li> <li>Requires an as clause</li> <li>Double quotes are required for character field values</li> <li>Field values are case-sensitive</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure vendor_action<span class="token operator">=</span><span class="token operator">*</span>
<span class="token operator">|</span> stats
	<span class="token function">count</span><span class="token punctuation">(</span>eval<span class="token punctuation">(</span>vendor_action<span class="token operator">=</span><span class="token string">&quot;Accepted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Accepted<span class="token punctuation">,</span> 
	<span class="token function">count</span><span class="token punctuation">(</span>eval<span class="token punctuation">(</span>vendor_action<span class="token operator">=</span><span class="token string">&quot;Failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Failed<span class="token punctuation">,</span> 
	<span class="token function">count</span><span class="token punctuation">(</span>eval<span class="token punctuation">(</span>vendor_action<span class="token operator">=</span><span class="token string">&quot;session opened&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> SessionOpened
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="filtering-results-–-search-and-where"><a href="#filtering-results-–-search-and-where" class="header-anchor">#</a> Filtering Results – search and where</h3> <ul><li>The search and where commands both filter results
<ul><li>search
<ul><li>May be easier if you’re familiar with basic search syntax</li> <li>Treats field values in a case-insensitive manner</li> <li>Allows searching on keyword</li> <li>Can be used at any point in the search pipeline</li></ul></li> <li>where
<ul><li>Can compare values from two different fields</li> <li>Functions are available, such as isnotnull()</li> <li>Treats field values in a case-sensitive manner</li> <li>Can’t appear before first pipe in search pipeline</li></ul></li></ul></li></ul> <h3 id="search-command"><a href="#search-command" class="header-anchor">#</a> search Command</h3> <ul><li>To filter results, use search at any point in the search pipeline</li> <li>Behaves exactly like search strings before the first pipe
<ul><li>Uses the &quot;*&quot; wildcard</li> <li>Treats field values in a case-insensitive manner</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token keyword">action</span><span class="token operator">=</span>purchase <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">200</span>
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> sales <span class="token keyword">by</span> product_name
<span class="token operator">|</span> search sales<span class="token operator">&gt;</span><span class="token number">500</span>
<span class="token operator">|</span> sort –sales
<span class="token operator">|</span> eval sales<span class="token operator">=</span><span class="token string">&quot;$&quot;</span><span class="token operator">+</span>sales
<span class="token operator">|</span> <span class="token keyword">rename</span> sales <span class="token keyword">as</span> <span class="token string">&quot;Popular Products&quot;</span><span class="token punctuation">,</span>
  product_name <span class="token keyword">as</span> <span class="token string">&quot;Product Name&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="where-command"><a href="#where-command" class="header-anchor">#</a> where Command</h3> <p><code>where eval-expression</code></p> <ul><li>Uses same expression syntax as eval command</li> <li>Uses boolean expressions to filter search results and only keeps results that are True
<ul><li>Double quoted strings are interpreted as field values</li></ul></li> <li>Treats field values in a case-sensitive manner
<ul><li>Unquoted or single-quoted strings are treated as fields</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> timechart <span class="token function">count</span><span class="token punctuation">(</span>eval<span class="token punctuation">(</span><span class="token keyword">action</span><span class="token operator">=</span><span class="token string">&quot;changequantity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">as</span> changes<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>eval<span class="token punctuation">(</span><span class="token keyword">action</span><span class="token operator">=</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> removals
<span class="token operator">|</span> <span class="token keyword">where</span> removals <span class="token operator">&gt;</span> changes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="where-command-with-like-operator"><a href="#where-command-with-like-operator" class="header-anchor">#</a> where Command With like Operator</h3> <ul><li>Can do wildcard searches with where command</li> <li>Use (_) for one character and (%) for multiple characters</li> <li>Must use the like operator with wildcards</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure
<span class="token operator">|</span> stats count <span class="token keyword">by</span> src_ip
<span class="token operator">|</span> <span class="token keyword">where</span> src_ip <span class="token operator">like</span> <span class="token string">&quot;10_.%&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="fillnull-command"><a href="#fillnull-command" class="header-anchor">#</a> fillnull Command</h3> <ul><li>Use fillnull to replace null values in fields</li> <li>Use value=string to specify a string you want displayed instead <br> Example: <code>fillnull value=NULL</code></li> <li>If no value= clause, <strong>default replacement value is 0</strong></li> <li>Optionally, restrict which fields fillnull apply to by listing them at end of command<br>Example: <code>fillnull VALUE=“N/A” discount refund</code></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>sales sourcetype<span class="token operator">=</span> vendor_sales
<span class="token operator">|</span> chart <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">over</span> product_name <span class="token keyword">by</span> VendorCountry
<span class="token operator">|</span> fillnull

<span class="token comment">// null will be replaced as default value 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>sales sourcetype<span class="token operator">=</span> vendor_sales
<span class="token operator">|</span> chart <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">over</span> product_name <span class="token keyword">by</span> VendorCountry
<span class="token operator">|</span> fillnull <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">&quot;No Value&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="correlating-events"><a href="#correlating-events" class="header-anchor">#</a> Correlating Events</h2> <h3 id="what-is-a-transaction"><a href="#what-is-a-transaction" class="header-anchor">#</a> What is a Transaction?</h3> <ul><li>A transaction is any group of related events that span time</li> <li>Events can come from multiple applications or hosts
<ul><li>Events related to a single purchase from an online store can span across an application server, database, and e-commerce engine</li> <li>One email message can create multiple events as it travels through various queues</li> <li>Each event in the network traffic logs represents a single user generating a single http request</li> <li>Visiting a single website normally generates multiple http requests
<ul><li>HTML, JavaScript, CSS files</li> <li>Flash, images, etc.</li></ul></li></ul></li></ul> <h3 id="transaction-command"><a href="#transaction-command" class="header-anchor">#</a> transaction Command</h3> <ul><li>transaction <code>field-list</code> <ul><li><code>field-list</code> <strong>can be one field name or a list of field names</strong></li> <li>Events are <strong>grouped</strong> into transactions based on the values of these fields (结果自动被group了)</li> <li>If multiple fields are specified and a relationship exists between those fields, events with related field values are grouped into a single transaction</li></ul></li> <li>Common constraints: <br> <code>maxspan</code> <code>maxpause</code> <code>startswith</code> <code>endswith</code></li></ul> <p><em>example</em>:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> <span class="token keyword">transaction</span> JSESSIONID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> <span class="token keyword">transaction</span> JSESSIONID
<span class="token operator">|</span> search <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">404</span>
<span class="token operator">|</span> highlight JSESSIONID<span class="token punctuation">,</span> <span class="token number">404</span>

<span class="token comment">//– search uses the &quot;*&quot; wildcard and treats field values in a case-insensitive manner</span>
<span class="token comment">//– status=404 finds the errors – highlight highlights the terms you specify</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>security sourcetype<span class="token operator">=</span>linux_secure failed
<span class="token operator">|</span> <span class="token keyword">transaction</span> src_ip

<span class="token comment">// 结果会根据 src_ip 进行分组显示</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="transaction-command-–-specific-fields"><a href="#transaction-command-–-specific-fields" class="header-anchor">#</a> transaction Command – Specific Fields</h3> <p>The transaction command produces additional fields, such as:</p> <ul><li><strong>duration</strong> – the difference between the timestamps for the first and last event in the transaction</li> <li><strong>eventcount</strong> – the number of events in the transaction</li></ul> <h3 id="transaction-command-–-maxspan-maxpause"><a href="#transaction-command-–-maxspan-maxpause" class="header-anchor">#</a> transaction Command – maxspan/maxpause</h3> <p>You can also define a max overall time span and max gap between events</p> <ul><li>maxspan=10m
<ul><li>Maximum total time between the <em>earliest</em> and <em>latest</em> events</li> <li>If not specified, default is -1 (or no limit)</li></ul></li> <li>maxpause=1m
<ul><li>Maximum total time <em>between</em> events</li> <li>If not specified, default is -1 (or no limit)</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// Assumptions: Transactions spanning more than 10 minutes with the same client IP are considered unrelated. </span>
<span class="token comment">// Also, there can be no more than one minute between any two related events.</span>

<span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> <span class="token keyword">transaction</span> clientip maxspan<span class="token operator">=</span><span class="token number">10</span>m maxpause<span class="token operator">=</span><span class="token number">1</span>m
<span class="token operator">|</span> eval duration <span class="token operator">=</span> tostring<span class="token punctuation">(</span>duration<span class="token punctuation">,</span><span class="token string">&quot;duration&quot;</span><span class="token punctuation">)</span>
<span class="token operator">|</span> sort <span class="token operator">-</span>duration
<span class="token operator">|</span> <span class="token keyword">table</span> clientip duration <span class="token keyword">action</span>
<span class="token operator">|</span> <span class="token keyword">rename</span>  clientip <span class="token keyword">as</span> <span class="token string">&quot;Client IP&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">action</span> <span class="token keyword">as</span> <span class="token string">&quot;Client Actions&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="transaction-command-–-startswith-endswith"><a href="#transaction-command-–-startswith-endswith" class="header-anchor">#</a> transaction Command – startswith/endswith</h3> <ul><li>To form transactions based on terms, field values, or evaluations, use startswith and endswith options</li> <li>In this example:
<ul><li>The first event in the transaction includes addtocart</li> <li>The last event includes purchase</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">//Scenario: </span>
<span class="token comment">//Determine the length of time spent to complete a purchase by customers in the online store over the last 24 hours.</span>

<span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token operator">|</span> <span class="token keyword">transaction</span> clientip JSESSIONID
  startswith<span class="token operator">=</span>eval<span class="token punctuation">(</span><span class="token keyword">action</span><span class="token operator">=</span><span class="token string">&quot;addtocart&quot;</span><span class="token punctuation">)</span>
  endswith<span class="token operator">=</span>eval<span class="token punctuation">(</span><span class="token keyword">action</span><span class="token operator">=</span><span class="token string">&quot;purchase&quot;</span><span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token keyword">table</span> clientip<span class="token punctuation">,</span> JSESSIONID<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> eventcount
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="transaction-sample-case-investigating-with-transactions"><a href="#transaction-sample-case-investigating-with-transactions" class="header-anchor">#</a> transaction sample case - Investigating with Transactions</h3> <blockquote><ul><li>Transactions can be useful when a single event does not provide enough information</li> <li>This example searches email logs for the term “REJECT” <br> <code>index=network sourcetype=cisco_esa REJECT</code></li> <li>Events that include the term do not provide much information about the rejection</li> <li>By creating a transaction, you can then search and see additional events related to the rejection, such as:
<ul><li>IP address of sender</li> <li>Reverse DNS lookup results</li> <li>Action taken by the mail system following the rejection</li></ul></li> <li>mid – Message ID</li> <li>dcid – Delivery Connection ID</li> <li>icid – Incoming Connection</li></ul></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// 如果直接如上搜索REJECT - 单个event不能提供更多的有效信息。</span>
<span class="token comment">// 所以可以先根据一些关键信息进行有效分组，再搜索关键字，如下</span>

<span class="token keyword">index</span><span class="token operator">=</span>network sourcetype<span class="token operator">=</span>cisco_esa
<span class="token operator">|</span> <span class="token keyword">transaction</span> mid dcid icid
<span class="token operator">|</span> search REJECT
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="transaction-sample-case-reporting-on-transactions"><a href="#transaction-sample-case-reporting-on-transactions" class="header-anchor">#</a> transaction sample case - Reporting on Transactions</h3> <p><em>Scenario: Create a chart to show the number of purchase transactions based on their duration.</em></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">index</span><span class="token operator">=</span>web sourcetype<span class="token operator">=</span>access_combined
<span class="token keyword">status</span><span class="token operator">=</span><span class="token number">200</span> <span class="token keyword">action</span><span class="token operator">=</span>purchase
<span class="token operator">|</span> <span class="token keyword">transaction</span> clientip maxspan<span class="token operator">=</span><span class="token number">10</span>m
<span class="token operator">|</span> chart count <span class="token keyword">BY</span> duration span<span class="token operator">=</span>log2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="transaction-vs-stats"><a href="#transaction-vs-stats" class="header-anchor">#</a> transaction vs. stats</h3> <ul><li>When you have a choice, use stats—<strong>it’s faster and more efficient, especially in large Splunk environments</strong></li> <li>Only use transaction when you:
<ul><li>Need to <strong>see events correlated together</strong> （需要看<code>correlate events</code>的时候）</li> <li><strong>Must define event grouping based on start/end values or segment on time</strong></li></ul></li> <li>Use stats when you:
<ul><li>Want to <strong>see the results of a calculation</strong> （只需要看计算结果的时候）</li> <li>Can group events based on a field value (e.g., by src_ip)</li></ul></li> <li><strong>By default, there’s a limit of 1,000 events per transaction</strong> <ul><li>No such limit applies to stats</li> <li>Admins can change limit by configuring max_events_per_bucket in <code>limits.conf</code></li></ul></li></ul> <p><em>Example1</em>:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// Scenario: Find online purchase transactions over the past year.</span>

<span class="token comment">// A:</span>
<span class="token keyword">index</span><span class="token operator">=</span>web
sourcetype<span class="token operator">=</span>access_combined earliest<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>y<span class="token variable">@y</span> latest<span class="token operator">=</span><span class="token variable">@y</span>
<span class="token operator">|</span> <span class="token keyword">transaction</span> JSESSIONID
<span class="token operator">|</span> <span class="token keyword">table</span> JSESSIONID<span class="token punctuation">,</span> <span class="token keyword">action</span><span class="token punctuation">,</span> product_name
<span class="token operator">|</span> sort JSESSIONID
 
 
<span class="token comment">// B:</span>
<span class="token keyword">index</span><span class="token operator">=</span>web
sourcetype<span class="token operator">=</span>access_combined
earliest<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>y<span class="token variable">@y</span> latest<span class="token operator">=</span><span class="token variable">@y</span>
<span class="token operator">|</span> stats <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token keyword">action</span><span class="token punctuation">)</span>
    <span class="token keyword">as</span> <span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">values</span><span class="token punctuation">(</span>product_name<span class="token punctuation">)</span>
    <span class="token keyword">as</span> &quot;product_name”
    <span class="token keyword">by</span> JSESSIONID
<span class="token operator">|</span> sort JSESSIONID
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p>• Searches produce same result</p> <p>• A took 23.381 seconds</p> <p>• B took 2.077 seconds</p> <p>• stats faster than transaction</p></blockquote> <p><em>Example2</em>:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">// A:</span>
<span class="token keyword">index</span><span class="token operator">=</span>security
sourcetype<span class="token operator">=</span>linux_secure failed
<span class="token operator">|</span> <span class="token keyword">transaction</span> src_ip
<span class="token operator">|</span> <span class="token keyword">table</span> src_ip<span class="token punctuation">,</span> eventcount
<span class="token operator">|</span> sort <span class="token operator">-</span> eventcount


<span class="token comment">// B:</span>
<span class="token keyword">index</span><span class="token operator">=</span>security
sourcetype<span class="token operator">=</span>linux_secure failed
<span class="token operator">|</span> stats count <span class="token keyword">as</span> eventcount <span class="token keyword">by</span> src_ip
<span class="token operator">|</span> sort <span class="token operator">-</span> eventcount

<span class="token comment">/*
Note
1. transaction has a limit of 1,000
2. Count of transactions vs. count of IPs
*/</span>
<span class="token comment">//结果如下</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div style="display:flex;"><img src="/assets/img/splunkstart2-4.5bf1c3f4.png" alt="" align="left" style="zoom:100%;display:block;"></div> <h2 id="introduction-to-knowledge-objects"><a href="#introduction-to-knowledge-objects" class="header-anchor">#</a> Introduction to Knowledge Objects</h2> <p>我们能够在“<strong>Settings</strong>”里面看到权限内的“<strong>KNOWLEDGE</strong>”,如下</p> <div style="display:flex;"><img src="/assets/img/splunkstart2-5.fab181cd.png" alt="" align="left" style="zoom:100%;display:block;"></div> <h3 id="what-are-knowledge-objects"><a href="#what-are-knowledge-objects" class="header-anchor">#</a> What are Knowledge Objects?</h3> <p><strong>Knowledge objects</strong> are <strong>tools</strong> you use to discover and analyze various aspects of your data (如上图)</p> <ul><li>Data interpretation – Fields and field extractions</li> <li>Data classification – Event types</li> <li>Data enrichment – Lookups and workflow actions</li> <li>Normalization – Tags and field aliases</li> <li>Datasets – Data models</li></ul> <p><strong>Shareable</strong> – Can be shared between users</p> <p><strong>Reusable</strong> – Persistent objects that can be used by multiple people or apps, such as macros and reports</p> <p><strong>Searchable</strong> – Since the objects are persistent, they can be used in a search</p> <h3 id="what-is-a-knowledge-manager"><a href="#what-is-a-knowledge-manager" class="header-anchor">#</a> What is a Knowledge Manager?</h3> <ul><li>Oversees knowledge object creation and usage for a group or deployment</li> <li>Normalizes event data</li> <li>Creates data models for Pivot users</li></ul> <h3 id="defining-naming-conventions"><a href="#defining-naming-conventions" class="header-anchor">#</a> Defining Naming Conventions</h3> <p>This course uses simple names for lab exercises, but using a naming convention in your production environment is recommended. For example:</p> <ul><li><strong>Group:</strong> Corresponds to the working group(s) of the user saving the object (examples: SEG. NEG. OPS. NOC)</li> <li><strong>Object Type:</strong> Indicates the type of object (alert, report, summary- index-populating) (examples: Alert, Report, Summary)</li> <li><strong>Description:</strong> A meaningful description of the context and intent of the search, limited to one or two words if possible;
ensures the search name is unique</li></ul> <p>So, for example: SEG_Alert_WinEventlogFailures</p> <h3 id="reviewing-permissions"><a href="#reviewing-permissions" class="header-anchor">#</a> Reviewing Permissions</h3> <table><thead><tr><th style="text-align:left;"></th> <th><strong>Description</strong></th> <th><strong>Create</strong></th> <th><strong>Read</strong></th> <th style="text-align:left;"><strong>Edit (write)</strong></th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>Private</strong></td> <td>Only the person who created the object can use it and edit it</td> <td>User <br>Power <br>Admin</td> <td>Person who created it<br>Admin</td> <td style="text-align:left;">Person who created it<br>Admin</td></tr> <tr><td style="text-align:left;"><strong>This app only</strong></td> <td>Object persists in the context of a specific app</td> <td>Power <br>Admin</td> <td>User* <br>Power* <br>Admin</td> <td style="text-align:left;">User* <br>Power* <br>Admin</td></tr> <tr><td style="text-align:left;"><strong>All apps</strong></td> <td>Object persists globally across all apps</td> <td>Admin</td> <td>User* <br>Power* <br>Admin</td> <td style="text-align:left;">User* <br>Power* <br>Admin</td></tr></tbody></table> <p>* Permission to read and/or write if creator gives permission to that role</p> <p>在object创建时，默认权限是给Owner的，我们可以在此时修改设置 - 具体参考文档</p> <h3 id="managing-knowledge-objects"><a href="#managing-knowledge-objects" class="header-anchor">#</a> Managing Knowledge Objects</h3> <p>可以在 <strong>Settings &gt; Knowledge  &gt; All configurations</strong> 下管理所有的 <code>knowledge objects</code></p> <h2 id="creating-and-managing-fields"><a href="#creating-and-managing-fields" class="header-anchor">#</a> Creating and Managing Fields</h2> <p>在 <strong>Settings &gt; Knowledge &gt; fields - [Field extractions]</strong> 下，我们可以创建并管理 fields</p> <div style="display:flex;"><img src="/assets/img/splunkstart2-6.62efa839.png" alt="" align="left" style="zoom:100%;display:block;"></div> <blockquote><p>Field Extractor 方法 - Regex / Delimiter</p></blockquote> <h2 id="creating-field-aliases-and-calculated-fields"><a href="#creating-field-aliases-and-calculated-fields" class="header-anchor">#</a> Creating Field Aliases and Calculated Fields</h2> <p><strong>Settings &gt; Knowledge &gt; fields - [Field aliases] / [Calculated fields]</strong></p> <p>具体参考官方pdf： <a href="http://heyan.site/download/Splunk%207.X%20Fundamentals%20Part%202%20%28IOD%29-unlock.pdf" target="_self" rel="noopener noreferrer">Splunk 7.X Fundamentals Part 2 (IOD)-unlock.pdf</a></p> <br> <br> <h2 id="working-with-tags-and-event-types"><a href="#working-with-tags-and-event-types" class="header-anchor">#</a> Working with Tags and Event Types</h2> <p>具体参考官方pdf： <a href="http://heyan.site/download/Splunk%207.X%20Fundamentals%20Part%202%20%28IOD%29-unlock.pdf" target="_self" rel="noopener noreferrer">Splunk 7.X Fundamentals Part 2 (IOD)-unlock.pdf</a></p> <br> <br> <h2 id="creating-and-using-macros"><a href="#creating-and-using-macros" class="header-anchor">#</a> Creating and Using Macros</h2> <p>具体类似函数，同样可以定义参数</p> <p><strong>Settings &gt; Advanced search &gt; Search Macros</strong> &gt; Add new</p> <p><em>请参考文档查看</em>：</p> <ul><li>怎么使用一个基本的macro</li> <li>怎么添加参数</li> <li>怎么使用参数（调用）</li> <li>怎么去验证你的macro</li></ul> <p><em>example</em>:</p> <blockquote><p>基本使用，example:</p> <br> <p>定义：</p> <p>Name: <strong>US_sales</strong></p> <p>Definition: <br></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>sourcetype<span class="token operator">=</span>vendor_sales VendorCountry<span class="token operator">=</span><span class="token string">&quot;United States&quot;</span>
<span class="token operator">|</span> stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> USD <span class="token keyword">by</span> product_name 
<span class="token operator">|</span> eval USD <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>'USD’<span class="token punctuation">,</span><span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <p>使用:  直接在搜索里面输入 带特殊单引号的 macro名字即可<br>`<code>US_sales</code>`</p></blockquote> <blockquote><p>带参数的使用，example:</p> <br> <p>定义：</p> <p>Name: montly_sales(3)      -- 3 代表参数的个数</p> <p>Definition:<br></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> USD <span class="token keyword">by</span> product_name
<span class="token operator">|</span> eval $currency$ <span class="token operator">=</span> <span class="token string">&quot;$symbol$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>USD<span class="token operator">*</span>$rate$<span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span>
<span class="token operator">|</span> USD <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>USD<span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Arguments:<br><code>currency,symbol,rate</code></p> <br> <p>使用：<br></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>sourcetype<span class="token operator">=</span>vendor_sales VendorCountry<span class="token operator">=</span>Germany
<span class="token operator">OR</span> VendorCountry<span class="token operator">=</span>France <span class="token operator">OR</span> VendorCountry<span class="token operator">=</span>Italy
<span class="token operator">|</span> <span class="token punctuation">`</span>monthly_sales<span class="token punctuation">(</span>euro<span class="token punctuation">,</span>€<span class="token punctuation">,</span><span class="token number">0.79</span><span class="token punctuation">)</span><span class="token punctuation">`</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>相当于:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> sourcetype<span class="token operator">=</span>vendor_sales VendorCountry<span class="token operator">=</span>Germany 
 <span class="token operator">OR</span> VendorCountry<span class="token operator">=</span>France <span class="token operator">OR</span> VendorCountry<span class="token operator">=</span>Italy <span class="token operator">|</span> 
 <span class="token comment">------</span>
 stats <span class="token function">sum</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">as</span> USD <span class="token keyword">by</span> product_name
 <span class="token operator">|</span> eval euro <span class="token operator">=</span> <span class="token string">&quot;€&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>USD<span class="token operator">*</span><span class="token number">0.79</span><span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span> 
 <span class="token operator">|</span> eval USD <span class="token operator">=</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> tostring<span class="token punctuation">(</span>USD<span class="token punctuation">,</span> <span class="token string">&quot;commas&quot;</span><span class="token punctuation">)</span>
 <span class="token comment">------</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></blockquote></blockquote> <h2 id="creating-and-using-workflow-actions"><a href="#creating-and-using-workflow-actions" class="header-anchor">#</a> Creating and Using Workflow Actions</h2> <p>Execute workflow actions from an event in your search results to interact with external resources or run another search</p> <ul><li><strong>GET</strong> - retrieve information from an external resource</li> <li><strong>POST</strong> - send field values to an external resource</li> <li><strong>Search</strong> - use field values to perform a secondary search （新开一个search）</li></ul> <div style="display:flex;"><img src="/assets/img/splunkstart2-7.99851b69.png" alt="" align="left" style="zoom:100%;display:block;"></div> <p><strong>create workflow actions:</strong></p> <p><strong>Settings &gt; Fields &gt; Workflow actions &gt; New Workflow Action</strong></p> <blockquote><p>具体参考官方pdf： <a href="http://heyan.site/download/Splunk%207.X%20Fundamentals%20Part%202%20%28IOD%29-unlock.pdf" target="_self" rel="noopener noreferrer">Splunk 7.X Fundamentals Part 2 (IOD)-unlock.pdf</a></p></blockquote> <br> <br> <h2 id="creating-data-models"><a href="#creating-data-models" class="header-anchor">#</a> Creating Data Models</h2> <br> <br> <p>to be added</p> <br> <br> <h2 id="using-the-common-information-model-cim-add-on"><a href="#using-the-common-information-model-cim-add-on" class="header-anchor">#</a> Using the Common Information Model (CIM) Add-On</h2> <br> <br> <p>to be added</p> <br> <br></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals1.html" class="prev">Splunk Fundamentals 1</a></span> <span class="next"><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals3.html">Splunk Fundamentals 3</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2ba1140b.js" defer></script><script src="/assets/js/2.858e58ff.js" defer></script><script src="/assets/js/24.f151ffcb.js" defer></script>
  </body>
</html>
