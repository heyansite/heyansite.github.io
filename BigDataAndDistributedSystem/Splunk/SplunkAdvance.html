<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Splunk 相关知识 | Yan&#39;s Blog Home</title>
    <meta name="description" content="Personal blog site">
    
    
    <link rel="preload" href="/assets/css/0.styles.659f981c.css" as="style"><link rel="preload" href="/assets/js/app.2ba1140b.js" as="script"><link rel="preload" href="/assets/js/2.858e58ff.js" as="script"><link rel="preload" href="/assets/js/39.e7017f9b.js" as="script"><link rel="prefetch" href="/assets/js/10.5dcc1f52.js"><link rel="prefetch" href="/assets/js/100.0327e00b.js"><link rel="prefetch" href="/assets/js/101.404f187c.js"><link rel="prefetch" href="/assets/js/102.d78878ec.js"><link rel="prefetch" href="/assets/js/103.a682f6f1.js"><link rel="prefetch" href="/assets/js/104.d831bcb5.js"><link rel="prefetch" href="/assets/js/105.afbf1884.js"><link rel="prefetch" href="/assets/js/106.8e9709d3.js"><link rel="prefetch" href="/assets/js/107.9712aa22.js"><link rel="prefetch" href="/assets/js/108.4158fdb6.js"><link rel="prefetch" href="/assets/js/109.ae61a303.js"><link rel="prefetch" href="/assets/js/11.34e3d90e.js"><link rel="prefetch" href="/assets/js/110.0abce6c9.js"><link rel="prefetch" href="/assets/js/111.b5c958e5.js"><link rel="prefetch" href="/assets/js/112.fdacfaf6.js"><link rel="prefetch" href="/assets/js/113.9d95243d.js"><link rel="prefetch" href="/assets/js/114.f759f9b9.js"><link rel="prefetch" href="/assets/js/115.1b1f9f3d.js"><link rel="prefetch" href="/assets/js/116.1e5e62e4.js"><link rel="prefetch" href="/assets/js/117.952db9d4.js"><link rel="prefetch" href="/assets/js/118.ed9df468.js"><link rel="prefetch" href="/assets/js/119.f19ee9e0.js"><link rel="prefetch" href="/assets/js/12.cd237cda.js"><link rel="prefetch" href="/assets/js/120.24dbecef.js"><link rel="prefetch" href="/assets/js/121.0aa2d47c.js"><link rel="prefetch" href="/assets/js/122.5205ca42.js"><link rel="prefetch" href="/assets/js/123.25aa20a6.js"><link rel="prefetch" href="/assets/js/124.420b2a92.js"><link rel="prefetch" href="/assets/js/125.091331f4.js"><link rel="prefetch" href="/assets/js/126.471b335f.js"><link rel="prefetch" href="/assets/js/127.60ffdb36.js"><link rel="prefetch" href="/assets/js/128.9c5c36ef.js"><link rel="prefetch" href="/assets/js/129.36fd802b.js"><link rel="prefetch" href="/assets/js/13.de2ffe9f.js"><link rel="prefetch" href="/assets/js/130.822de8a4.js"><link rel="prefetch" href="/assets/js/131.697750e2.js"><link rel="prefetch" href="/assets/js/132.fd5faa78.js"><link rel="prefetch" href="/assets/js/133.cf327ef4.js"><link rel="prefetch" href="/assets/js/134.6cdb8690.js"><link rel="prefetch" href="/assets/js/135.906c8800.js"><link rel="prefetch" href="/assets/js/136.43585d13.js"><link rel="prefetch" href="/assets/js/137.3c7ddb41.js"><link rel="prefetch" href="/assets/js/138.e3274ead.js"><link rel="prefetch" href="/assets/js/139.7fa38b58.js"><link rel="prefetch" href="/assets/js/14.9d6406e7.js"><link rel="prefetch" href="/assets/js/140.1b026dad.js"><link rel="prefetch" href="/assets/js/141.c1adfec5.js"><link rel="prefetch" href="/assets/js/142.ed2a4a22.js"><link rel="prefetch" href="/assets/js/143.af96e2f9.js"><link rel="prefetch" href="/assets/js/144.923a7d38.js"><link rel="prefetch" href="/assets/js/145.d88163de.js"><link rel="prefetch" href="/assets/js/146.2134dd3e.js"><link rel="prefetch" href="/assets/js/147.9925c468.js"><link rel="prefetch" href="/assets/js/148.109297cc.js"><link rel="prefetch" href="/assets/js/149.ae529d47.js"><link rel="prefetch" href="/assets/js/15.fe3428fa.js"><link rel="prefetch" href="/assets/js/150.6bf9657f.js"><link rel="prefetch" href="/assets/js/151.603cf1f9.js"><link rel="prefetch" href="/assets/js/152.b64ef399.js"><link rel="prefetch" href="/assets/js/153.fd5cde7c.js"><link rel="prefetch" href="/assets/js/154.8cedd5d3.js"><link rel="prefetch" href="/assets/js/155.042308eb.js"><link rel="prefetch" href="/assets/js/156.1f58dd5a.js"><link rel="prefetch" href="/assets/js/157.69e07481.js"><link rel="prefetch" href="/assets/js/158.40b656df.js"><link rel="prefetch" href="/assets/js/159.823c56a4.js"><link rel="prefetch" href="/assets/js/16.7976352c.js"><link rel="prefetch" href="/assets/js/160.93aba24e.js"><link rel="prefetch" href="/assets/js/161.3ae7729a.js"><link rel="prefetch" href="/assets/js/162.8092cc22.js"><link rel="prefetch" href="/assets/js/163.3c82e51b.js"><link rel="prefetch" href="/assets/js/164.d358ee7b.js"><link rel="prefetch" href="/assets/js/165.60d778eb.js"><link rel="prefetch" href="/assets/js/166.54d7340a.js"><link rel="prefetch" href="/assets/js/167.5fd6aaa3.js"><link rel="prefetch" href="/assets/js/168.205929f8.js"><link rel="prefetch" href="/assets/js/169.873b90b1.js"><link rel="prefetch" href="/assets/js/17.72e8ffa6.js"><link rel="prefetch" href="/assets/js/170.68c49359.js"><link rel="prefetch" href="/assets/js/171.d8f93304.js"><link rel="prefetch" href="/assets/js/172.6b496cc7.js"><link rel="prefetch" href="/assets/js/173.f276a0ce.js"><link rel="prefetch" href="/assets/js/174.09cb41e2.js"><link rel="prefetch" href="/assets/js/175.c77ce8d9.js"><link rel="prefetch" href="/assets/js/176.01ab9f3f.js"><link rel="prefetch" href="/assets/js/177.2f91a2a4.js"><link rel="prefetch" href="/assets/js/178.5f0a0527.js"><link rel="prefetch" href="/assets/js/179.0d14e948.js"><link rel="prefetch" href="/assets/js/18.8264b169.js"><link rel="prefetch" href="/assets/js/180.9a15f295.js"><link rel="prefetch" href="/assets/js/181.d5bcbada.js"><link rel="prefetch" href="/assets/js/182.571b87a8.js"><link rel="prefetch" href="/assets/js/183.b87f5a38.js"><link rel="prefetch" href="/assets/js/184.90ecbd35.js"><link rel="prefetch" href="/assets/js/185.3a38f733.js"><link rel="prefetch" href="/assets/js/186.881a0fab.js"><link rel="prefetch" href="/assets/js/187.17663dea.js"><link rel="prefetch" href="/assets/js/188.471fcd9b.js"><link rel="prefetch" href="/assets/js/189.6d486653.js"><link rel="prefetch" href="/assets/js/19.e6227b20.js"><link rel="prefetch" href="/assets/js/190.357b4cc8.js"><link rel="prefetch" href="/assets/js/191.ccf9ae83.js"><link rel="prefetch" href="/assets/js/192.3ee45cf5.js"><link rel="prefetch" href="/assets/js/193.2fbcbc68.js"><link rel="prefetch" href="/assets/js/194.61d0acd9.js"><link rel="prefetch" href="/assets/js/195.33b772c3.js"><link rel="prefetch" href="/assets/js/196.7d35848a.js"><link rel="prefetch" href="/assets/js/197.4b958d27.js"><link rel="prefetch" href="/assets/js/198.dfbfba98.js"><link rel="prefetch" href="/assets/js/199.f6c7aacb.js"><link rel="prefetch" href="/assets/js/20.65ad9b00.js"><link rel="prefetch" href="/assets/js/200.6a05302e.js"><link rel="prefetch" href="/assets/js/201.be446c97.js"><link rel="prefetch" href="/assets/js/202.d058ca1d.js"><link rel="prefetch" href="/assets/js/203.ef2b609c.js"><link rel="prefetch" href="/assets/js/204.dab38ee5.js"><link rel="prefetch" href="/assets/js/21.300f7dfb.js"><link rel="prefetch" href="/assets/js/22.0ed457bc.js"><link rel="prefetch" href="/assets/js/23.9cf0f43d.js"><link rel="prefetch" href="/assets/js/24.f151ffcb.js"><link rel="prefetch" href="/assets/js/25.680a763b.js"><link rel="prefetch" href="/assets/js/26.6a5f804d.js"><link rel="prefetch" href="/assets/js/27.98408441.js"><link rel="prefetch" href="/assets/js/28.acbefbd1.js"><link rel="prefetch" href="/assets/js/29.fbd2340a.js"><link rel="prefetch" href="/assets/js/3.753236a7.js"><link rel="prefetch" href="/assets/js/30.30b44255.js"><link rel="prefetch" href="/assets/js/31.510d262b.js"><link rel="prefetch" href="/assets/js/32.c204bc79.js"><link rel="prefetch" href="/assets/js/33.5fa66039.js"><link rel="prefetch" href="/assets/js/34.6db47b26.js"><link rel="prefetch" href="/assets/js/35.fcb88dd5.js"><link rel="prefetch" href="/assets/js/36.e294e99d.js"><link rel="prefetch" href="/assets/js/37.fe541556.js"><link rel="prefetch" href="/assets/js/38.94af8189.js"><link rel="prefetch" href="/assets/js/4.1c3159e6.js"><link rel="prefetch" href="/assets/js/40.b7a1deeb.js"><link rel="prefetch" href="/assets/js/41.ae4d7d1e.js"><link rel="prefetch" href="/assets/js/42.5dc5c7f6.js"><link rel="prefetch" href="/assets/js/43.73610732.js"><link rel="prefetch" href="/assets/js/44.2b0e19f3.js"><link rel="prefetch" href="/assets/js/45.903efdc0.js"><link rel="prefetch" href="/assets/js/46.0684656f.js"><link rel="prefetch" href="/assets/js/47.6425b35e.js"><link rel="prefetch" href="/assets/js/48.43663ba9.js"><link rel="prefetch" href="/assets/js/49.34841bc0.js"><link rel="prefetch" href="/assets/js/5.d3774f5f.js"><link rel="prefetch" href="/assets/js/50.48ce1d7e.js"><link rel="prefetch" href="/assets/js/51.1820aa29.js"><link rel="prefetch" href="/assets/js/52.5317c537.js"><link rel="prefetch" href="/assets/js/53.71b86df9.js"><link rel="prefetch" href="/assets/js/54.31ed2a5e.js"><link rel="prefetch" href="/assets/js/55.4f9933ab.js"><link rel="prefetch" href="/assets/js/56.beb74e07.js"><link rel="prefetch" href="/assets/js/57.705bc19e.js"><link rel="prefetch" href="/assets/js/58.f5fd656b.js"><link rel="prefetch" href="/assets/js/59.cc8ae217.js"><link rel="prefetch" href="/assets/js/6.f082ca37.js"><link rel="prefetch" href="/assets/js/60.fc3cf484.js"><link rel="prefetch" href="/assets/js/61.b5032b43.js"><link rel="prefetch" href="/assets/js/62.64d7637a.js"><link rel="prefetch" href="/assets/js/63.2a71075b.js"><link rel="prefetch" href="/assets/js/64.21eb4820.js"><link rel="prefetch" href="/assets/js/65.11535a8c.js"><link rel="prefetch" href="/assets/js/66.d9c62638.js"><link rel="prefetch" href="/assets/js/67.5782c958.js"><link rel="prefetch" href="/assets/js/68.35886dae.js"><link rel="prefetch" href="/assets/js/69.934aa057.js"><link rel="prefetch" href="/assets/js/7.9a79fd87.js"><link rel="prefetch" href="/assets/js/70.53c7c7a2.js"><link rel="prefetch" href="/assets/js/71.0e82b1c6.js"><link rel="prefetch" href="/assets/js/72.1da0eaf9.js"><link rel="prefetch" href="/assets/js/73.3dabc9cd.js"><link rel="prefetch" href="/assets/js/74.b2ae43f6.js"><link rel="prefetch" href="/assets/js/75.55bf2044.js"><link rel="prefetch" href="/assets/js/76.2f88e50b.js"><link rel="prefetch" href="/assets/js/77.d916e87e.js"><link rel="prefetch" href="/assets/js/78.0e80a77d.js"><link rel="prefetch" href="/assets/js/79.03bce65e.js"><link rel="prefetch" href="/assets/js/8.60d5a8a9.js"><link rel="prefetch" href="/assets/js/80.96678f59.js"><link rel="prefetch" href="/assets/js/81.75ffa4d3.js"><link rel="prefetch" href="/assets/js/82.41c1aeb7.js"><link rel="prefetch" href="/assets/js/83.16d5e455.js"><link rel="prefetch" href="/assets/js/84.195ca01f.js"><link rel="prefetch" href="/assets/js/85.d850d4dd.js"><link rel="prefetch" href="/assets/js/86.32d87d56.js"><link rel="prefetch" href="/assets/js/87.5f97a4f6.js"><link rel="prefetch" href="/assets/js/88.f5b0bbdb.js"><link rel="prefetch" href="/assets/js/89.9f9150f5.js"><link rel="prefetch" href="/assets/js/9.74db15a0.js"><link rel="prefetch" href="/assets/js/90.f69286ce.js"><link rel="prefetch" href="/assets/js/91.c9995055.js"><link rel="prefetch" href="/assets/js/92.e992da4f.js"><link rel="prefetch" href="/assets/js/93.14137340.js"><link rel="prefetch" href="/assets/js/94.c8228a63.js"><link rel="prefetch" href="/assets/js/95.bbb7ce03.js"><link rel="prefetch" href="/assets/js/96.ce87793d.js"><link rel="prefetch" href="/assets/js/97.4fdd8a0b.js"><link rel="prefetch" href="/assets/js/98.74cfc635.js"><link rel="prefetch" href="/assets/js/99.abdd1b46.js">
    <link rel="stylesheet" href="/assets/css/0.styles.659f981c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yan's Blog Home</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>大数据和分布式系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统理论</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式协调服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据摄取 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据流 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据存储 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据处理 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析 Layer (OLAP)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统基础框架Hadoop</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Data Platform - Splunk</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BigDataAndDistributedSystem/Splunk/" class="sidebar-link">Data Platform - Splunk</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals1.html" class="sidebar-link">Splunk Fundamentals 1</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals2.html" class="sidebar-link">Splunk Fundamentals 2</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals3.html" class="sidebar-link">Splunk Fundamentals 3</a></li><li><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html" class="active sidebar-link">Splunk 相关知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#get-data-in-overview" class="sidebar-link">Get Data In - Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎data-pipeline" class="sidebar-link">▎Data Pipeline</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎the-data-pipeline-segments-in-depth" class="sidebar-link">▎The data pipeline segments in depth</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎event-processing" class="sidebar-link">▎Event processing</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎components-and-the-data-pipeline" class="sidebar-link">▎Components and the data pipeline</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎configuration-parameters-and-the-data-pipeline" class="sidebar-link">▎Configuration parameters and the data pipeline</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#how-indexing-works" class="sidebar-link">How Indexing Works</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎how-splunk-processes-data-through-pipelines-and-processes" class="sidebar-link">▎How Splunk processes data through pipelines and processes</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎brief-diagram-pipelines-and-queues" class="sidebar-link">▎Brief Diagram - Pipelines and Queues</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎detail-diagram-standalone-splunk" class="sidebar-link">▎Detail Diagram - Standalone Splunk</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎detail-diagram-uf-lwf-to-indexer" class="sidebar-link">▎Detail Diagram - UF/LWF to Indexer</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#where-do-i-configure-my-splunk-settings" class="sidebar-link">Where do I configure my Splunk settings?</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#参考知识" class="sidebar-link">参考知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎what-is-role-of-transforms-conf-vs-props-conf-for-field-extraction" class="sidebar-link">▎What is role of transforms.conf vs. props.conf for field extraction?</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎search-time-versus-index-time-field-extractions" class="sidebar-link">▎search-time versus index-time field extractions</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎what-is-the-difference-of-results-between-verbose-and-fast-mode" class="sidebar-link">▎What is the difference of results between verbose and fast mode?</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎index-time-vs-search-time-processing" class="sidebar-link">▎Index time Vs Search time Processing</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎config文件执行顺序" class="sidebar-link">▎Config文件执行顺序</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data Platform - ELK</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/index/" class="sidebar-link">&lt; 首页</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="splunk-相关知识"><a href="#splunk-相关知识" class="header-anchor">#</a> Splunk 相关知识</h1> <div class="custom-block tip"><p class="custom-block-title">参考</p> <ul><li><a href="https://docs.splunk.com/" target="_self" rel="noopener noreferrer">https://docs.splunk.com/</a></li> <li><a href="https://wiki.splunk.com/Community:HowIndexingWorks" target="_self" rel="noopener noreferrer">https://wiki.splunk.com/Community:HowIndexingWorks</a></li></ul></div> <p>主要还是以官方文档为主要学习源，摘选一些片段来加深对Splunk的理解</p> <h2 id="get-data-in-overview"><a href="#get-data-in-overview" class="header-anchor">#</a> Get Data In - Overview</h2> <h3 id="▎data-pipeline"><a href="#▎data-pipeline" class="header-anchor">#</a> ▎Data Pipeline</h3> <p>The data pipeline has these segments:</p> <ul><li><strong><a href="https://docs.splunk.com/Splexicon:Input" target="_self" rel="noopener noreferrer">Input</a></strong></li> <li><strong><a href="https://docs.splunk.com/Splexicon:Parsing" target="_self" rel="noopener noreferrer">Parsing</a></strong></li> <li><strong><a href="https://docs.splunk.com/Splexicon:Index" target="_self" rel="noopener noreferrer">Indexing</a></strong></li> <li><strong><a href="https://docs.splunk.com/Splexicon:Search" target="_self" rel="noopener noreferrer">Search</a></strong></li></ul> <p>The correspondence between the three typical processing tiers and the four data pipeline segments is this:</p> <ul><li>The data input tier handles the input segment.</li> <li>The indexing tier handles the parsing and indexing segments.</li> <li>The search management tier handles the search segment.</li></ul> <div style="display:flex;"><img src="/assets/img/splunkadvance-1.7bf19bc0.png" alt="" align="left" style="zoom:120%;display:block;"></div> <blockquote><p><strong>Note:</strong> The diagram represents a simplified view of the indexing architecture. It provides a functional view of the architecture and does not fully describe Splunk software internals. In particular, the parsing pipeline actually consists of three pipelines: <strong>parsing</strong>, <strong>merging</strong>, and <strong>typing</strong>, which together handle the parsing function. The distinction can matter during troubleshooting, but does not ordinarily affect how you configure or deploy Splunk Enterprise components. For a more detailed diagram of the data pipeline, see &quot;<a href="http://wiki.splunk.com/Community:HowIndexingWorks" target="_self" rel="noopener noreferrer">How Indexing Works</a>&quot; in the Community Wiki.</p></blockquote> <h3 id="▎the-data-pipeline-segments-in-depth"><a href="#▎the-data-pipeline-segments-in-depth" class="header-anchor">#</a> ▎The data pipeline segments in depth</h3> <p>This section provides more detail about the segments of the data pipeline. For more information on the parsing and indexing segments, see also <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Indexer/Howindexingworks" target="_self" rel="noopener noreferrer">&quot;How indexing works&quot;</a> in the <em>Managing Indexers and Clusters of Indexers</em> manual.</p> <blockquote><h4 id="input"><a href="#input" class="header-anchor">#</a> Input</h4> <p>In the input segment, Splunk software consumes data. It acquires the raw data stream from its source, breaks it into 64K blocks, and annotates each block with some metadata keys. The keys apply to the entire input source overall. They include the <strong><a href="https://docs.splunk.com/Splexicon:Host" target="_self" rel="noopener noreferrer">host</a></strong>, <strong><a href="https://docs.splunk.com/Splexicon:Source" target="_self" rel="noopener noreferrer">source</a></strong>, and <strong><a href="https://docs.splunk.com/Splexicon:Sourcetype" target="_self" rel="noopener noreferrer">source type</a></strong> of the data. The keys can also include values that are used internally, such as the character encoding of the data stream, and values that control later processing of the data, such as the index into which the events should be stored.</p> <p>During this phase, Splunk software does not look at the contents of the data stream, so the keys apply to the entire source, not to individual events. In fact, at this point, Splunk software has no notion of individual events at all, only of a stream of data with certain global properties.</p> <h4 id="parsing"><a href="#parsing" class="header-anchor">#</a> Parsing</h4> <p>During the parsing segment, Splunk software examines, analyzes, and transforms the data. This is also known as <strong><a href="https://docs.splunk.com/Splexicon:Eventprocessing" target="_self" rel="noopener noreferrer">event processing</a></strong>. It is during this phase that Splunk software breaks the data stream into individual events.The parsing phase has many sub-phases:</p> <ul><li>Breaking the stream of data into individual lines.</li> <li>Identifying, parsing, and setting timestamps.</li> <li>Annotating individual events with metadata copied from the source-wide keys.</li> <li>Transforming event data and metadata according to regex transform rules.</li></ul> <h4 id="indexing"><a href="#indexing" class="header-anchor">#</a> Indexing</h4> <p>During indexing, Splunk software takes the parsed events and writes them to the index on disk. It writes both compressed raw data and the corresponding index files.</p> <p>For brevity, parsing and indexing are often referred together as the indexing process. At a high level, that makes sense. But when you need to examine the actual processing of data more closely or decide how to allocate your components, it can be important to consider the two segments individually.</p> <h4 id="search"><a href="#search" class="header-anchor">#</a> Search</h4> <p>The search segment manages all aspects of how the user accesses, views, and uses the indexed data. As part of the search function, Splunk software stores user-created <strong><a href="https://docs.splunk.com/Splexicon:Knowledgeobject" target="_self" rel="noopener noreferrer">knowledge objects</a></strong>, such as reports, event types, dashboards, alerts, and field extractions. The search function also manages the search process itself.</p></blockquote> <h3 id="▎event-processing"><a href="#▎event-processing" class="header-anchor">#</a> ▎Event processing</h3> <p>Event processing occurs in two stages, parsing and indexing. All data enters through the parsing pipeline as large chunks. During parsing, the Splunk platform breaks these chunks into events. It then hands off the events to the indexing pipeline, where final processing occurs. <br>During both parsing and indexing, the Splunk platform transforms the data. You can configure most of these processes to adapt them to your needs.</p> <blockquote><p>In the parsing pipeline, the Splunk platform performs a number of actions. The following table shows some examples in addition to related information:</p> <table><thead><tr><th style="text-align:left;">Action</th> <th style="text-align:left;">Related information</th></tr></thead> <tbody><tr><td style="text-align:left;">Extracting a set of default fields for each event, including <code>host</code>, <code>source</code>, and <code>sourcetype</code>.</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Aboutdefaultfields" target="_self" rel="noopener noreferrer">About default fields</a></td></tr> <tr><td style="text-align:left;">Configuring character set encoding.</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Configurecharactersetencoding" target="_self" rel="noopener noreferrer">Configure character set encoding</a></td></tr> <tr><td style="text-align:left;">Identifying line termination using line breaking rules. You can also modify line termination settings interactively, using the Set Source Type page in Splunk Web.</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Configureeventlinebreaking" target="_self" rel="noopener noreferrer">Configure event line breaking</a> <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Setsourcetype" target="_self" rel="noopener noreferrer">Assign the correct source types to your data</a></td></tr> <tr><td style="text-align:left;">Identifying or creating timestamps. At the same time that it processes timestamps, Splunk software identifies event boundaries. You can modify timestamp settings interactively, using the Set Source Type page in Splunk Web.</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/HowSplunkextractstimestamps" target="_self" rel="noopener noreferrer">How timestamp assignment works</a> <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Setsourcetype" target="_self" rel="noopener noreferrer">Assign the correct source types to your data</a></td></tr> <tr><td style="text-align:left;">Anonymizing data, based on your configuration. You can mask sensitive data (such as credit card or social security numbers) at this stage.</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Anonymizedata" target="_self" rel="noopener noreferrer">Anonymize data</a></td></tr> <tr><td style="text-align:left;">Applying custom metadata to incoming events, based on your configuration.</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Assignmetadatatoeventsdynamically" target="_self" rel="noopener noreferrer">Assign default fields dynamically</a></td></tr></tbody></table> <p>In the indexing pipeline, the Splunk platform performs additional processing. For example:</p> <ul><li>Breaking all events into segments that can then be searched. You can determine the level of segmentation, which affects indexing and searching speed, search capability, and efficiency of disk compression. See <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Abouteventsegmentation" target="_self" rel="noopener noreferrer">About event segmentation</a>.</li> <li>Building the index data structures.</li> <li>Writing the raw data and index files to disk, where post-indexing compression occurs.</li></ul> <p>The distinction between parsing and indexing pipelines matters mainly for forwarders. Heavy forwarders can parse data locally and then forward the parsed data on to receiving indexers, where the final indexing occurs. Universal forwarders offer minimal parsing in specific cases such as handling structured data files. Additional parsing occurs on the receiving Splunk Enterprise indexer.</p> <p>For information about events and what happens to them during the indexing process, see <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Overviewofeventprocessing" target="_self" rel="noopener noreferrer">Overview of event processing</a>.</p> <blockquote><p><strong>Overview of event processing</strong></p> <br> <p>The Splunk platform indexes events, which are records of activity that reside in machine data. Events provide information about the systems that produce the machine data. The term <strong><a href="https://docs.splunk.com/Splexicon:Eventdata" target="_self" rel="noopener noreferrer">event data</a></strong> refers to the contents of a Splunk platform index.</p> <p>Here is a sample event:</p> <p><code>172.26.34.223 - - [01/Jul/2017:12:05:27 -0700] &quot;GET /trade/app?action=logout HTTP/1.1&quot; 200 2953</code></p> <br> <p>When Splunk software indexes events, it does the following tasks:</p> <table><thead><tr><th style="text-align:left;">Task</th> <th style="text-align:left;">Link</th></tr></thead> <tbody><tr><td style="text-align:left;">Configures character set encoding</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Configurecharactersetencoding" target="_self" rel="noopener noreferrer">Configure character set encoding</a></td></tr> <tr><td style="text-align:left;">Configures line breaking for multi-line events</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Configureeventlinebreaking" target="_self" rel="noopener noreferrer">Configure event line breaking</a></td></tr> <tr><td style="text-align:left;">Identifies event timestamps and applies timestamps to events if they don't exist</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Handleeventtimestamps" target="_self" rel="noopener noreferrer">Configure event timestamps</a></td></tr> <tr><td style="text-align:left;">Extracts a set of useful standard fields, such as <code>host</code>, <code>source</code>, and <code>sourcetype</code></td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Aboutdefaultfields" target="_self" rel="noopener noreferrer">About default fields</a></td></tr> <tr><td style="text-align:left;">Segments events</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Abouteventsegmentation" target="_self" rel="noopener noreferrer">About event segmentation</a></td></tr> <tr><td style="text-align:left;">Dynamically assigns metadata to events, if specified</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Assignmetadatatoeventsdynamically" target="_self" rel="noopener noreferrer">Assign default fields dynamically</a></td></tr> <tr><td style="text-align:left;">Anonymizes data, if specified</td> <td style="text-align:left;"><a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Anonymizedata" target="_self" rel="noopener noreferrer">Anonymize data</a></td></tr></tbody></table></blockquote></blockquote> <h3 id="▎components-and-the-data-pipeline"><a href="#▎components-and-the-data-pipeline" class="header-anchor">#</a> ▎Components and the data pipeline</h3> <table><thead><tr><th style="text-align:left;">Data pipeline segment</th> <th style="text-align:left;">Components</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong><a href="https://docs.splunk.com/Splexicon:Input" target="_self" rel="noopener noreferrer">Data input</a></strong></td> <td style="text-align:left;"><strong><a href="https://docs.splunk.com/Splexicon:Indexer" target="_self" rel="noopener noreferrer">indexer</a></strong><br><strong><a href="https://docs.splunk.com/Splexicon:Universalforwarder" target="_self" rel="noopener noreferrer">universal forwarder</a></strong><br><strong><a href="https://docs.splunk.com/Splexicon:Heavyforwarder" target="_self" rel="noopener noreferrer">heavy forwarder</a></strong></td></tr> <tr><td style="text-align:left;"><strong><a href="https://docs.splunk.com/Splexicon:Parsing" target="_self" rel="noopener noreferrer">Parsing</a></strong></td> <td style="text-align:left;">indexer <br>heavy forwarder <br>light/universal forwarder (in conjunction with the <code>INDEXED_EXTRACTIONS</code> attribute only)</td></tr> <tr><td style="text-align:left;"><strong><a href="https://docs.splunk.com/Splexicon:Index" target="_self" rel="noopener noreferrer">Indexing</a></strong></td> <td style="text-align:left;">indexer</td></tr> <tr><td style="text-align:left;"><strong><a href="https://docs.splunk.com/Splexicon:Search" target="_self" rel="noopener noreferrer">Search</a></strong></td> <td style="text-align:left;">indexer <br><strong><a href="https://docs.splunk.com/Splexicon:Searchhead" target="_self" rel="noopener noreferrer">search head</a></strong></td></tr></tbody></table> <blockquote><p>Parsing can also occur on other components under limited circumstances:</p> <ul><li>Various components, such as search heads and <strong><a href="https://docs.splunk.com/Splexicon:Managernode" target="_self" rel="noopener noreferrer">indexer cluster manager nodes</a></strong>, process their own internal data. When doing so, they perform parsing locally.</li> <li>When a universal forwarder ingests structured data, it performs the parsing locally. The indexer does not further parse the structured data. See <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Data/Extractfieldsfromfileswithstructureddata" target="_self" rel="noopener noreferrer">Extract fields from files with structured data</a> in <em>Getting Data In</em>.</li></ul></blockquote> <blockquote><h4 id="some-typical-interactions-between-components"><a href="#some-typical-interactions-between-components" class="header-anchor">#</a> Some typical interactions between components</h4> <p>These are examples of some of the ways that you can distribute and manage Splunk Enterprise functionality.</p> <ol><li><strong>Forward data to an indexer</strong></li></ol> <p>In most deployments, <strong><a href="https://docs.splunk.com/Splexicon:Forwarder" target="_self" rel="noopener noreferrer">forwarders</a></strong> handle data input only, collecting data and sending it on to a Splunk Enterprise indexer. The indexer then performs both parsing and indexing. In some deployments, however, the forwarders also parse the data before sending it to the indexer, which then only indexes.</p> <p>See <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Deploy/Datapipeline" target="_self" rel="noopener noreferrer">How data moves through Splunk Enterprise: The data pipeline</a> for the distinction between parsing and indexing.</p> <p>Forwarders come in two flavors:</p> <ul><li><strong>Universal forwarders.</strong> These maintain a small footprint on their host machine. They perform minimal processing on the incoming data streams before forwarding them on to an indexer. The indexer then parses and indexes the data.</li> <li><strong>Heavy forwarders.</strong> These retain much of the functionality of a full Splunk Enterprise instance. They can parse data before forwarding it to the receiving indexer. When a heavy forwarder parses the data, the indexer handles only the indexing segment.</li></ul> <p>Both types of forwarders tag data with metadata, such as host, source, and source type, before forwarding it on to the indexer.</p> <p>Forwarders allow you to use resources efficiently while processing large quantities or disparate types of data. They also enable a number of interesting deployment topologies, by offering capabilities for <strong><a href="https://docs.splunk.com/Splexicon:Loadbalancing" target="_self" rel="noopener noreferrer">load balancing</a></strong>, data <strong><a href="https://docs.splunk.com/Splexicon:Filtering" target="_self" rel="noopener noreferrer">filtering</a></strong>, and <strong><a href="https://docs.splunk.com/Splexicon:Datarouting" target="_self" rel="noopener noreferrer">routing</a></strong>.</p> <p>For an extended discussion of forwarders, including configuration and detailed use cases, see <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/Forwarding/Aboutforwardingandreceivingdata" target="_self" rel="noopener noreferrer">About forwarding and receiving</a> in <em>Forwarding Data</em>.</p> <ol start="2"><li><strong>Search across multiple indexers</strong></li></ol> <p>In <strong><a href="https://docs.splunk.com/Splexicon:Distributedsearch" target="_self" rel="noopener noreferrer">distributed search</a></strong>, you separate the indexing/parsing and search segments. Search heads send search requests to indexers and merge the results back to the user. This topology is particularly useful for horizontal scaling. To expand your deployment beyond the departmental level, you will likely employ distributed search.</p> <p>For an extended discussion of distributed search, including configuration and detailed use cases, see <a href="http://docs.splunk.com/Documentation/Splunk/8.2.1/DistSearch/Whatisdistributedsearch" target="_self" rel="noopener noreferrer">About distributed search</a> in <em>Distributed Search</em>.</p></blockquote> <h3 id="▎configuration-parameters-and-the-data-pipeline"><a href="#▎configuration-parameters-and-the-data-pipeline" class="header-anchor">#</a> ▎Configuration parameters and the data pipeline</h3> <p><strong>How configuration parameters correlate to phases of the pipeline</strong></p> <p>This is a non-exhaustive list of configuration parameters and the pipeline phases that use them. By combining this information with an understanding of which Splunk component in your particular deployment performs each phase, you can determine where to configure each setting. <br>For example, if you are using universal forwarders to consume inputs, you need to configure <code>inputs.conf</code> parameters on the forwarders. If, however, your indexer is directly consuming network inputs, you need to configure those network-related <code>inputs.conf</code> parameters on the indexer.<br>The following items in the phases below are listed in the order Splunk applies them (ie <code>LINE_BREAKER</code> occurs before <code>TRUNCATE</code>).</p> <blockquote><h4 id="input-phase"><a href="#input-phase" class="header-anchor">#</a> Input phase</h4> <ul><li>inputs.conf</li> <li>props.conf
<ul><li><code>CHARSET</code></li> <li><code>NO_BINARY_CHECK</code></li> <li><code>CHECK_METHOD</code></li> <li><code>CHECK_FOR_HEADER</code> (deprecated)</li> <li><code>PREFIX_SOURCETYPE</code></li> <li>sourcetype</li></ul></li> <li>wmi.conf</li> <li>regmon-filters.conf</li></ul> <h4 id="structured-parsing-phase"><a href="#structured-parsing-phase" class="header-anchor">#</a> Structured parsing phase</h4> <ul><li>props.conf
<ul><li><code>INDEXED_EXTRACTIONS</code>, and all other structured data header extractions</li></ul></li></ul> <h4 id="parsing-phase"><a href="#parsing-phase" class="header-anchor">#</a> Parsing phase</h4> <ul><li>props.conf
<ul><li><code>LINE_BREAKER</code>, <code>TRUNCATE</code>, <code>SHOULD_LINEMERGE</code>, <code>BREAK_ONLY_BEFORE_DATE</code>, and all other line merging settings</li> <li><code>TIME_PREFIX</code>, <code>TIME_FORMAT</code>, <code>DATETIME_CONFIG</code> (datetime.xml), <code>TZ</code>, and all other time extraction settings and rules</li> <li><code>TRANSFORMS</code> which includes per-event queue filtering, per-event index assignment, per-event routing</li> <li><code>SEDCMD</code></li> <li><code>MORE_THAN</code>, <code>LESS_THAN</code></li></ul></li> <li>transforms.conf
<ul><li>stanzas referenced by a <code>TRANSFORMS</code> clause in props.conf</li> <li><code>LOOKAHEAD</code>, <code>DEST_KEY</code>, <code>WRITE_META</code>, <code>DEFAULT_VALUE</code>, <code>REPEAT_MATCH</code></li></ul></li></ul> <h4 id="indexing-phase"><a href="#indexing-phase" class="header-anchor">#</a> Indexing phase</h4> <ul><li>props.conf
<ul><li><code>SEGMENTATION</code></li></ul></li> <li>indexes.conf</li> <li>segmenters.conf</li></ul> <h4 id="search-phase"><a href="#search-phase" class="header-anchor">#</a> Search phase</h4> <ul><li>props.conf
<ul><li><code>EXTRACT</code></li> <li><code>REPORT</code></li> <li><code>LOOKUP</code></li> <li><code>KV_MODE</code></li> <li><code>FIELDALIAS</code></li> <li><code>EVAL</code></li> <li><code>rename</code></li></ul></li> <li>transforms.conf
<ul><li>stanzas referenced by a <code>REPORT</code> clause in props.conf</li> <li><code>filename</code>, <code>external_cmd</code>, and all other lookup-related settings</li> <li><code>FIELDS</code>, <code>DELIMS</code></li> <li><code>MV_ADD</code></li></ul></li> <li>lookup files in the lookups folders</li> <li>search and lookup scripts in the bin folders</li> <li>search commands and lookup scripts</li> <li>savedsearches.conf</li> <li>eventtypes.conf</li> <li>tags.conf</li> <li>commands.conf</li> <li>alert_actions.conf</li> <li>macros.conf</li> <li>fields.conf</li> <li>transactiontypes.conf</li> <li>multikv.conf</li></ul> <h4 id="other-configuration-settings"><a href="#other-configuration-settings" class="header-anchor">#</a> Other configuration settings</h4> <p>There are some settings that don't work well in a distributed Splunk environment. These tend to be exceptional and include:</p> <ul><li>props.conf
<ul><li><code>CHECK_FOR_HEADER</code> (deprecated), <code>LEARN_MODEL</code>, <code>maxDist</code>. These are created in the parsing phase, but they require generated configurations to be moved to the search phase configuration location.</li></ul></li></ul></blockquote> <h2 id="how-indexing-works"><a href="#how-indexing-works" class="header-anchor">#</a> How Indexing Works</h2> <p>上面官网doc中介绍 - for a more detailed diagram of the data pipeline, see &quot;<a href="http://wiki.splunk.com/Community:HowIndexingWorks" target="_self" rel="noopener noreferrer">How Indexing Works</a>&quot; in the Community Wiki. 这里站在此wiki中的内容帮助理解。</p> <h3 id="▎how-splunk-processes-data-through-pipelines-and-processes"><a href="#▎how-splunk-processes-data-through-pipelines-and-processes" class="header-anchor">#</a> ▎How Splunk processes data through pipelines and processes</h3> <div class="custom-block danger"><p class="custom-block-title">注意</p> <p>Please keep in mind that if Splunk official documents do not explain attributes or features described here, then potentially this page is not accurate or not fully supported feature. Or, simply the diagram is wrong..</p> <p>(此文章比较老，如有不一致，一切以最新的官方文档为准)</p></div> <p>This page shares information about how data travels through Splunk pipeline/processes to be indexed.</p> <p>When we think about log events life cycle in Splunk, we can think about <strong>how to collect data(Input stage)</strong>, then <strong>processes to parse data and ingest them to Splunk Database(Indexing stage)</strong>, then, <strong>how to keep data in database(hot-&gt;Warm-&gt;Cold-&gt;Freezing)</strong>. In Splunk's doc or presentations, Input and Indexing stages are often explained as a topic of <strong>Getting Data In</strong>.</p> <p>Splunk processes data through pipelines. A pipeline is a thread, and each pipeline consists of multiple functions called processors. There is a queue between pipelines. With these pipelines and queues, index time event processing is parallelized.</p> <p>his flow chart information is helpful to understand which configuration should be done in which process stage(input, parsing, routing/filtering or indexing). Also, for troubleshooting, it is helpful to understand which processors or queues would be influenced when a queue is filling up or when a processor's CPU time is huge. For real troubleshooting, we used to recommend to use <strong>Splunk On Splunk(SoS)</strong> app. [<a href="http://splunk-base.splunk.com/apps/29008/sos-splunk-on-splunk%7CSoS" target="_self" rel="noopener noreferrer">Download page</a>]. Unfortunately, SoS development was stopped at v6.2. Great news is that a built-in management feature,<strong><a href="http://docs.splunk.com/Documentation/Splunk/latest/DMC/DMCoverview" target="_self" rel="noopener noreferrer">Monitoring Console</a></strong>, inherited original idea of SoS app and greatly expanded monitoring and management features.</p> <p>For a high-level overview of the data pipeline (consolidated to highlight the components relevant for planning a Splunk deployment: input, parsing, indexing, and search), see <a href="http://docs.splunk.com/Documentation/Splunk/latest/Deploy/Datapipeline" target="_self" rel="noopener noreferrer">How data moves through Splunk</a> in the Distributed Deployment Manual.</p> <p>For more about configurations for UF/Heavyweight Forwarders/Indexers/Search heads, please also visit <a href="https://wiki.splunk.com/Where_do_I_configure_my_Splunk_settings" target="_self" rel="noopener noreferrer">&quot;<strong>Where do I configure my Splunk settings?</strong>&quot;</a> in this community wiki and <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/Admin/Configurationparametersandthedatapipeline" target="_self" rel="noopener noreferrer">Splunk Doc: Configuration and pipeline</a></p> <h3 id="▎brief-diagram-pipelines-and-queues"><a href="#▎brief-diagram-pipelines-and-queues" class="header-anchor">#</a> ▎Brief Diagram - Pipelines and Queues</h3> <p>Data in Splunk moves through the data pipeline in phases. Input data originates from inputs such as files and network feeds. As it moves through the pipeline, processors transform the data into searchable events that encapsulate knowledge.</p> <p>The following figure shows how input data traverses event-processing pipelines (which are the containers for processors) at index-time. Upstream from each processor is a queue for data to be processed.</p> <div style="display:flex;"><img src="/assets/img/splunkadvance-2.d21a4aa8.jpg" alt="" align="left" style="zoom:100%;display:block;"></div> <br> <p>The next figure is a different version of how input data traverses pipelines with buckets life-cycle concepts. It shows the concept of hot buckets, warm buckets, cold buckets and freezing buckets. How data are stored in buckets and indexes is another good topic you should learn.</p> <div style="display:flex;"><img src="/assets/img/splunkadvance-3.41a06f94.png" alt="" align="left" style="zoom:100%;display:block;"></div> <blockquote><h4 id="what-is"><a href="#what-is" class="header-anchor">#</a> What is...</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code> - Pipeline : A thread. Splunk creates a thread for each pipeline. Multiple pipelines run in parallel.
 - Processor: Processes in pipeline
 - Queue    : Memory space to store data between pipelines
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="what-pipelines-do"><a href="#what-pipelines-do" class="header-anchor">#</a> What Pipelines do...</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code> - Input    : Inputs data from source. Source-wide keys, such as source/sourcetypes/hosts, are annotated here. 
              The output of these pipelines are sent to the parsingQueue.
 - Parsing  : Parsing of UTF8 decoding, Line Breaking, and header is done here. 
				This is the first place to split data stream into a single line event. 
              Note that in a UF/LWF, this parsing pipeline does &quot;NOT&quot; do parsing jobs. 
 - Merging  : Line Merging for multi-line events and Time Extraction for each event are done here.
 - Typing   : Regex Replacement, Punct. Extractions are done here.
 - IndexPipe: Tcpout to another Splunk, syslog output, and indexing are done here.
              In addition, this pipeline is responsible for bytequota, block signing, and indexing metrics such as thruput etc.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="main-queues-and-processors-for-indexing-events"><a href="#main-queues-and-processors-for-indexing-events" class="header-anchor">#</a> Main queues and processors for indexing events</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>   [inputs] 
   -&gt; parsingQueue 
   -&gt; [utf8 processor, line breaker, header parsing] 
   -&gt; aggQueue 
   -&gt; [date parsing and line merging] 
   -&gt; typingQueue 
   -&gt; [regex replacement, punct:: addition] 
   -&gt; indexQueue 
   -&gt; [tcp output, syslog output, http output, block signing, indexing, indexing metrics]
   -&gt; Disk
   *NullQueue could be connected from any queueoutput processor by configuration of outputs.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></blockquote> <h3 id="▎detail-diagram-standalone-splunk"><a href="#▎detail-diagram-standalone-splunk" class="header-anchor">#</a> ▎Detail Diagram - Standalone Splunk</h3> <blockquote><p>Note: v7.3 does not have large pipeline changes. So, the diagram was not updated for the v7.3.0</p> <p>（所以此图是基于v7.x版本，新版本仅供参考）</p></blockquote> <div style="display:flex;"><img src="/assets/img/splunkadvance-4.d2755c64.png" alt="" align="left" style="zoom:100%;display:block;"></div> <h3 id="▎detail-diagram-uf-lwf-to-indexer"><a href="#▎detail-diagram-uf-lwf-to-indexer" class="header-anchor">#</a> ▎Detail Diagram - UF/LWF to Indexer</h3> <br> <div style="display:flex;"><img src="/assets/img/splunkadvance-5.6a30d154.png" alt="" align="left" style="zoom:100%;display:block;"></div> <h2 id="where-do-i-configure-my-splunk-settings"><a href="#where-do-i-configure-my-splunk-settings" class="header-anchor">#</a> Where do I configure my Splunk settings?</h2> <p>Here are how some common Splunk server configurations correspond to these phases:</p> <table><thead><tr><th>Universal/Light Forwarder</th> <th>→</th> <th>Indexer</th></tr></thead> <tbody><tr><td>Input</td> <td>→</td> <td>Parsing, Indexing, Search</td></tr></tbody></table> <p>======================================================</p> <table><thead><tr><th>Heavy Forwarder</th> <th>→</th> <th>Indexer</th></tr></thead> <tbody><tr><td>Input, Parsing</td> <td>→</td> <td>Indexing, Search</td></tr></tbody></table> <p>======================================================</p> <table><thead><tr><th>Universal/Light Forwarder</th> <th>→</th> <th>Indexer</th> <th>→</th> <th>Search Head</th></tr></thead> <tbody><tr><td>Input</td> <td>→</td> <td>Parsing, Indexing</td> <td>→</td> <td>Search</td></tr></tbody></table> <p>======================================================</p> <table><thead><tr><th>Universal/Light Forwarder</th> <th>→</th> <th>Heavy Forwarder</th> <th>→</th> <th>Indexer</th></tr></thead> <tbody><tr><td>Input</td> <td>→</td> <td>Parsing</td> <td>→</td> <td>Indexing, Search</td></tr></tbody></table> <p>======================================================</p> <table><thead><tr><th>Universal/Light Forwarder</th> <th>→</th> <th>Heavy Forwarder</th> <th>→</th> <th>Indexer</th> <th>→</th> <th>Search Head</th></tr></thead> <tbody><tr><td>Input</td> <td>→</td> <td>Parsing</td> <td>→</td> <td>Indexing</td> <td>→</td> <td>Search</td></tr></tbody></table> <h4 id="which-configuration-parameters-go-with-which-phases"><a href="#which-configuration-parameters-go-with-which-phases" class="header-anchor">#</a> Which configuration parameters go with which phases</h4> <p>more details about the configure list, please reference to above section:  <a href="/BigDataAndDistributedSystem/Splunk/SplunkAdvance.html#▎components-and-the-data-pipeline">components-and-the-data-pipeline</a></p> <br> <h2 id="参考知识"><a href="#参考知识" class="header-anchor">#</a> 参考知识</h2> <h3 id="▎what-is-role-of-transforms-conf-vs-props-conf-for-field-extraction"><a href="#▎what-is-role-of-transforms-conf-vs-props-conf-for-field-extraction" class="header-anchor">#</a> ▎What is role of transforms.conf vs. props.conf for field extraction?</h3> <p>The high-level answer is that props.conf says what rules are applied to any event and when they are applied, and transforms.conf actually defines those rules.</p> <p>So in props.conf, you say &quot;events with the sourcetype XXX has the extraction YYY applied to it at parse time&quot; or &quot;events from host HHH has lookup JJJ applied at search time&quot;. transforms.conf would specify exactly how extraction XXX worked, or where lookup JJJ comes from.</p> <p>This is generally true, though it's a little muddied because some of the rules are specified directly in props.conf. Some of these (e.g., rules for parsing timestamps or line breaks) are only specified in props.conf, while others (search time field extractions) can be either directly defined in props.conf, or referenced back to transforms.conf</p> <h3 id="▎search-time-versus-index-time-field-extractions"><a href="#▎search-time-versus-index-time-field-extractions" class="header-anchor">#</a> ▎search-time versus index-time field extractions</h3> <p>(1)</p> <p>In general, we recommend search-time extractions rather than index-time extractions. There are relatively few cases where index-time extractions are better, and they come at the cost of brittleness of configuration and an increase in index size (which in turn makes searches slower).</p> <p>The distinction in the UI of &quot;uses transform&quot; vs. inline doesn't have anything to do with search-time vs index-time. It is referring to where the regex itself is stored: in an EXTRACT- line in props.conf (for inline) as opposed to in a REPORT- line that refers to a stanza in transforms.conf (for uses transform).</p> <p>Index time extractions are also set in props.conf and transforms.conf by means of the TRANSFORM- line. Again, they should rarely be used. They are appropriate when the heuristic of search for the value of the field fails (either because the value is ubiquitous outside of cases where the field equals the value, or because the value isn't an indexed token) or when you commonly search for field!=value without other terms to constrain the search.</p> <p>(2)</p> <p>There are 2 different transform things.</p> <p>One is transforms.conf which contains transform definitions and the word transform only occurs in the file name, not in the contents of the file. That is one thing.</p> <p>Then there is the TRANFORMS- definition inside of props.conf that is part of the REPORT-, EXTRACT-, and TRANSFORMS- triad. The first two are search-time things that are really the same thing (just that REPORT-definitions will reference transforms defined in transforms.conf whereas EXTRACT- definitions are inlined completely in props.conf). The last, TRANSFORMS- is how index-time extractions are configured.</p> <p>I agree that this is a bit confusing.</p> <h3 id="▎what-is-the-difference-of-results-between-verbose-and-fast-mode"><a href="#▎what-is-the-difference-of-results-between-verbose-and-fast-mode" class="header-anchor">#</a> ▎<strong>What is the difference of results between verbose and fast mode?</strong></h3> <blockquote><p>Refer to the documentation on the different search modes</p> <p>https://docs.splunk.com/Documentation/Splunk/latest/Search/Changethesearchmode</p></blockquote> <p><strong>Using the Fast mode</strong></p> <p>The Fast mode prioritizes the performance of the search and does not return nonessential field or event data. This means that the search returns what is essential and required.</p> <ul><li>Disables field discovery. Field discovery is the process Splunk software uses to extract fields aside from default fields such as host, source, and sourcetype. The Splunk software only returns information on default fields and fields that are required to fulfill your search. If you are searching on specific fields, those fields are extracted.</li> <li>Only depicts search results as report result tables or visualizations when you run a reporting search. A reporting search is a search that includes transforming commands. Under the Fast mode you will see only event lists and event timelines for searches that do not include transforming commands.</li></ul> <p><strong>Verbose</strong></p> <p>The Verbose mode returns all of the field and event data it possibly can, even if it means the search takes longer to complete, and even if the search includes reporting commands.</p> <ul><li>Discovers all of the fields it can. This includes default fields, automatic search-time field extractions, and all user-defined index-time and search-time field extractions. Discovered fields are displayed in the left-hand fields sidebar in the Events results tab.</li> <li>Returns an event list view of results and generates the search timeline. It also generates report tables and visualizations if your search includes reporting commands</li></ul> <p>Depending on how the fields you are interested in (Closed_Date Incident_Number Description Up Overal IDno) are determined/extracted, they may or may not be present in fast mode.</p> <p>If you use <em>smart mode</em>, you should get a good balance of speed and the fields you need.</p> <h3 id="▎index-time-vs-search-time-processing"><a href="#▎index-time-vs-search-time-processing" class="header-anchor">#</a> <strong>▎Index time Vs Search time Processing</strong></h3> <p>Pending...</p> <h3 id="▎config文件执行顺序"><a href="#▎config文件执行顺序" class="header-anchor">#</a> ▎Config文件执行顺序</h3> <p><code>/etc/apps/xxx/local</code> -&gt; <code>/etc/apps/xxx/system</code> -&gt; <code>/etc/local</code> -&gt; <code>/etc/system</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BigDataAndDistributedSystem/Splunk/SplunkFundmentals3.html" class="prev">Splunk Fundamentals 3</a></span> <span class="next"><a href="/BigDataAndDistributedSystem/ELK/">Data Platform - ELK</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2ba1140b.js" defer></script><script src="/assets/js/2.858e58ff.js" defer></script><script src="/assets/js/39.e7017f9b.js" defer></script>
  </body>
</html>
