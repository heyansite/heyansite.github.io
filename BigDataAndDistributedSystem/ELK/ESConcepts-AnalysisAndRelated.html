<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES 原理-分词器 &amp; 搜索相关性 | Yan&#39;s Blog Home</title>
    <meta name="description" content="Personal blog site">
    
    
    <link rel="preload" href="/assets/css/0.styles.659f981c.css" as="style"><link rel="preload" href="/assets/js/app.2ba1140b.js" as="script"><link rel="preload" href="/assets/js/2.858e58ff.js" as="script"><link rel="preload" href="/assets/js/8.60d5a8a9.js" as="script"><link rel="prefetch" href="/assets/js/10.5dcc1f52.js"><link rel="prefetch" href="/assets/js/100.0327e00b.js"><link rel="prefetch" href="/assets/js/101.404f187c.js"><link rel="prefetch" href="/assets/js/102.d78878ec.js"><link rel="prefetch" href="/assets/js/103.a682f6f1.js"><link rel="prefetch" href="/assets/js/104.d831bcb5.js"><link rel="prefetch" href="/assets/js/105.afbf1884.js"><link rel="prefetch" href="/assets/js/106.8e9709d3.js"><link rel="prefetch" href="/assets/js/107.9712aa22.js"><link rel="prefetch" href="/assets/js/108.4158fdb6.js"><link rel="prefetch" href="/assets/js/109.ae61a303.js"><link rel="prefetch" href="/assets/js/11.34e3d90e.js"><link rel="prefetch" href="/assets/js/110.0abce6c9.js"><link rel="prefetch" href="/assets/js/111.b5c958e5.js"><link rel="prefetch" href="/assets/js/112.fdacfaf6.js"><link rel="prefetch" href="/assets/js/113.9d95243d.js"><link rel="prefetch" href="/assets/js/114.f759f9b9.js"><link rel="prefetch" href="/assets/js/115.1b1f9f3d.js"><link rel="prefetch" href="/assets/js/116.1e5e62e4.js"><link rel="prefetch" href="/assets/js/117.952db9d4.js"><link rel="prefetch" href="/assets/js/118.ed9df468.js"><link rel="prefetch" href="/assets/js/119.f19ee9e0.js"><link rel="prefetch" href="/assets/js/12.cd237cda.js"><link rel="prefetch" href="/assets/js/120.24dbecef.js"><link rel="prefetch" href="/assets/js/121.0aa2d47c.js"><link rel="prefetch" href="/assets/js/122.5205ca42.js"><link rel="prefetch" href="/assets/js/123.25aa20a6.js"><link rel="prefetch" href="/assets/js/124.420b2a92.js"><link rel="prefetch" href="/assets/js/125.091331f4.js"><link rel="prefetch" href="/assets/js/126.471b335f.js"><link rel="prefetch" href="/assets/js/127.60ffdb36.js"><link rel="prefetch" href="/assets/js/128.9c5c36ef.js"><link rel="prefetch" href="/assets/js/129.36fd802b.js"><link rel="prefetch" href="/assets/js/13.de2ffe9f.js"><link rel="prefetch" href="/assets/js/130.822de8a4.js"><link rel="prefetch" href="/assets/js/131.697750e2.js"><link rel="prefetch" href="/assets/js/132.fd5faa78.js"><link rel="prefetch" href="/assets/js/133.cf327ef4.js"><link rel="prefetch" href="/assets/js/134.6cdb8690.js"><link rel="prefetch" href="/assets/js/135.906c8800.js"><link rel="prefetch" href="/assets/js/136.43585d13.js"><link rel="prefetch" href="/assets/js/137.3c7ddb41.js"><link rel="prefetch" href="/assets/js/138.e3274ead.js"><link rel="prefetch" href="/assets/js/139.7fa38b58.js"><link rel="prefetch" href="/assets/js/14.9d6406e7.js"><link rel="prefetch" href="/assets/js/140.1b026dad.js"><link rel="prefetch" href="/assets/js/141.c1adfec5.js"><link rel="prefetch" href="/assets/js/142.ed2a4a22.js"><link rel="prefetch" href="/assets/js/143.af96e2f9.js"><link rel="prefetch" href="/assets/js/144.923a7d38.js"><link rel="prefetch" href="/assets/js/145.d88163de.js"><link rel="prefetch" href="/assets/js/146.2134dd3e.js"><link rel="prefetch" href="/assets/js/147.9925c468.js"><link rel="prefetch" href="/assets/js/148.109297cc.js"><link rel="prefetch" href="/assets/js/149.ae529d47.js"><link rel="prefetch" href="/assets/js/15.fe3428fa.js"><link rel="prefetch" href="/assets/js/150.6bf9657f.js"><link rel="prefetch" href="/assets/js/151.603cf1f9.js"><link rel="prefetch" href="/assets/js/152.b64ef399.js"><link rel="prefetch" href="/assets/js/153.fd5cde7c.js"><link rel="prefetch" href="/assets/js/154.8cedd5d3.js"><link rel="prefetch" href="/assets/js/155.042308eb.js"><link rel="prefetch" href="/assets/js/156.1f58dd5a.js"><link rel="prefetch" href="/assets/js/157.69e07481.js"><link rel="prefetch" href="/assets/js/158.40b656df.js"><link rel="prefetch" href="/assets/js/159.823c56a4.js"><link rel="prefetch" href="/assets/js/16.7976352c.js"><link rel="prefetch" href="/assets/js/160.93aba24e.js"><link rel="prefetch" href="/assets/js/161.3ae7729a.js"><link rel="prefetch" href="/assets/js/162.8092cc22.js"><link rel="prefetch" href="/assets/js/163.3c82e51b.js"><link rel="prefetch" href="/assets/js/164.d358ee7b.js"><link rel="prefetch" href="/assets/js/165.60d778eb.js"><link rel="prefetch" href="/assets/js/166.54d7340a.js"><link rel="prefetch" href="/assets/js/167.5fd6aaa3.js"><link rel="prefetch" href="/assets/js/168.205929f8.js"><link rel="prefetch" href="/assets/js/169.873b90b1.js"><link rel="prefetch" href="/assets/js/17.72e8ffa6.js"><link rel="prefetch" href="/assets/js/170.68c49359.js"><link rel="prefetch" href="/assets/js/171.d8f93304.js"><link rel="prefetch" href="/assets/js/172.6b496cc7.js"><link rel="prefetch" href="/assets/js/173.f276a0ce.js"><link rel="prefetch" href="/assets/js/174.09cb41e2.js"><link rel="prefetch" href="/assets/js/175.c77ce8d9.js"><link rel="prefetch" href="/assets/js/176.01ab9f3f.js"><link rel="prefetch" href="/assets/js/177.2f91a2a4.js"><link rel="prefetch" href="/assets/js/178.5f0a0527.js"><link rel="prefetch" href="/assets/js/179.0d14e948.js"><link rel="prefetch" href="/assets/js/18.8264b169.js"><link rel="prefetch" href="/assets/js/180.9a15f295.js"><link rel="prefetch" href="/assets/js/181.d5bcbada.js"><link rel="prefetch" href="/assets/js/182.571b87a8.js"><link rel="prefetch" href="/assets/js/183.b87f5a38.js"><link rel="prefetch" href="/assets/js/184.90ecbd35.js"><link rel="prefetch" href="/assets/js/185.3a38f733.js"><link rel="prefetch" href="/assets/js/186.881a0fab.js"><link rel="prefetch" href="/assets/js/187.17663dea.js"><link rel="prefetch" href="/assets/js/188.471fcd9b.js"><link rel="prefetch" href="/assets/js/189.6d486653.js"><link rel="prefetch" href="/assets/js/19.e6227b20.js"><link rel="prefetch" href="/assets/js/190.357b4cc8.js"><link rel="prefetch" href="/assets/js/191.ccf9ae83.js"><link rel="prefetch" href="/assets/js/192.3ee45cf5.js"><link rel="prefetch" href="/assets/js/193.2fbcbc68.js"><link rel="prefetch" href="/assets/js/194.61d0acd9.js"><link rel="prefetch" href="/assets/js/195.33b772c3.js"><link rel="prefetch" href="/assets/js/196.7d35848a.js"><link rel="prefetch" href="/assets/js/197.4b958d27.js"><link rel="prefetch" href="/assets/js/198.dfbfba98.js"><link rel="prefetch" href="/assets/js/199.f6c7aacb.js"><link rel="prefetch" href="/assets/js/20.65ad9b00.js"><link rel="prefetch" href="/assets/js/200.6a05302e.js"><link rel="prefetch" href="/assets/js/201.be446c97.js"><link rel="prefetch" href="/assets/js/202.d058ca1d.js"><link rel="prefetch" href="/assets/js/203.ef2b609c.js"><link rel="prefetch" href="/assets/js/204.dab38ee5.js"><link rel="prefetch" href="/assets/js/21.300f7dfb.js"><link rel="prefetch" href="/assets/js/22.0ed457bc.js"><link rel="prefetch" href="/assets/js/23.9cf0f43d.js"><link rel="prefetch" href="/assets/js/24.f151ffcb.js"><link rel="prefetch" href="/assets/js/25.680a763b.js"><link rel="prefetch" href="/assets/js/26.6a5f804d.js"><link rel="prefetch" href="/assets/js/27.98408441.js"><link rel="prefetch" href="/assets/js/28.acbefbd1.js"><link rel="prefetch" href="/assets/js/29.fbd2340a.js"><link rel="prefetch" href="/assets/js/3.753236a7.js"><link rel="prefetch" href="/assets/js/30.30b44255.js"><link rel="prefetch" href="/assets/js/31.510d262b.js"><link rel="prefetch" href="/assets/js/32.c204bc79.js"><link rel="prefetch" href="/assets/js/33.5fa66039.js"><link rel="prefetch" href="/assets/js/34.6db47b26.js"><link rel="prefetch" href="/assets/js/35.fcb88dd5.js"><link rel="prefetch" href="/assets/js/36.e294e99d.js"><link rel="prefetch" href="/assets/js/37.fe541556.js"><link rel="prefetch" href="/assets/js/38.94af8189.js"><link rel="prefetch" href="/assets/js/39.e7017f9b.js"><link rel="prefetch" href="/assets/js/4.1c3159e6.js"><link rel="prefetch" href="/assets/js/40.b7a1deeb.js"><link rel="prefetch" href="/assets/js/41.ae4d7d1e.js"><link rel="prefetch" href="/assets/js/42.5dc5c7f6.js"><link rel="prefetch" href="/assets/js/43.73610732.js"><link rel="prefetch" href="/assets/js/44.2b0e19f3.js"><link rel="prefetch" href="/assets/js/45.903efdc0.js"><link rel="prefetch" href="/assets/js/46.0684656f.js"><link rel="prefetch" href="/assets/js/47.6425b35e.js"><link rel="prefetch" href="/assets/js/48.43663ba9.js"><link rel="prefetch" href="/assets/js/49.34841bc0.js"><link rel="prefetch" href="/assets/js/5.d3774f5f.js"><link rel="prefetch" href="/assets/js/50.48ce1d7e.js"><link rel="prefetch" href="/assets/js/51.1820aa29.js"><link rel="prefetch" href="/assets/js/52.5317c537.js"><link rel="prefetch" href="/assets/js/53.71b86df9.js"><link rel="prefetch" href="/assets/js/54.31ed2a5e.js"><link rel="prefetch" href="/assets/js/55.4f9933ab.js"><link rel="prefetch" href="/assets/js/56.beb74e07.js"><link rel="prefetch" href="/assets/js/57.705bc19e.js"><link rel="prefetch" href="/assets/js/58.f5fd656b.js"><link rel="prefetch" href="/assets/js/59.cc8ae217.js"><link rel="prefetch" href="/assets/js/6.f082ca37.js"><link rel="prefetch" href="/assets/js/60.fc3cf484.js"><link rel="prefetch" href="/assets/js/61.b5032b43.js"><link rel="prefetch" href="/assets/js/62.64d7637a.js"><link rel="prefetch" href="/assets/js/63.2a71075b.js"><link rel="prefetch" href="/assets/js/64.21eb4820.js"><link rel="prefetch" href="/assets/js/65.11535a8c.js"><link rel="prefetch" href="/assets/js/66.d9c62638.js"><link rel="prefetch" href="/assets/js/67.5782c958.js"><link rel="prefetch" href="/assets/js/68.35886dae.js"><link rel="prefetch" href="/assets/js/69.934aa057.js"><link rel="prefetch" href="/assets/js/7.9a79fd87.js"><link rel="prefetch" href="/assets/js/70.53c7c7a2.js"><link rel="prefetch" href="/assets/js/71.0e82b1c6.js"><link rel="prefetch" href="/assets/js/72.1da0eaf9.js"><link rel="prefetch" href="/assets/js/73.3dabc9cd.js"><link rel="prefetch" href="/assets/js/74.b2ae43f6.js"><link rel="prefetch" href="/assets/js/75.55bf2044.js"><link rel="prefetch" href="/assets/js/76.2f88e50b.js"><link rel="prefetch" href="/assets/js/77.d916e87e.js"><link rel="prefetch" href="/assets/js/78.0e80a77d.js"><link rel="prefetch" href="/assets/js/79.03bce65e.js"><link rel="prefetch" href="/assets/js/80.96678f59.js"><link rel="prefetch" href="/assets/js/81.75ffa4d3.js"><link rel="prefetch" href="/assets/js/82.41c1aeb7.js"><link rel="prefetch" href="/assets/js/83.16d5e455.js"><link rel="prefetch" href="/assets/js/84.195ca01f.js"><link rel="prefetch" href="/assets/js/85.d850d4dd.js"><link rel="prefetch" href="/assets/js/86.32d87d56.js"><link rel="prefetch" href="/assets/js/87.5f97a4f6.js"><link rel="prefetch" href="/assets/js/88.f5b0bbdb.js"><link rel="prefetch" href="/assets/js/89.9f9150f5.js"><link rel="prefetch" href="/assets/js/9.74db15a0.js"><link rel="prefetch" href="/assets/js/90.f69286ce.js"><link rel="prefetch" href="/assets/js/91.c9995055.js"><link rel="prefetch" href="/assets/js/92.e992da4f.js"><link rel="prefetch" href="/assets/js/93.14137340.js"><link rel="prefetch" href="/assets/js/94.c8228a63.js"><link rel="prefetch" href="/assets/js/95.bbb7ce03.js"><link rel="prefetch" href="/assets/js/96.ce87793d.js"><link rel="prefetch" href="/assets/js/97.4fdd8a0b.js"><link rel="prefetch" href="/assets/js/98.74cfc635.js"><link rel="prefetch" href="/assets/js/99.abdd1b46.js">
    <link rel="stylesheet" href="/assets/css/0.styles.659f981c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yan's Blog Home</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Blog Home</a></div><div class="nav-item"><a href="/index/" class="nav-link">Technical Blog Home</a></div><div class="nav-item"><a href="https://heyan.site:8003/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Blog Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/comments.html" class="nav-link">留言</a></div><div class="nav-item"><a href="http://heyan.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>大数据和分布式系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统理论</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式协调服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据摄取 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据流 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据存储 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据处理 Layer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据分析 Layer (OLAP)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统基础框架Hadoop</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data Platform - Splunk</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Data Platform - ELK</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BigDataAndDistributedSystem/ELK/" class="sidebar-link">Data Platform - ELK</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-base.html" class="sidebar-link">ES 概念与总结</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-cluster.html" class="sidebar-link">ES 原理-分布式特性</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-index.html" class="sidebar-link">ES 原理-倒排索引</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html" class="active sidebar-link">ES 原理-分词器 &amp; 搜索相关性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#分词器" class="sidebar-link">分词器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_1-分词和分词器" class="sidebar-link">1. 分词和分词器</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_2-分词器的组成" class="sidebar-link">2. 分词器的组成</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_3-analyze-api" class="sidebar-link">3. Analyze API</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_4-es-的内置分词器" class="sidebar-link">4. ES 的内置分词器</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_5-中文分词器" class="sidebar-link">5. 中文分词器</a></li></ul></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#搜索相关性" class="sidebar-link">搜索相关性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_1-相关度指标" class="sidebar-link">1. 相关度指标</a></li><li class="sidebar-sub-header"><a href="/BigDataAndDistributedSystem/ELK/ESConcepts-AnalysisAndRelated.html#_2-相关度算分" class="sidebar-link">2. 相关度算分</a></li></ul></li></ul></li><li><a href="/BigDataAndDistributedSystem/ELK/ESIndex-basicoperation.html" class="sidebar-link">ES Index-基本操作与并发</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESIndex-mapping.html" class="sidebar-link">ES Index-Mapping &amp; Setting</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESIndex-IndexTemplate.html" class="sidebar-link">ES Index-Index Template</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESIndex-TextAnalysis.html" class="sidebar-link">ES Index-Text Analysis</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESIndex-IngestAndScript.html" class="sidebar-link">ES Index-Ingest|Script</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESUsage-crud.html" class="sidebar-link">ES 使用-基本CRUD</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESSearch-search.html" class="sidebar-link">ES 搜索-搜索相关</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESSearch-queryDSL.html" class="sidebar-link">ES 搜索-查询DSL</a></li><li><a href="/BigDataAndDistributedSystem/ELK/ESSearch-aggregation.html" class="sidebar-link">ES 搜索-聚合</a></li></ul></section></li><li><a href="/index/" class="sidebar-link">&lt; 首页</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="es-原理-分词器-搜索相关性"><a href="#es-原理-分词器-搜索相关性" class="header-anchor">#</a> ES 原理-分词器 &amp; 搜索相关性</h1> <div class="custom-block tip"><p class="custom-block-title">转载</p> <ul><li><a href="https://www.yuque.com/xiongsanxiansheng/qfvqxo/fi2db2" target="_self" rel="noopener noreferrer">https://www.yuque.com/xiongsanxiansheng/qfvqxo/fi2db2</a></li> <li><a href="https://www.yuque.com/xiongsanxiansheng/qfvqxo/kq2d3x" target="_self" rel="noopener noreferrer">https://www.yuque.com/xiongsanxiansheng/qfvqxo/kq2d3x</a></li></ul></div> <h2 id="分词器"><a href="#分词器" class="header-anchor">#</a> 分词器</h2> <h3 id="_1-分词和分词器"><a href="#_1-分词和分词器" class="header-anchor">#</a> 1. 分词和分词器</h3> <ul><li>Analysis 分词：把全文本转换成一系列单词</li> <li>Analyzer 是通过 Analysis 来实现的
<ul><li>可使用 ElasticSearch 内置的分析器，或按需定制化分析器</li></ul></li> <li>除了在数据写入时转换词条，匹配 Query 语句时也需要用相同的分析器对查询语句进行分析</li></ul> <h3 id="_2-分词器的组成"><a href="#_2-分词器的组成" class="header-anchor">#</a> 2. 分词器的组成</h3> <table><thead><tr><th><strong>组成</strong></th> <th><strong>功能</strong></th></tr></thead> <tbody><tr><td>Character Filters</td> <td>针对原始文本进行处理，比如去除 html 标记符</td></tr> <tr><td>Tokenizer</td> <td>将原始文本按照一定规则切分为单词</td></tr> <tr><td>Token Filters</td> <td>针对切分的单词进行加工，比如转为小写、删除 stopwords、增加同义词</td></tr></tbody></table> <p>分词器组成的调用是有顺序的</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-1.9d0e57f7.png" alt="" align="left" style="display:block;"></div> <h3 id="_3-analyze-api"><a href="#_3-analyze-api" class="header-anchor">#</a> 3. Analyze API</h3> <p>es 提供了一个测试分词的 api 接口，方便验证分词效果，endpoint 是 _analyze；这个 api 具有以下特点：</p> <ul><li>可以直接指定 analyzer 进行测试；</li> <li>可以直接指定索引中的字段进行测试；</li> <li>可以自定义分词器进行测试；</li></ul> <h4 id="_3-1-直接指定analyzer进行测试"><a href="#_3-1-直接指定analyzer进行测试" class="header-anchor">#</a> 3.1 直接指定analyzer进行测试</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code>POST _analyze
<span class="token punctuation">{</span>
    <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>analyzer 表示指定的分词器，这里使用 es 自带的分词器 standard，text 用来指定待分词的文本。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-2.ddfc9e44.png" alt="" align="left" style="display:block;"></div> <p>从结果中可以看到，分词器将文本分成了 hello 和 world 两个单词。</p> <h4 id="_3-2-指定索引中的字段进行测试"><a href="#_3-2-指定索引中的字段进行测试" class="header-anchor">#</a> 3.2 指定索引中的字段进行测试</h4> <p>应用场景：当创建好索引后发现某一字段的查询和预期不一样，就可以对这个字段进行分词测试。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>POST text_index/_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div style="display:flex;"><img src="/assets/img/es-analysisandrelated-3.2dbbf433.png" alt="" align="left" style="display:block;"></div> <p>当没有指定分词器的时候默认使用 standard。</p> <h4 id="_3-3-自定义分词器进行测试"><a href="#_3-3-自定义分词器进行测试" class="header-anchor">#</a> 3.3 自定义分词器进行测试</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code>POST _analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;lowercase&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>根据分词的流程，首先通过 tokenizer 指定的分词方法 standard 进行分词，然后会经过 filter 将大写转化为小写。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-4.b46f4085.png" alt="" align="left" style="display:block;"></div> <h3 id="_4-es-的内置分词器"><a href="#_4-es-的内置分词器" class="header-anchor">#</a> 4. ES 的内置分词器</h3> <p>具体使用可以参考 <strong><a href="/BigData/ELK/ESIndex-TextAnalysis.html">ES Index-Text Analysis</a></strong></p> <h4 id="_4-1-standard-analyzer"><a href="#_4-1-standard-analyzer" class="header-anchor">#</a> 4.1 Standard Analyzer</h4> <p>默认分词器，具有按词切分、支持多语言、小写处理的特点。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-5.4ef54959.png" alt="" align="left" style="display:block;"></div> <p>可以看到，<code>standerd 将 stop word 默认关闭了</code>，也就是这些词还是会在分词后保留。<br><code>stop word 就是例如 and、the、or 这种词</code>，可以通过配置将它打开。其实搜索引擎应该将这些 stop word 过滤掉，这样可以减少压力的同时保证搜索的准确性。</p> <h4 id="_4-2-simple-analyzer"><a href="#_4-2-simple-analyzer" class="header-anchor">#</a> 4.2 Simple Analyzer</h4> <p>具有特性是：按照非字母切分（数字，符号被过滤掉）、小写处理。</p> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="display:block;"></div> <p>可以看到它将非字母的字符切掉了，例如横线、标点、数字都被干掉了。</p> <h4 id="_4-3-whitespace-analyzer"><a href="#_4-3-whitespace-analyzer" class="header-anchor">#</a> 4.3 Whitespace Analyzer</h4> <p>具有的特性是：按照空格切分，不转小写。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-7.70fd80b0.png" alt="" align="left" style="display:block;"></div> <p>可以看到它按照空格切分，并且没有进行小写转化。</p> <h4 id="_4-4-stop-analyzer"><a href="#_4-4-stop-analyzer" class="header-anchor">#</a> 4.4 Stop Analyzer</h4> <p>具有的特性是：将 stop word 停用词过滤掉，小写处理。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-8.93533e25.png" alt="" align="left" style="display:block;"></div> <h4 id="_4-5-keyword-analyzer"><a href="#_4-5-keyword-analyzer" class="header-anchor">#</a> 4.5 Keyword Analyzer</h4> <p>具有的特性是：不分词，直接将输入作为一个单词输出；</p> <div style="display:flex;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWkAAAD5CAMAAADStDSLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABFUExURf////j293p6eo6Ojrm5ucPBwZSTlIKBgYiIiJ6dna6urqelpdvZ2dPS0vDu7svKyunp6eDg4Liwserh4ysrK1JQUHJiYhIzxu0AACAASURBVHja7FyJdqMwEqRlCQzoBEn//6lb3QLHk3hmvPsmttehc4DQ2dWlkgAnXXfYYYcddthhhx122GGHHXbYYZuRly9n6EtWXD+u+RildLtCHdfhkxhx8B9Z1K7f1TOK0l8KJ3evH17H+3o14fOlEP5YQX8dg78a4XKvv0VsHsvnCv5cajEb5gPKVNt1unInTjlcMB3NXNeliqHqIuPlgmq9q+eeK6c/lxnKvX7Y4u6iVVfVl07qn+rE0n+5pD5iM+V05wj7vuSxd6cvLgWlncpWQC+5N2PJrjtJu6YEnUvsVB70dHI2T13I4gCVPJ9zuavnWvp+/AsRrbsXaXcP0sMIaqnPTao/Iu3L+ctMK/pyPud4t35ISM/VN68ohE0hcEh55tNTdtJ+7cYNadflAYm5OZmDL7VJSBk6CUcii5LO4FfyrDL4ST5SDBfCC7m4k+BYqZBYUcoFbigG50WkfBeluse3D8jnwpRQoHEguHawF6QT53CfXKylKJJd2bWiEiPtpG40Ww2luAW47a21KdkodRsKwaVy4pAbqUPoL5KvhivEhnRK7SwKcpBT57prID+F9FRUyYi2rSXXS5SYrRgFUGUDzC2CoThCpEttULk8qdLqUMGoVUFUVD4Rmiz4jUsj8kMxValcph3p1mqf0bFn8XHFEPKLRSghaBLj0p0GbnbGMJG3YAaeQbOTyrlnIpc8EFrOGH7z78yX0B+gPpduQkMjmhvyyAKTc0m1DIXrog8MsSFNFonquZ0MzcTVXkCIFUlUjexJLy2gI92F6CoPRNTjhItQ2Rmt1wRNPAmQEaOt6RbS+Zz6rIFecmXYZU2BqQRmN3BCDtMHp8+RR89DTTlvQLN6VFYZC0CtyhptThydkg28T7noWPIWagUNCjTnORlAXQsPZCgh1hrz4BuHVCYenoebJWsHH+yYDaGddMoGMymGPOPgkCUVznlMcN7AFcQj5NGP2U656sRrGwpSzZOtOaGPuDQVABXClCxwN3BwMBgrNQxqNvBixJH7m7CoOYCtZXlLNjROq4CAdzqfrQH3zvmURhSt10D+ijSwyoPNvXN11+xZGgVntZAXKnHN6U1amPl5X9mAtKrozyJPIgE1xrz2BZ2qE/HkmLKP8zwn5Ch1jjwJMFu8Y1b6rJw95XBhg8ptbjPSivkfuFkSOhVlAJotVWdekQXpNv2GgjnVmYzVxzidJ71RpWMhACoYnhkRuCCzUgAgYFy3JRjTNUhrjuslQNLArQExQJaWGLgdI8OdAzQhOEbvMQpUAZAq01eke0a3qJB5Q9A0dwcavrXV1+zqAR+E0+emHoC1XNRj4LGMcKWTcXHD5WzUVGzRnrGfig9KKcc6DWmUcHCDCs2BmbIhwTRWcUdaOD123PKMblIZvShQUaOUPsmgkqiHzYs4HPviEaIqBfRlf8BI8/Jgsx5a3Y3TYLtipGcGEEPuJQSaU1R6LW2rMklHEjZQvcnV2DqfRQtNtmcAiSqmARlv6TQ1TmvsnDegLyvsRvLKcyRIYc86XbdlF1y3235DdBrUTUC5iTxE+1TVmEpfPTGsmvlP+4rohdNAMGJgFDGDZYfOk3JD+lw7mR6MNOIFT0dpB8SGuPsUaWICNk6nfJLo+lhGhAPLB3szbQQk4bTiYuaU7e6pUrFA7eGeLaNsGMc68RBZR7i/xplaNEdMLoqE8lrAKyJ3HoTTmjktwXEQtR3ID6RLAw9IK3wTudSkfkjW+ibQ1fqkRBGKjSazPEDcEFafTOLJpRsykMyEcAcrWlcSGcwHw+GvKNCQ3rdFZcMyEJQDq2cCljw3kiVHtE3sDNJA4hlpWVhTUw8cxxxSPhOFaHHAAuSasmJl5a4UA8Gz0ocWCkG6krQDQhk06V2bOCrxsoklESOO2HSobZ+PdPRD7nG0aGSKWE/QEQhI2KAM4siIbOTjqCnhODROQwdxOwj/rxfFQe2cLjyNcrtfwcrB1mitZVGeZH7wmefcabsMh3UnYDB8XGlmIeQAYUU/ew4P82pTbr1rupL1wvMMr1GjU1Avcfcz87vdCAHpWNr6XzdOR1YPmCgRz1HH25d978GlZdJqYTdvZeDUrh4nrKhV8RqvsXTts3tQNPCeAmrE7ZmdNtwIqoMromqKCYw6grTad0cTj45nP3cF1xhpXlaMAJny9W2PlWlnWXB5Azptd59OG9jGv6iVjBxn08w9BcPR8ppLE+99sfMk2Xdq3kaSJJDt9ntqj30yMYf8fjOSkohIZyaN1VZWIDB2mgxSk06X+Ra1jily8S6iLgUf8+RmadnNUjDMmFxtqlKYZXbTdncwwQXvfOuKjI7sZMcjDnsnyfIgsJG2cBid8SarCVxnJ+15fw1PJPJusm1FdHpq8wTZekotT/vt+QFXSew8mfvvay43skNWvdkT91T4ry7fLtpU/Jd6sq0s89+aFJjvGMPNurXerkhMR/W322/63z3eCk+lCcTDzPfl9i32ZX/5LWY25brxCETx/Z1+hOv0UKRJn+xvnselb+w2jL97gkJu7OfUvbVRd9hh70ToxR0gPMTW2h/y8SCkxwOEByE9H5Q+OP1unD72qo/i9HuoB/mD048xs78EPDj9zTbndHD6QUi/PqffA+np/4DT76Aek1YHpx9ipeRDpx9iKZqeXp7Tb7Kfnt3B6cewOp8PTj8I6f7g9EPMb5/kOPYeB6eB9BvIB3/uqj84/QAbhrp/uvjQ6W/f5r30Y1Pvwel19ccLru+mwVKHWvtqDii+20wVWw8kvpPPoh49A70caHwvzvwTAHR/UPoBeK/zQekP8tG/f8VOl4+ahzoclH7MPu98UPrCPyL/XbbSahyaX/1324vv2Gm1ZlnmZuP8z23hr6Ud53/+87mfsL4q3D4s48IDfJj5f/jz2YQyi31BsL0ZF7O+zW0yOwK459m9mkumX9Y3fBpB4M9L7XX8Mq5v+tSHltG+ENDjQu/7eM327T+APdtDakB3rzCWb7K1X7qX8I+W5Z3/SBCerWN4iaEs783oxur1BcQj9PTmf/dK/A8Wnv8uil5kZn2zl/Pz3/Msy494qbeOzyY1LT+B0kzqZz9DdMsPeU9tn/0J+eVnPC4mkPq5d8E0/pg3IIt5ZqC7dV5/CKc781yd/DEyzaR6qqvm57zVW5/7+HT5OR/coqcKJS23n936sPL/uF4DrTjDt3U4I74cbCcJL2Vsy/FkuALZIImWs5pbta8SXBsVzF7h19qXvlvCt5yrptZWga4GYiRx+5UW9U/7EyD6PdIG8XdBsAKExtJHIriW8N4IcC1BLSHArcjh/yJpt9oSg/Ujcd2uvW7KXndiQ7dVuGrK0u9GZdt4PXd/Wm9zOjx1RtmbD5dW2j/e9V8F7ub5rx/VoT9V+w9716KuqgqEwbS8DBdBff9HPVxUQKCk1arW/g4owQAD8zNNqCQouKmYKYrT1R0ZZybOgn2b7cLeawvz8CVpuHBQcHndM799+Pt+k3IXToJkBcePoq/GrVyozBLL5qNIZy4RyV++nsGMfqlO43O298Oa+twPxpfoNM7q9P6ixoSBwPctB/74gOQmzh+9SsNd1k5nxoYkp4VUPv3r+BsXCWmk2YeRzk6119hlWaplX/SM5ypVvvqm1z/llq6wb9Rp7xfxuuj9eqoVSTxVqQr1N73sQl3tfBnSOKvT4SMvsG8epwZssyUNNntSrYaD7qpkvwmU31etj83yPqvTmfl0cOWi9yhCpFKazczmJbwakKzm6UpRf+vM/6eHC+6XZdE7qVznqSKItd38qXcF5HZ1/D47rR8QUO8HTe+jROep7+dp1EgvE+idZ/qpQ7epqvWuK9WMYahvU4uGqdM7VtXT3H1qUpW7Gv8g0jhrp4fQegwKQKYh79C8VDPTe0RhvMyo1a99UuBXZoufeUZmk5xuguaDb3TB7R+ae0ifrHXa7O+lNzWzG/BczK4zdhMfvUdPZTbHU7AzZWPmeSLN9LnbOXZLmj9ip4NfM6J0urVItxpps79PTRjhCmm6I60310PjVAEjBNXz594H9X2zvHtzD3LQab3lFtJ7Lk7tqKYfXL8ah/J1YyqD9Gh3XdL76GG+7p72GScv32k9kgrAZGCne4T0xnh6v0Kz89XNmI+5R63TabNVVYWN+biZ/S3/v0Z8bKfDu05mT2raV1Wv6Hq/2KbGuK9uPUV6q0zzvIvhuhuGrsZqfld1gHjzfe8Z+ezcI2On/ausO/fzcOnttP91+sEdpr+1JiR3L+8r7fSfXm7zp+YeUn6lXfgH59OZB/Z/Q9W/8w5T7hqR5m8qwFP+tYf2NLs35en7Hvh95iNnp/MvbZD6T/zf4IbsH6G+EOnTcw9fCkHxM46u/ofHykQ5mX3n73nrgfnb/r+fs9Mk+9BLli8D/h1h5DX3VD+3CiFhp8l7bqLju88Rszr9HT+Ld3S64BqRTdObnsuVPhtHCEqR/i1BZBaigisXmKbpRt+EdJLewAutx7t1ugBpopCe2ed0+h6WpTptHurJE2ojC+9J3UH6vPWAeZo68vuvx8qvYWIyb6fL2oCKInHmRaZklq/S6dN3mPDY13MF73gRWXatafYbVWo9yEzZPOD0LcDgyc5c9mqZO3a6Oz/LA+hmeJP1KLhJg5+Ye8DC5lYP6dJKohCH4dog0lG9HcqwVALRbrgBLFX1hE5nZnmZZfYJpDHlpH4X0rjsahyKdVovAkHXhVWVfhDTVYt+YsPoQrq515FpHsiyiHkqW0l8x3rA6VUIeoXQ+A4zndXp7F9Cyu20eSaGp4rdJlg6tDTNzNtpqCsyKVZLRWeB6gWjZh6LdTqTdUm/NiV9h+lNS61ydjqt0/gZO73U6jpsnJa2veK+UpjyuW1FVXVkUpP2y8KVoveVVv7xVTotv+2uqXnXVXoNE85/M4utB6+nHiu0MUXjom32bbqO80T0mgY6t1TNZ2uF8rVgbzZ8307T9NuOXos0LjusnT4cdgVkorjG3yB9krn2UHGsft77uVrME3bFuFfBMnOF76I++EIQX+bbrHX6JG9zCXXFuXav0jZ+6IxB+ti/UsS8HhQBQTsZt6WfgEOGv5l7nOVvwlGdhGPW1yp2mXWjI8ZcnUjNZqkqoFQQ1/XIcckIYvMSmmS2XtVry4TQsEPXixELqpobigasxxHtOtho/oFTREPXf+l31e+Eti9b0sqN67nf8xDG6OCPvYtYbgX0Ka80JdoqF4qEVeojfEHcWXrsNfe2HkR0Nam+aD7wq0MCcveZQXhy3AlTjmlr7ednip7iCUqncSSajtJBBlU3UPVrJ5I4lzkUtvY44nQ6oROCZQZTIf3ckwDzNIDj17lNp2PRNqSP0jKRGeBSjX5ieJSxg8Ia5AdIv9Qpnc6OaDqnES9rvBxpmkG6kS9CmsZpms8t1ukkA5rp/WuRds/b3HO3LIUqnSb7wznP06GhSTqmZCCg/EkHrjDYY6Vsh/vcvC0P3pkkSXGlNC2jbAHT4LGjPYSgyceZpV7P14trKeuRpkucgVrelvb2BW5ZBpnCQHcy0/tG0OegjT1a9Y76n3mK1Wka663qK8+oNJbf40xPDxLZLtpI0G8VCIGt1K48pk/grA60t+DOMHWkaKTDPUUsvWtSG3c4wZ7pngwCT1QZ9cDr7qHYTrW/fFvnHVmrSQuesE7oRkg3HtQfnrL9S9SJEhUxvUNRPyuEHiQyjsnDuId85PkdWSRNl8Vyz05WWvNpophMDYzPuZHHTBMoO52EBBceFunSnWw6EqT5LgyPaEdJ5bnDYR0E0ucTD6KMUJbeCMutZzw7uom+C5EeV3463CPINs7peuxJ/3Qkrn46rmwvtfebm7mHT1uj5nh6e6IwyA5aXD6p+ZJukh5kVFJdwYPHFVh1mnvoeFg8CoN2EOceatyl7BHkWYqyHjKsYiOChGU9qVQl4y1NPgjD8XLBBpSN+Oq75+xY8/VLZs+VNQ0l9HsqB9jz/Gyt0zyNzmMfJpAHIvfj1NECitHpqGBQLIolmr8T92p7gRffWFuCA4G7WIio0wkedNVJrKYlPCEAFUPcKx+cXBh0wxIR534PHrtVpw9EdQpWxKfMOTAz3OlpJsk6WqdTGUqn7zJMhwf1sFFUKLLUOi1TzXf148r2tIefDON+mS0ltw8ujxxdES9T+g0GRdJStSRJF+JlylKI9MgN0km6xn/k+znuWStQR7FzWPvjcay1kaUP/t6YLSv3z73KNkRet7yY7bxMaYYY5OuQHou81elURgNbdD/GNbWTz/uovMznJ3jLTHP2w8V3oRpICjsIKQsRynlUWEFK0NZDxvhdBZe7IO6Qu+wmsD6M8SBmzx2FvRyPysTc/OGImli7tnHfWjAEuLEUpLJzSP8U6lKdVlBfG7nDsEdGSdggRtGPzQBsYKNK1CrWERiasRdSDNAMhNhEbcrYHF2BqGJdPYphbDogOkcnwOQwXabuVQVVpgFTe9R8u0Y1p1mRtRHbdmdr64QqYzqiimm+qoJODIaVbXvtohAMxjElq3AS/linS51G2kvynQ5NI5sGSA3QkFElWCNJA1AT2bCR6ZjKYeOWIDrWNDpBbA7TdVwFybwK0paRpsJo+YJO1DZmc7aE7sueMBXihGm7NnwFkVr7Iwet0umjoE86tDPhPna5U+GpvlFjunG5fWNd2vvYsk16LycDv1ECbjJiLT0exjtmjgAy6E2YGh1XU1wmVEcLqyzleFCrAI5cwDNIl+m0uEoYX+9+g+dPHVPXDq/iVYw0KKThHFaQgG+juTwIiI4RBHlwYAeHYpmuwMkxhrSojRIVXog0hH1ysvnndgAw9ZWCSEKb9v1WISRu5VxmgOdOgqjlgN/olUo3A+mclA+w3gdJ5YiLhCMwcBjmVJAaHQSa4xbAGhshOvdDqp8JV/JQa/TLH6IuO0n102O6XpxYgxHiYwuS7JNNxFJdRQyMJ1s28IHZHAKvyOhwgAPWfic6ASFiB8aH6seWx+NgQNxsSInYxrKkqRA3kumsN3QOCaKmHkchx5BrHuvQg9LpFP73nbjkxPod97aGDk6KC3kdN/REHbKbj3/ZESXn8EJ+KFg4YXz44VH3z+FCkrn7GRb3M3OMw1okomSPZMlDZzLMDn2LZBI3lsQGSMZnM7RHMY3AA0/YTaRLpWv761/uNJfkFS6mSRz7whq/ZLCmBrxFOkEq6FqiU61I0/PA3EMNhe3dEcw/RcWCVUbEh9EXcaMeED3EgmKZAcuueNoXPh2oEJc61ol76MZNCXlrEjhEnU8CfZTFIu13xFeJOHQCXK9hli8aHDnG0kJEghxIP3LwkAJRD7e+iUr9GpFYzETnc60FBPScCKy9PiXoj3GDaNDv6TKJl+id7VmzCHjZIMPzSJPm9h97V8MrqcqDjWj9ysaECP//p779AISCo3v2nH1nNhd1RCjt06elzpxN7oVf/3Ibp23/Xo3CdKZ0l6f9HN7zOZnfCco8nhJ7+viVrc96pZFC/8Wksto+koU9IdtTXw2WkxnYPYMbTuu3JH7i2bVveqf/qng8nzpURoN7PEvA6XPPJgLV0Fue4MHwWazPlJwj50M+dCIoHgrZBtN7fmUSe1tDYbFGknriWu5ww7fKiqZRGelaTrRuegCb9bMtJgJXhfMnGRmmXbOUQ9wVS6XVVxzekLuroDcixjxv/Tzue1t2fxX4l0eX5VJBUHUrGJGPcZnmbdBrfxVr1UeVUZpDTWgeuxZrzczOY7vX4vWyc87ChCW6GFLAS8jNSz/tnNN/1OwyTbOBzdphGMZxyI7i4XY4TWghOrkNY5izY/GJpzyIrAzKY/jUK+KypJ4tDdYuMKM7dv/mJmx3f6oGMQOSjRB7/8FtYh/mzY77D7U/ZnofA990/ExbvP/x/2gh53ru0U8wPSb1V1f5IaNy7KH/bS2ZFEus23p/Wnx5PBuqjtN45t55xmusSLjkSq8biWm6n5obMMqP81YsqP1T5/lxMVcpSR1keqzxnbcKWlOLGryQViKFUEXCC65qW93p5thMibH4yEgd45UTmRP2J1RH5dynnB6rSGgrz3N6rKxlHOzKD5U+Y6Pf4kqvGfduLHjULQe2j6es4jlfkMlpH8Y2z4WyUjs3yenSTolmLwcbcm2nFNKSgr1evhcI95bavYCe+dwpjXtNX93b7/xpuHfXdHyyJ2a6Pau8aQW4GVkVIY1kr59rdW22dIzSTDe+fzuZ/uT2EUy7f4Lp9MsqnsWPs6F1pp9t39mG7Fbqt49yergduBm/krn+6avHT8bUI19d/Zs419HqyNU4x+FiIjNwORMew1A4ZYhy2oaBNDpoqfwpKBzyRXE8kxlqa7UnNS26N97/HQLPTo0pAurOnxyvBq//CGI3/I1491eTU81Y9cYyRVJfG36huJFN40UuNd3Es6uimVSoSEti1EPFdL1kTAtLtWM5m3eyPGQwMaerRM5T+MTfQl0CysGOWkw7U9M6ar4UW03TVD0KHtO9RWy59Zo8D3VohhxqNljMnoSVW32QnK5WXtkeLsLQ5HkofR2bka7ESl11GjZND5TTb94s5bS14/Dh7f2ZHuhvecT3f0w/S8wvzNpwck7fKrnUap/C+Gmm1+zQnWLy7rDZpceqoXhU06fQOoiM3ZBpSepyVRK2GoHNlLB2mztkiyst0GoLWi45qbsX9HTkAM7Gi24iH59uruT/qvDLWCQyG6rRFdzbk2a5MdPWNqKajKwF/8FutJr4tafWklmbx0ARkmEcsl5+hU7sXhDVoYSc4SO/ZRPVHWFFkfVcdB5JtlycWxiK51IkDcd/c2kmigZWzoQrn7MNOTlsE47yuWk4W3NNnF27wsNVedxalI/YMipr7uDphl3XprIrt/iysR9zmpSUwVWKsqEqXgpDAjtotKVxhbFUvtbZVIBay0h0DZ5rwjN4KmFWrVFb02siY3HaVuEpLotML8h04b1VRhT1SWpdC3+GMhXUY0AStqr2vUZWZLqiQsWFW7dWbbgeOafsWpC8lo6tq7K71lw0FicpmyvhnH6B0q55/JTtWvcpfz4OGvlQ9oZicKg5GdrE5T53Lyl+3S7l7W+psS+1W4DJeZiX50BtS5Vdv6UNX17ZrW/e8Ke48865ya6f3d6eaQuOmPbbun0609vFcTnxVw9snNPe3on+JTz3KC5mureiuTVoDaf09tLN/yvCZ4R37Xg9iN72UGz9DbUNUU5qrNLbtr1Q01L8u848h3+9Ipusc/r9Gxx+2T6+fQLT9K9b/zH9V9ryD6T0ZzCNXG8fT3a3bJ9ybMtHH93nYP1gmunslo9p2/Kpjanu6rT5vtRr6GS+LuaSTPUcWP4eQI/3SfHxQOoqm6V1b5ibW2tg+9Sc3lJOlw1M1p+htTQTgeL2pMECd9KTeaqs7x8Kzq7C4ebf0+yzkdk/8Ni40kSnZo/jmLO+Q6+9I73OId6eIOKwhx4H54Ot9yQ3P6OGF98QfSdwtsM9YRmWzR0an3m5FhdUtrIRfzxIBiTKXzPdH70/Dg4YIH0T/e/iF4GJyGa8ZNgBGsMuG3S86FEi+sP1d4kIjzP1EdP0Ux7t1ky/jKevNDuX0/RkF0MJrzOcam6KZQBD0Qf+wmdg+uAc9jSM9cMfkWhcACgzIUMeUxt19cIWXbjPkFoXdxuJghhEIT/xpsRt1kMYIw76mZcaD6yyB15vesOLojjgLXpPf4JCUwhnQknxpp8IDW9Bj9szuDiLjoWzhv5IOPNqN5FF6JkF8KQZ6M4a8AEBoC3qzZIwpzpyjVxkTN55cxXMDlVipiEU5gCEXIikYFygyOlIL65Bchk0zrMMFoZjwlLiWIxiM5MWKhiHi6JGYhOFcBPNZN1hzxFxVJM8BhHdOiZzSKP5iW4IbRJxI2q58Due4arD9pxjy8cRi53pWY1hI5JpaGXhdSLpCRlqgLCCAASDrM+ZeeIe08ROHlO4k6RgIYUYC+YRmGlIx9IhTVwUBDQ5KKxwEQEimEBQByinaRg4EIIYks9AsHrpGEz5iZ6ZT8JoWJsnaL0JQj0BC1sCQmTxNcwc8DaZ0RpeM3BMCMARpozn/cVQPRKEEsACnpYbNtsDQWVEEkqCAyGFWIzLJUqhiZ45JUcnDiu53aM+xOeApDgEmKiShQ7dY+jgmRRDxHgmwEvCgrwKIH0T6I6eIuNImJCRVZBEWeSRq0dg2oM4x5yhYJB0nt5zFATyWhKV1eKN4UzkCiYG7R7cqZRs4gyzSNZpM0gKRCuIO+QAkLcTeYtciHhPG4mnpXohGRhxNDJ7EYh7kvyV4oYpZnh/MJ/8zuklw4kdI5yypolKE3BOIQv8UvLB5z44bzhVaDEt5Hx2vFVdJEiCSbEGIbaj1xn985HoAHekjuwTz9WBc3wSOnnaH1PssiT6JvuHijRzhO3wXFgoT2YsaYTFgPgNnGKkgraup5p8CHHEdMpp2W0xr4CZJrAssWRMo/MT1QDKN9Q3A5cinJgE1kybmbad85zrYoUgLpFTLxWU3fWHfNlwdI/sUREKu2gmQrja8P5hiAtD83MsGEbiEzIcOipw/DWOuXey5xbaFY7NckUALgvkOA/DRJ5JnQFOWsNMcyFkJVRSPAOjGODwBEso6eI8CUn1OCT55NUQOKAISJmhxDWUWpOUHCFAgE4CgDFLzOjrJ9USRiVa5yyneX+kGkUzPe+sUHtlk6YMp3zghHW9YXK4zgjTvUzx68QL04ekGTZjomWV0xxb5xfONuqGoPNOExapRzWAC+Ihm5O+5ZHkEvYzp7uR9wcFipKMTDt5uzFQrtcg7xp+u7pQvJxxYeMx01zPj5moDLsf5O3Tg4jDFHQApHclrZqBywt+MSAQpI6e51hr2NNgxQkMz+XLsxzzYoLfwSC/6I/wpceJVidvxACTSafsn9n0HOLJjiyRZ4DOTVQGD6IXpHA5TgoG7hgK9wyZQryU7HifSJtI9rQGFA2ywAAAA21JREFUtdC2BCMruLTilx4axsfZz5xoE9+ltMNMr2n8WkTre/5kIU4FrmizIVRcWbx8baDk6nkxAji87zlwhhXQ3QXlqKn3IZ+opE8IH79Uytcsgsm+UEHrMdH4mxeVD4kNxsXjMN0R/0w/ATjdaQM4cYNeTKTGS3aQ57TCUDXCHSgEGkkEkIa/XEInZMD5ROkaXt0SlBAeyERMWginnuXUkJo5157CS5rMMBjemno9SJ0ujDfa0pxc8q7JXDQ5PvkqoCCBVCP5vgC5t4viobbpDp9kKafhpi3whbZ8XUPIn2pd3w7Al/Ateim9eg7X1Ge4VPS/b2Q+ylUdvFmbLpwyvflRu2a6msBfgF8yrRa9HdNg/lFE78f0WzbzTTlt4hkvk4ZM6hcyWmH+bslWF2cTi5Y1agT0lKmg3hvJbJW3oEQfmf4wkKPSDjTxnqvj2eHLOJkwbavlrHxwAxMWn2Pw4qgaPDhMG9AjI3H1S1Mvp/7XPhXgOAzCsIhK0P+/+KpupYGExFQb0k0JDAoY4ximgqwExmbSNVv7OqxOtjNvttb7KquvDaN8vVa9jWpO4hebN7mRHyA1NqnmxpcWyXyTC5k50GbIzO42EU9NyMmawMzfSeuNmZKA2kaLDPv3kN0DxNvRp5rbY8Jrq5gpwIwqb+IZHA21/zU8MjQ1sXtqR0bh2SfL80llB5wVBG0RayKcDqd/z+k9ypJCYcGiQvvRND9e+/Em0HLWrtZp/k7GMaFvtA6gzf3muQJFFaiJHieuIzDT5tCD/Y/0WZrxjLC1fob2iDURTofT4XTEU6dLlCXl5fTV1Ir2T1AI1ubBUD4viugZtS8XT+fX1dSK9k9QCNbmwVA+L4roGbUvF0//y+gdv45vGa3LGiyzJSrl7Fsc2j9BIdjhmgLE+H0lE3OXFB/PlqhErIlwOpwOpyOeOp2iLCnnm07f/SVjZGM/g7zRydUFa8VOYSvHm47nNlnuRszWcqHqV6EXhu2f6LG9xRjZWJ8ZR3pKCqy1aJl3BElcSSK2Kb0Q6R6P+iSsNrHDkY4FVLzhve40yKOjHuoazAkukblg6IQeHfWEQKA4CS4+tkzyp7HZHa0hZYjQTVclCI5ODiX19rwMCpat/bgVLOBfETpNkMo6fPCuGrlWrMdV7o5SxJoIp8PpX4s/FDl4USq+m6sAAAAASUVORK5CYII=" alt="" align="left" style="display:block;"></div> <h4 id="_4-6-pattern-analyzer"><a href="#_4-6-pattern-analyzer" class="header-anchor">#</a> 4.6 Pattern Analyzer</h4> <p>具有的特性是：通过正则表达式自定义分隔符，默认是 \W+，即非字词的符号作为分隔符，小写转化 。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-10.49568b4d.png" alt="" align="left" style="display:block;"></div> <h4 id="_4-7-language-analyzer"><a href="#_4-7-language-analyzer" class="header-anchor">#</a> 4.7 Language Analyzer</h4> <p>具有的特性是：提供了 30+ 常见语言的分词器。</p> <h3 id="_5-中文分词器"><a href="#_5-中文分词器" class="header-anchor">#</a> 5. 中文分词器</h3> <p>中文分词是指讲一个汉字序列切分成一个一个独立的词。在英文中，单词间以空格作为自然分界符，汉语中词没有一个形式上的分界符。而且根据上下文的不同，分析结果迥异。</p> <h4 id="_5-1-常见中文分词器"><a href="#_5-1-常见中文分词器" class="header-anchor">#</a> 5.1 常见中文分词器</h4> <ul><li>IK
<ul><li>可以实现中英文单词的分词，支持ik_smart、ik_maxword等模式；可以自定义词库，支持热更新分词词典。</li></ul></li> <li>jieba
<ul><li>python中最流行的分词系统，支持分词和词性标注；支持繁体分词、自定义词典、并行分词。</li></ul></li></ul> <p>基于自然语言的分词系统：</p> <p>这种分词系统可以通过创建一个模型，然后该模型经过训练可以通过根据上下文进行合理的分词，常见的有：</p> <ul><li>Hanlp
<ul><li>有一系列模型预算法组成的 Java 工具包，目标是普及自然语言处理在生产环境中的应用。</li></ul></li> <li>THULAC
<ul><li>清华大学推出，具有中文分词和词性标注的功能。</li></ul></li></ul> <br> <br> <h2 id="搜索相关性"><a href="#搜索相关性" class="header-anchor">#</a> <strong>搜索相关性</strong></h2> <p>用户在使用搜索功能时，最关心的就是搜索引擎能否根据搜索关键字，找出最匹配的搜索结果；而搜索引擎可以根据调整搜索的相关性，来控制返回不同的搜索结果；</p> <p>搜索结果的相关性，例如：</p> <ul><li>是否可以找到所有相关的内容；</li> <li>有多少不想管的内容被返回了；</li> <li>文档的打分是否合理；</li> <li>结合业务需求，平衡结果排名；</li> <li>Web 搜索，不仅仅要考虑内容的相关性，更重要的是内容的可靠度，综合相关性更高的展示在前面；</li> <li>电商搜索，不仅仅为用户提供搜索服务，搜索还扮演了销售的角色，向客户推荐新商品，去库存等；</li></ul> <h3 id="_1-相关度指标"><a href="#_1-相关度指标" class="header-anchor">#</a> 1. 相关度指标</h3> <ul><li>Precision 查准率
<ul><li>尽可能返回较少的无关文档；</li></ul></li> <li>Recall 查全率
<ul><li>尽量返回较多的相关文档；</li></ul></li> <li>Ranking 排名
<ul><li>是否能够按照相关度进行排序？</li></ul></li></ul> <h3 id="_2-相关度算分"><a href="#_2-相关度算分" class="header-anchor">#</a> 2. 相关度算分</h3> <ul><li>搜索的相关性算分，描述了一个文档与查询语句匹配的程度。ES 会对每个匹配查询条件的结果进行算分 _score；</li> <li>打分的本质就是排序，需要把最符合用户需求的文档排在前面。ES 5 之前，默认的相关性算分采用 TF-IDF，ES 6.0 起采用 BM 25；</li></ul> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="display:block;"></div> <h4 id="_2-1-词频-tf"><a href="#_2-1-词频-tf" class="header-anchor">#</a> 2.1 词频 TF</h4> <ul><li>Term Frequency：检索词在一篇文档中出现的频率
<ul><li>词频 = 检索词出现的次数 / 文档的总字数；</li></ul></li> <li>度量一条查询和结果文档相关性的简单方法：简单将搜索中的每一个词的 TF 进行相加
<ul><li>TF(区块链) + TF(的) + TF(应用)；</li></ul></li> <li>Stop Word
<ul><li>“的”在文档中出现了很多次，但是对贡献相关度几乎没有用处，不应该考虑它们的 TF；</li> <li>为了减少它在相关度上的算分比重，引入了 IDF，改为加权求和，一个词在所属有的文档记录中出现的太频繁，就会减轻它的重要程度；</li></ul></li></ul> <h4 id="_2-2-逆文档频率-idf"><a href="#_2-2-逆文档频率-idf" class="header-anchor">#</a> 2.2 逆文档频率 IDF</h4> <ul><li>DF，Document Frequency：检索词在所有文档中出现的频率；
<ul><li>“区块链”在相对比较少的文档中出现</li> <li>“应用”在相对比较多的文档中出现</li> <li>“Stop Word”在大量的文档中出现</li></ul></li> <li>IDF，Inverse Document Frequency：简单说 = log( 全部文档 / 检索词出现过的文档总数 )；</li> <li>TF-IDF 本质就是将 TF 求和变成了加权求和
<ul><li>TF(区块链)*IDF(区块链) + TF(的)*IDF(的) + TF(应用)*IDF(应用)；</li></ul></li></ul> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="display:block;"></div> <h4 id="_2-3-lucene-中的-tf-idf-评分公式"><a href="#_2-3-lucene-中的-tf-idf-评分公式" class="header-anchor">#</a> 2.3 Lucene 中的 TF-IDF 评分公式</h4> <p>现代搜索引擎，对 TF-IDF 进行了大量细微的优化。ES 5 之前的版本就是采用的 TF-IDF。</p> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-13.746fc4f8.png" alt="" align="left" style="display:block;"></div> <br> <h4 id="_2-4-bm-25-评分算法"><a href="#_2-4-bm-25-评分算法" class="header-anchor">#</a> 2.4 BM 25 评分算法</h4> <br> <div style="display:flex;"><img src="/assets/img/es-analysisandrelated-14.8237c1ca.png" alt="" align="left" style="display:block;"></div> <br> <div style="display:flex;"><img src="data:image/png;base64,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" alt="" align="left" style="display:block;"></div> <br> <ul><li>从 ES 6.0 起，默认算法改为了 BM 25；</li> <li>和经典的 TF-IDF 相比，当 TF 无限增加时，BM 25 算分会趋于一个数值；</li> <li>在 Elasticsearch 中定制相关度算法的参数，定制 Similarity：
<ul><li>K 默认值是 1.2，数值越小饱和度越高，b 默认值是 0.75（取值范围 0-1），0 代表禁止 Normalization；</li></ul></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code>PUT /my_index
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;similarity&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;custom_similarity&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BM25&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;b&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;k1&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;custom_text&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;similarity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom_similarity&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default_text&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_2-6-boosting-relevance"><a href="#_2-6-boosting-relevance" class="header-anchor">#</a> 2.6 Boosting Relevance</h4> <ul><li>Boosting 是控制相关度的一种手段
<ul><li>ES 中可以对索引，字段，或查询子条件，分别设置 Boosting 参数</li></ul></li> <li>参数 boosting 的含义
<ul><li>当 boost &gt; 1 时，打分的相关度相对性提升；</li> <li>当 0 &lt; boost &lt;1 时，打分的权重相对性降低；</li> <li>当 boost &lt; 0 时，贡献负分；</li></ul></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code>POST testscore/_search
<span class="token punctuation">{</span>
	<span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	<span class="token property">&quot;boosting&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    	<span class="token property">&quot;positive&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      	<span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        	<span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elasticsearch&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;negative&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      	<span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        	<span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;like&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;negative_boost&quot;</span><span class="token operator">:</span> <span class="token number">0.2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BigDataAndDistributedSystem/ELK/ESConcepts-index.html" class="prev">ES 原理-倒排索引</a></span> <span class="next"><a href="/BigDataAndDistributedSystem/ELK/ESIndex-basicoperation.html">ES Index-基本操作与并发</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2ba1140b.js" defer></script><script src="/assets/js/2.858e58ff.js" defer></script><script src="/assets/js/8.60d5a8a9.js" defer></script>
  </body>
</html>
